(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const xt={},Ir=[],We=()=>{},Wm=()=>!1,no=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ja=e=>e.startsWith("onUpdate:"),de=Object.assign,Za=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Qm=Object.prototype.hasOwnProperty,Rt=(e,t)=>Qm.call(e,t),ot=Array.isArray,Ar=e=>Ks(e)==="[object Map]",Jh=e=>Ks(e)==="[object Set]",Yc=e=>Ks(e)==="[object Date]",ut=e=>typeof e=="function",Kt=e=>typeof e=="string",Ze=e=>typeof e=="symbol",Ot=e=>e!==null&&typeof e=="object",Zh=e=>(Ot(e)||ut(e))&&ut(e.then)&&ut(e.catch),tf=Object.prototype.toString,Ks=e=>tf.call(e),Ym=e=>Ks(e).slice(8,-1),ef=e=>Ks(e)==="[object Object]",tl=e=>Kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ms=Xa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ro=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Xm=/-(\w)/g,Le=ro(e=>e.replace(Xm,(t,n)=>n?n.toUpperCase():"")),Jm=/\B([A-Z])/g,lr=ro(e=>e.replace(Jm,"-$1").toLowerCase()),so=ro(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ko=ro(e=>e?`on${so(e)}`:""),Vn=(e,t)=>!Object.is(e,t),Ai=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},nf=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ga=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Xc;const io=()=>Xc||(Xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function el(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Kt(r)?ng(r):el(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Kt(e)||Ot(e))return e}const Zm=/;(?![^(]*\))/g,tg=/:([^]+)/,eg=/\/\*[^]*?\*\//g;function ng(e){const t={};return e.replace(eg,"").split(Zm).forEach(n=>{if(n){const r=n.split(tg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function be(e){let t="";if(Kt(e))t=e;else if(ot(e))for(let n=0;n<e.length;n++){const r=be(e[n]);r&&(t+=r+" ")}else if(Ot(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const rg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sg=Xa(rg);function rf(e){return!!e||e===""}function ig(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Oi(e[r],t[r]);return n}function Oi(e,t){if(e===t)return!0;let n=Yc(e),r=Yc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Ze(e),r=Ze(t),n||r)return e===t;if(n=ot(e),r=ot(t),n||r)return n&&r?ig(e,t):!1;if(n=Ot(e),r=Ot(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Oi(e[a],t[a]))return!1}}return String(e)===String(t)}const sf=e=>!!(e&&e.__v_isRef===!0),pt=e=>Kt(e)?e:e==null?"":ot(e)||Ot(e)&&(e.toString===tf||!ut(e.toString))?sf(e)?pt(e.value):JSON.stringify(e,of,2):String(e),of=(e,t)=>sf(t)?of(e,t.value):Ar(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[zo(r,i)+" =>"]=s,n),{})}:Jh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>zo(n))}:Ze(t)?zo(t):Ot(t)&&!ot(t)&&!ef(t)?String(t):t,zo=(e,t="")=>{var n;return Ze(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ee;class og{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ee,!t&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ee;try{return Ee=this,t()}finally{Ee=n}}}on(){++this._on===1&&(this.prevScope=Ee,Ee=this)}off(){this._on>0&&--this._on===0&&(Ee=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function ag(){return Ee}let Vt;const Go=new WeakSet;class af{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ee&&Ee.active&&Ee.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Go.has(this)&&(Go.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jc(this),uf(this);const t=Vt,n=$e;Vt=this,$e=!0;try{return this.fn()}finally{hf(this),Vt=t,$e=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)sl(t);this.deps=this.depsTail=void 0,Jc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Go.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_a(this)&&this.run()}get dirty(){return _a(this)}}let lf=0,gs,_s;function cf(e,t=!1){if(e.flags|=8,t){e.next=_s,_s=e;return}e.next=gs,gs=e}function nl(){lf++}function rl(){if(--lf>0)return;if(_s){let t=_s;for(_s=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;gs;){let t=gs;for(gs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function uf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function hf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),sl(r),lg(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function _a(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ff(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ff(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cs)||(e.globalVersion=Cs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!_a(e))))return;e.flags|=2;const t=e.dep,n=Vt,r=$e;Vt=e,$e=!0;try{uf(e);const s=e.fn(e._value);(t.version===0||Vn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Vt=n,$e=r,hf(e),e.flags&=-3}}function sl(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)sl(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function lg(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let $e=!0;const df=[];function fn(){df.push($e),$e=!1}function dn(){const e=df.pop();$e=e===void 0?!0:e}function Jc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Vt;Vt=void 0;try{t()}finally{Vt=n}}}let Cs=0;class cg{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class il{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Vt||!$e||Vt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Vt)n=this.activeLink=new cg(Vt,this),Vt.deps?(n.prevDep=Vt.depsTail,Vt.depsTail.nextDep=n,Vt.depsTail=n):Vt.deps=Vt.depsTail=n,pf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Vt.depsTail,n.nextDep=void 0,Vt.depsTail.nextDep=n,Vt.depsTail=n,Vt.deps===n&&(Vt.deps=r)}return n}trigger(t){this.version++,Cs++,this.notify(t)}notify(t){nl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rl()}}}function pf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)pf(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ya=new WeakMap,tr=Symbol(""),va=Symbol(""),xs=Symbol("");function ce(e,t,n){if($e&&Vt){let r=ya.get(e);r||ya.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new il),s.map=r,s.key=n),s.track()}}function cn(e,t,n,r,s,i){const a=ya.get(e);if(!a){Cs++;return}const l=c=>{c&&c.trigger()};if(nl(),t==="clear")a.forEach(l);else{const c=ot(e),h=c&&tl(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,m)=>{(m==="length"||m===xs||!Ze(m)&&m>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(xs)),t){case"add":c?h&&l(a.get("length")):(l(a.get(tr)),Ar(e)&&l(a.get(va)));break;case"delete":c||(l(a.get(tr)),Ar(e)&&l(a.get(va)));break;case"set":Ar(e)&&l(a.get(tr));break}}rl()}function gr(e){const t=bt(e);return t===e?t:(ce(t,"iterate",xs),Me(e)?t:t.map(Jt))}function oo(e){return ce(e=bt(e),"iterate",xs),e}const ug={__proto__:null,[Symbol.iterator](){return Wo(this,Symbol.iterator,Jt)},concat(...e){return gr(this).concat(...e.map(t=>ot(t)?gr(t):t))},entries(){return Wo(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return sn(this,"every",e,t,void 0,arguments)},filter(e,t){return sn(this,"filter",e,t,n=>n.map(Jt),arguments)},find(e,t){return sn(this,"find",e,t,Jt,arguments)},findIndex(e,t){return sn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return sn(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return sn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return sn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Qo(this,"includes",e)},indexOf(...e){return Qo(this,"indexOf",e)},join(e){return gr(this).join(e)},lastIndexOf(...e){return Qo(this,"lastIndexOf",e)},map(e,t){return sn(this,"map",e,t,void 0,arguments)},pop(){return os(this,"pop")},push(...e){return os(this,"push",e)},reduce(e,...t){return Zc(this,"reduce",e,t)},reduceRight(e,...t){return Zc(this,"reduceRight",e,t)},shift(){return os(this,"shift")},some(e,t){return sn(this,"some",e,t,void 0,arguments)},splice(...e){return os(this,"splice",e)},toReversed(){return gr(this).toReversed()},toSorted(e){return gr(this).toSorted(e)},toSpliced(...e){return gr(this).toSpliced(...e)},unshift(...e){return os(this,"unshift",e)},values(){return Wo(this,"values",Jt)}};function Wo(e,t,n){const r=oo(e),s=r[t]();return r!==e&&!Me(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const hg=Array.prototype;function sn(e,t,n,r,s,i){const a=oo(e),l=a!==e&&!Me(e),c=a[t];if(c!==hg[t]){const p=c.apply(e,i);return l?Jt(p):p}let h=n;a!==e&&(l?h=function(p,m){return n.call(this,Jt(p),m,e)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,e)}));const d=c.call(a,h,r);return l&&s?s(d):d}function Zc(e,t,n,r){const s=oo(e);let i=n;return s!==e&&(Me(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Jt(l),c,e)}),s[t](i,...r)}function Qo(e,t,n){const r=bt(e);ce(r,"iterate",xs);const s=r[t](...n);return(s===-1||s===!1)&&ll(n[0])?(n[0]=bt(n[0]),r[t](...n)):s}function os(e,t,n=[]){fn(),nl();const r=bt(e)[t].apply(e,n);return rl(),dn(),r}const fg=Xa("__proto__,__v_isRef,__isVue"),mf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ze));function dg(e){Ze(e)||(e=String(e));const t=bt(this);return ce(t,"has",e),t.hasOwnProperty(e)}class gf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Ig:Ef:i?vf:yf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ot(t);if(!s){let c;if(a&&(c=ug[n]))return c;if(n==="hasOwnProperty")return dg}const l=Reflect.get(t,n,fe(t)?t:r);return(Ze(n)?mf.has(n):fg(n))||(s||ce(t,"get",n),i)?l:fe(l)?a&&tl(n)?l:l.value:Ot(l)?s?wf(l):ao(l):l}}class _f extends gf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=Nn(i);if(!Me(r)&&!Nn(r)&&(i=bt(i),r=bt(r)),!ot(t)&&fe(i)&&!fe(r))return c?!1:(i.value=r,!0)}const a=ot(t)&&tl(n)?Number(n)<t.length:Rt(t,n),l=Reflect.set(t,n,r,fe(t)?t:s);return t===bt(s)&&(a?Vn(r,i)&&cn(t,"set",n,r):cn(t,"add",n,r)),l}deleteProperty(t,n){const r=Rt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&cn(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Ze(n)||!mf.has(n))&&ce(t,"has",n),r}ownKeys(t){return ce(t,"iterate",ot(t)?"length":tr),Reflect.ownKeys(t)}}class pg extends gf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const mg=new _f,gg=new pg,_g=new _f(!0);const Ea=e=>e,_i=e=>Reflect.getPrototypeOf(e);function yg(e,t,n){return function(...r){const s=this.__v_raw,i=bt(s),a=Ar(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,h=s[e](...r),d=n?Ea:t?ki:Jt;return!t&&ce(i,"iterate",c?va:tr),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:l?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function yi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vg(e,t){const n={get(s){const i=this.__v_raw,a=bt(i),l=bt(s);e||(Vn(s,l)&&ce(a,"get",s),ce(a,"get",l));const{has:c}=_i(a),h=t?Ea:e?ki:Jt;if(c.call(a,s))return h(i.get(s));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ce(bt(s),"iterate",tr),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=bt(i),l=bt(s);return e||(Vn(s,l)&&ce(a,"has",s),ce(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=bt(l),h=t?Ea:e?ki:Jt;return!e&&ce(c,"iterate",tr),l.forEach((d,p)=>s.call(i,h(d),h(p),a))}};return de(n,e?{add:yi("add"),set:yi("set"),delete:yi("delete"),clear:yi("clear")}:{add(s){!t&&!Me(s)&&!Nn(s)&&(s=bt(s));const i=bt(this);return _i(i).has.call(i,s)||(i.add(s),cn(i,"add",s,s)),this},set(s,i){!t&&!Me(i)&&!Nn(i)&&(i=bt(i));const a=bt(this),{has:l,get:c}=_i(a);let h=l.call(a,s);h||(s=bt(s),h=l.call(a,s));const d=c.call(a,s);return a.set(s,i),h?Vn(i,d)&&cn(a,"set",s,i):cn(a,"add",s,i),this},delete(s){const i=bt(this),{has:a,get:l}=_i(i);let c=a.call(i,s);c||(s=bt(s),c=a.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return c&&cn(i,"delete",s,void 0),h},clear(){const s=bt(this),i=s.size!==0,a=s.clear();return i&&cn(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=yg(s,e,t)}),n}function ol(e,t){const n=vg(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Rt(n,s)&&s in r?n:r,s,i)}const Eg={get:ol(!1,!1)},Tg={get:ol(!1,!0)},wg={get:ol(!0,!1)};const yf=new WeakMap,vf=new WeakMap,Ef=new WeakMap,Ig=new WeakMap;function Ag(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bg(e){return e.__v_skip||!Object.isExtensible(e)?0:Ag(Ym(e))}function ao(e){return Nn(e)?e:al(e,!1,mg,Eg,yf)}function Tf(e){return al(e,!1,_g,Tg,vf)}function wf(e){return al(e,!0,gg,wg,Ef)}function al(e,t,n,r,s){if(!Ot(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=bg(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function br(e){return Nn(e)?br(e.__v_raw):!!(e&&e.__v_isReactive)}function Nn(e){return!!(e&&e.__v_isReadonly)}function Me(e){return!!(e&&e.__v_isShallow)}function ll(e){return e?!!e.__v_raw:!1}function bt(e){const t=e&&e.__v_raw;return t?bt(t):e}function Rg(e){return!Rt(e,"__v_skip")&&Object.isExtensible(e)&&nf(e,"__v_skip",!0),e}const Jt=e=>Ot(e)?ao(e):e,ki=e=>Ot(e)?wf(e):e;function fe(e){return e?e.__v_isRef===!0:!1}function ye(e){return If(e,!1)}function Sg(e){return If(e,!0)}function If(e,t){return fe(e)?e:new Pg(e,t)}class Pg{constructor(t,n){this.dep=new il,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:bt(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Me(t)||Nn(t);t=r?t:bt(t),Vn(t,n)&&(this._rawValue=t,this._value=r?t:Jt(t),this.dep.trigger())}}function Rr(e){return fe(e)?e.value:e}const Cg={get:(e,t,n)=>t==="__v_raw"?e:Rr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return fe(s)&&!fe(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Af(e){return br(e)?e:new Proxy(e,Cg)}class xg{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new il(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Vt!==this)return cf(this,!0),!0}get value(){const t=this.dep.track();return ff(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vg(e,t,n=!1){let r,s;return ut(e)?r=e:(r=e.get,s=e.set),new xg(r,s,n)}const vi={},Ni=new WeakMap;let Wn;function Dg(e,t=!1,n=Wn){if(n){let r=Ni.get(n);r||Ni.set(n,r=[]),r.push(e)}}function Og(e,t,n=xt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,h=G=>s?G:Me(G)||s===!1||s===0?un(G,1):un(G);let d,p,m,g,b=!1,V=!1;if(fe(e)?(p=()=>e.value,b=Me(e)):br(e)?(p=()=>h(e),b=!0):ot(e)?(V=!0,b=e.some(G=>br(G)||Me(G)),p=()=>e.map(G=>{if(fe(G))return G.value;if(br(G))return h(G);if(ut(G))return c?c(G,2):G()})):ut(e)?t?p=c?()=>c(e,2):e:p=()=>{if(m){fn();try{m()}finally{dn()}}const G=Wn;Wn=d;try{return c?c(e,3,[g]):e(g)}finally{Wn=G}}:p=We,t&&s){const G=p,ft=s===!0?1/0:s;p=()=>un(G(),ft)}const O=ag(),q=()=>{d.stop(),O&&O.active&&Za(O.effects,d)};if(i&&t){const G=t;t=(...ft)=>{G(...ft),q()}}let $=V?new Array(e.length).fill(vi):vi;const z=G=>{if(!(!(d.flags&1)||!d.dirty&&!G))if(t){const ft=d.run();if(s||b||(V?ft.some((gt,I)=>Vn(gt,$[I])):Vn(ft,$))){m&&m();const gt=Wn;Wn=d;try{const I=[ft,$===vi?void 0:V&&$[0]===vi?[]:$,g];$=ft,c?c(t,3,I):t(...I)}finally{Wn=gt}}}else d.run()};return l&&l(z),d=new af(p),d.scheduler=a?()=>a(z,!1):z,g=G=>Dg(G,!1,d),m=d.onStop=()=>{const G=Ni.get(d);if(G){if(c)c(G,4);else for(const ft of G)ft();Ni.delete(d)}},t?r?z(!0):$=d.run():a?a(z.bind(null,!0),!0):d.run(),q.pause=d.pause.bind(d),q.resume=d.resume.bind(d),q.stop=q,q}function un(e,t=1/0,n){if(t<=0||!Ot(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,fe(e))un(e.value,t,n);else if(ot(e))for(let r=0;r<e.length;r++)un(e[r],t,n);else if(Jh(e)||Ar(e))e.forEach(r=>{un(r,t,n)});else if(ef(e)){for(const r in e)un(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&un(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zs(e,t,n,r){try{return r?e(...r):e()}catch(s){lo(s,t,n)}}function tn(e,t,n,r){if(ut(e)){const s=zs(e,t,n,r);return s&&Zh(s)&&s.catch(i=>{lo(i,t,n)}),s}if(ot(e)){const s=[];for(let i=0;i<e.length;i++)s.push(tn(e[i],t,n,r));return s}}function lo(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||xt;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,h)===!1)return}l=l.parent}if(i){fn(),zs(i,null,10,[e,c,h]),dn();return}}kg(e,n,s,r,a)}function kg(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const _e=[];let ze=-1;const Sr=[];let Rn=null,yr=0;const bf=Promise.resolve();let Mi=null;function Rf(e){const t=Mi||bf;return e?t.then(this?e.bind(this):e):t}function Ng(e){let t=ze+1,n=_e.length;for(;t<n;){const r=t+n>>>1,s=_e[r],i=Vs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function cl(e){if(!(e.flags&1)){const t=Vs(e),n=_e[_e.length-1];!n||!(e.flags&2)&&t>=Vs(n)?_e.push(e):_e.splice(Ng(t),0,e),e.flags|=1,Sf()}}function Sf(){Mi||(Mi=bf.then(Cf))}function Mg(e){ot(e)?Sr.push(...e):Rn&&e.id===-1?Rn.splice(yr+1,0,e):e.flags&1||(Sr.push(e),e.flags|=1),Sf()}function tu(e,t,n=ze+1){for(;n<_e.length;n++){const r=_e[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;_e.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Pf(e){if(Sr.length){const t=[...new Set(Sr)].sort((n,r)=>Vs(n)-Vs(r));if(Sr.length=0,Rn){Rn.push(...t);return}for(Rn=t,yr=0;yr<Rn.length;yr++){const n=Rn[yr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Rn=null,yr=0}}const Vs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Cf(e){try{for(ze=0;ze<_e.length;ze++){const t=_e[ze];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ze<_e.length;ze++){const t=_e[ze];t&&(t.flags&=-2)}ze=-1,_e.length=0,Pf(),Mi=null,(_e.length||Sr.length)&&Cf()}}let Se=null,xf=null;function Li(e){const t=Se;return Se=e,xf=e&&e.type.__scopeId||null,t}function Lg(e,t=Se,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&uu(-1);const i=Li(t);let a;try{a=e(...s)}finally{Li(i),r._d&&uu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function an(e,t){if(Se===null)return e;const n=fo(Se),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=xt]=t[s];i&&(ut(i)&&(i={mounted:i,updated:i}),i.deep&&un(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function zn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(fn(),tn(c,n,8,[e.el,l,e,t]),dn())}}const Fg=Symbol("_vte"),Ug=e=>e.__isTeleport;function ul(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ul(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Vf(e,t){return ut(e)?de({name:e.name},t,{setup:e}):e}function Df(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Fi(e,t,n,r,s=!1){if(ot(e)){e.forEach((b,V)=>Fi(b,t&&(ot(t)?t[V]:t),n,r,s));return}if(ys(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Fi(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?fo(r.component):r.el,a=s?null:i,{i:l,r:c}=e,h=t&&t.r,d=l.refs===xt?l.refs={}:l.refs,p=l.setupState,m=bt(p),g=p===xt?()=>!1:b=>Rt(m,b);if(h!=null&&h!==c&&(Kt(h)?(d[h]=null,g(h)&&(p[h]=null)):fe(h)&&(h.value=null)),ut(c))zs(c,l,12,[a,d]);else{const b=Kt(c),V=fe(c);if(b||V){const O=()=>{if(e.f){const q=b?g(c)?p[c]:d[c]:c.value;s?ot(q)&&Za(q,i):ot(q)?q.includes(i)||q.push(i):b?(d[c]=[i],g(c)&&(p[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else b?(d[c]=a,g(c)&&(p[c]=a)):V&&(c.value=a,e.k&&(d[e.k]=a))};a?(O.id=-1,Ae(O,n)):O()}}}io().requestIdleCallback;io().cancelIdleCallback;const ys=e=>!!e.type.__asyncLoader,Of=e=>e.type.__isKeepAlive;function Bg(e,t){kf(e,"a",t)}function $g(e,t){kf(e,"da",t)}function kf(e,t,n=he){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(co(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Of(s.parent.vnode)&&jg(r,t,n,s),s=s.parent}}function jg(e,t,n,r){const s=co(t,e,r,!0);hl(()=>{Za(r[t],s)},n)}function co(e,t,n=he,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{fn();const l=Gs(n),c=tn(t,n,e,a);return l(),dn(),c});return r?s.unshift(i):s.push(i),i}}const vn=e=>(t,n=he)=>{(!Os||e==="sp")&&co(e,(...r)=>t(...r),n)},qg=vn("bm"),Nf=vn("m"),Hg=vn("bu"),Kg=vn("u"),zg=vn("bum"),hl=vn("um"),Gg=vn("sp"),Wg=vn("rtg"),Qg=vn("rtc");function Yg(e,t=he){co("ec",e,t)}const Xg="components";function Jg(e,t){return t_(Xg,e,!0,t)||e}const Zg=Symbol.for("v-ndc");function t_(e,t,n=!0,r=!1){const s=Se||he;if(s){const i=s.type;{const l=$_(i,!1);if(l&&(l===t||l===Le(t)||l===so(Le(t))))return i}const a=eu(s[e]||i[e],t)||eu(s.appContext[e],t);return!a&&r?i:a}}function eu(e,t){return e&&(e[t]||e[Le(t)]||e[so(Le(t))])}function Yo(e,t,n,r){let s;const i=n,a=ot(e);if(a||Kt(e)){const l=a&&br(e);let c=!1,h=!1;l&&(c=!Me(e),h=Nn(e),e=oo(e)),s=new Array(e.length);for(let d=0,p=e.length;d<p;d++)s[d]=t(c?h?ki(Jt(e[d])):Jt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Ot(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const Ta=e=>e?nd(e)?fo(e):Ta(e.parent):null,vs=de(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ta(e.parent),$root:e=>Ta(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Lf(e),$forceUpdate:e=>e.f||(e.f=()=>{cl(e.update)}),$nextTick:e=>e.n||(e.n=Rf.bind(e.proxy)),$watch:e=>T_.bind(e)}),Xo=(e,t)=>e!==xt&&!e.__isScriptSetup&&Rt(e,t),e_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Xo(r,t))return a[t]=1,r[t];if(s!==xt&&Rt(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&Rt(h,t))return a[t]=3,i[t];if(n!==xt&&Rt(n,t))return a[t]=4,n[t];wa&&(a[t]=0)}}const d=vs[t];let p,m;if(d)return t==="$attrs"&&ce(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==xt&&Rt(n,t))return a[t]=4,n[t];if(m=c.config.globalProperties,Rt(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Xo(s,t)?(s[t]=n,!0):r!==xt&&Rt(r,t)?(r[t]=n,!0):Rt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==xt&&Rt(e,a)||Xo(t,a)||(l=i[0])&&Rt(l,a)||Rt(r,a)||Rt(vs,a)||Rt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Rt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function nu(e){return ot(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let wa=!0;function n_(e){const t=Lf(e),n=e.proxy,r=e.ctx;wa=!1,t.beforeCreate&&ru(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:m,beforeUpdate:g,updated:b,activated:V,deactivated:O,beforeDestroy:q,beforeUnmount:$,destroyed:z,unmounted:G,render:ft,renderTracked:gt,renderTriggered:I,errorCaptured:v,serverPrefetch:w,expose:A,inheritAttrs:R,components:P,directives:T,filters:pe}=t;if(h&&r_(h,r,null),a)for(const _t in a){const dt=a[_t];ut(dt)&&(r[_t]=dt.bind(n))}if(s){const _t=s.call(n,n);Ot(_t)&&(e.data=ao(_t))}if(wa=!0,i)for(const _t in i){const dt=i[_t],we=ut(dt)?dt.bind(n,n):ut(dt.get)?dt.get.bind(n,n):We,Fe=!ut(dt)&&ut(dt.set)?dt.set.bind(n):We,De=Ct({get:we,set:Fe});Object.defineProperty(r,_t,{enumerable:!0,configurable:!0,get:()=>De.value,set:Lt=>De.value=Lt})}if(l)for(const _t in l)Mf(l[_t],r,n,_t);if(c){const _t=ut(c)?c.call(n):c;Reflect.ownKeys(_t).forEach(dt=>{bi(dt,_t[dt])})}d&&ru(d,e,"c");function jt(_t,dt){ot(dt)?dt.forEach(we=>_t(we.bind(n))):dt&&_t(dt.bind(n))}if(jt(qg,p),jt(Nf,m),jt(Hg,g),jt(Kg,b),jt(Bg,V),jt($g,O),jt(Yg,v),jt(Qg,gt),jt(Wg,I),jt(zg,$),jt(hl,G),jt(Gg,w),ot(A))if(A.length){const _t=e.exposed||(e.exposed={});A.forEach(dt=>{Object.defineProperty(_t,dt,{get:()=>n[dt],set:we=>n[dt]=we})})}else e.exposed||(e.exposed={});ft&&e.render===We&&(e.render=ft),R!=null&&(e.inheritAttrs=R),P&&(e.components=P),T&&(e.directives=T),w&&Df(e)}function r_(e,t,n=We){ot(e)&&(e=Ia(e));for(const r in e){const s=e[r];let i;Ot(s)?"default"in s?i=Qe(s.from||r,s.default,!0):i=Qe(s.from||r):i=Qe(s),fe(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function ru(e,t,n){tn(ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Mf(e,t,n,r){let s=r.includes(".")?Yf(n,r):()=>n[r];if(Kt(e)){const i=t[e];ut(i)&&Cr(s,i)}else if(ut(e))Cr(s,e.bind(n));else if(Ot(e))if(ot(e))e.forEach(i=>Mf(i,t,n,r));else{const i=ut(e.handler)?e.handler.bind(n):t[e.handler];ut(i)&&Cr(s,i,e)}}function Lf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(h=>Ui(c,h,a,!0)),Ui(c,t,a)),Ot(t)&&i.set(t,c),c}function Ui(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ui(e,i,n,!0),s&&s.forEach(a=>Ui(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=s_[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const s_={data:su,props:iu,emits:iu,methods:us,computed:us,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:us,directives:us,watch:o_,provide:su,inject:i_};function su(e,t){return t?e?function(){return de(ut(e)?e.call(this,this):e,ut(t)?t.call(this,this):t)}:t:e}function i_(e,t){return us(Ia(e),Ia(t))}function Ia(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function us(e,t){return e?de(Object.create(null),e,t):t}function iu(e,t){return e?ot(e)&&ot(t)?[...new Set([...e,...t])]:de(Object.create(null),nu(e),nu(t??{})):t}function o_(e,t){if(!e)return t;if(!t)return e;const n=de(Object.create(null),e);for(const r in t)n[r]=ge(e[r],t[r]);return n}function Ff(){return{app:null,config:{isNativeTag:Wm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let a_=0;function l_(e,t){return function(r,s=null){ut(r)||(r=de({},r)),s!=null&&!Ot(s)&&(s=null);const i=Ff(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:a_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:q_,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ut(d.install)?(a.add(d),d.install(h,...p)):ut(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,m){if(!c){const g=h._ceVNode||te(r,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(g,d,m),c=!0,h._container=d,d.__vue_app__=h,fo(g.component)}},onUnmount(d){l.push(d)},unmount(){c&&(tn(l,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=Pr;Pr=h;try{return d()}finally{Pr=p}}};return h}}let Pr=null;function bi(e,t){if(he){let n=he.provides;const r=he.parent&&he.parent.provides;r===n&&(n=he.provides=Object.create(r)),n[e]=t}}function Qe(e,t,n=!1){const r=he||Se;if(r||Pr){let s=Pr?Pr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ut(t)?t.call(r&&r.proxy):t}}const Uf={},Bf=()=>Object.create(Uf),$f=e=>Object.getPrototypeOf(e)===Uf;function c_(e,t,n,r=!1){const s={},i=Bf();e.propsDefaults=Object.create(null),jf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Tf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function u_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=bt(s),[c]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(uo(e.emitsOptions,m))continue;const g=t[m];if(c)if(Rt(i,m))g!==i[m]&&(i[m]=g,h=!0);else{const b=Le(m);s[b]=Aa(c,l,b,g,e,!1)}else g!==i[m]&&(i[m]=g,h=!0)}}}else{jf(e,t,s,i)&&(h=!0);let d;for(const p in l)(!t||!Rt(t,p)&&((d=lr(p))===p||!Rt(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=Aa(c,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!Rt(t,p))&&(delete i[p],h=!0)}h&&cn(e.attrs,"set","")}function jf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(ms(c))continue;const h=t[c];let d;s&&Rt(s,d=Le(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:uo(e.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,a=!0)}if(i){const c=bt(n),h=l||xt;for(let d=0;d<i.length;d++){const p=i[d];n[p]=Aa(s,c,p,h[p],e,!Rt(h,p))}}return a}function Aa(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=Rt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ut(c)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=Gs(s);r=h[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===lr(n))&&(r=!0))}return r}const h_=new WeakMap;function qf(e,t,n=!1){const r=n?h_:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!ut(e)){const d=p=>{c=!0;const[m,g]=qf(p,t,!0);de(a,m),g&&l.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Ot(e)&&r.set(e,Ir),Ir;if(ot(i))for(let d=0;d<i.length;d++){const p=Le(i[d]);ou(p)&&(a[p]=xt)}else if(i)for(const d in i){const p=Le(d);if(ou(p)){const m=i[d],g=a[p]=ot(m)||ut(m)?{type:m}:de({},m),b=g.type;let V=!1,O=!0;if(ot(b))for(let q=0;q<b.length;++q){const $=b[q],z=ut($)&&$.name;if(z==="Boolean"){V=!0;break}else z==="String"&&(O=!1)}else V=ut(b)&&b.name==="Boolean";g[0]=V,g[1]=O,(V||Rt(g,"default"))&&l.push(p)}}const h=[a,l];return Ot(e)&&r.set(e,h),h}function ou(e){return e[0]!=="$"&&!ms(e)}const fl=e=>e[0]==="_"||e==="$stable",dl=e=>ot(e)?e.map(Ge):[Ge(e)],f_=(e,t,n)=>{if(t._n)return t;const r=Lg((...s)=>dl(t(...s)),n);return r._c=!1,r},Hf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(fl(s))continue;const i=e[s];if(ut(i))t[s]=f_(s,i,r);else if(i!=null){const a=dl(i);t[s]=()=>a}}},Kf=(e,t)=>{const n=dl(t);e.slots.default=()=>n},zf=(e,t,n)=>{for(const r in t)(n||!fl(r))&&(e[r]=t[r])},d_=(e,t,n)=>{const r=e.slots=Bf();if(e.vnode.shapeFlag&32){const s=t._;s?(zf(r,t,n),n&&nf(r,"_",s,!0)):Hf(t,r)}else t&&Kf(e,t)},p_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=xt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:zf(s,t,n):(i=!t.$stable,Hf(t,s)),a=t}else t&&(Kf(e,t),a={default:1});if(i)for(const l in s)!fl(l)&&a[l]==null&&delete s[l]},Ae=P_;function m_(e){return g_(e)}function g_(e,t){const n=io();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:m,setScopeId:g=We,insertStaticContent:b}=e,V=(y,E,S,N=null,L=null,M=null,Q=void 0,H=null,j=!!E.dynamicChildren)=>{if(y===E)return;y&&!as(y,E)&&(N=k(y),Lt(y,L,M,!0),y=null),E.patchFlag===-2&&(j=!1,E.dynamicChildren=null);const{type:B,ref:nt,shapeFlag:W}=E;switch(B){case ho:O(y,E,S,N);break;case Mn:q(y,E,S,N);break;case Zo:y==null&&$(E,S,N,Q);break;case Re:P(y,E,S,N,L,M,Q,H,j);break;default:W&1?ft(y,E,S,N,L,M,Q,H,j):W&6?T(y,E,S,N,L,M,Q,H,j):(W&64||W&128)&&B.process(y,E,S,N,L,M,Q,H,j,Z)}nt!=null&&L&&Fi(nt,y&&y.ref,M,E||y,!E)},O=(y,E,S,N)=>{if(y==null)r(E.el=l(E.children),S,N);else{const L=E.el=y.el;E.children!==y.children&&h(L,E.children)}},q=(y,E,S,N)=>{y==null?r(E.el=c(E.children||""),S,N):E.el=y.el},$=(y,E,S,N)=>{[y.el,y.anchor]=b(y.children,E,S,N,y.el,y.anchor)},z=({el:y,anchor:E},S,N)=>{let L;for(;y&&y!==E;)L=m(y),r(y,S,N),y=L;r(E,S,N)},G=({el:y,anchor:E})=>{let S;for(;y&&y!==E;)S=m(y),s(y),y=S;s(E)},ft=(y,E,S,N,L,M,Q,H,j)=>{E.type==="svg"?Q="svg":E.type==="math"&&(Q="mathml"),y==null?gt(E,S,N,L,M,Q,H,j):w(y,E,L,M,Q,H,j)},gt=(y,E,S,N,L,M,Q,H)=>{let j,B;const{props:nt,shapeFlag:W,transition:et,dirs:it}=y;if(j=y.el=a(y.type,M,nt&&nt.is,nt),W&8?d(j,y.children):W&16&&v(y.children,j,null,N,L,Jo(y,M),Q,H),it&&zn(y,null,N,"created"),I(j,y,y.scopeId,Q,N),nt){for(const ht in nt)ht!=="value"&&!ms(ht)&&i(j,ht,null,nt[ht],M,N);"value"in nt&&i(j,"value",null,nt.value,M),(B=nt.onVnodeBeforeMount)&&Ke(B,N,y)}it&&zn(y,null,N,"beforeMount");const st=__(L,et);st&&et.beforeEnter(j),r(j,E,S),((B=nt&&nt.onVnodeMounted)||st||it)&&Ae(()=>{B&&Ke(B,N,y),st&&et.enter(j),it&&zn(y,null,N,"mounted")},L)},I=(y,E,S,N,L)=>{if(S&&g(y,S),N)for(let M=0;M<N.length;M++)g(y,N[M]);if(L){let M=L.subTree;if(E===M||Jf(M.type)&&(M.ssContent===E||M.ssFallback===E)){const Q=L.vnode;I(y,Q,Q.scopeId,Q.slotScopeIds,L.parent)}}},v=(y,E,S,N,L,M,Q,H,j=0)=>{for(let B=j;B<y.length;B++){const nt=y[B]=H?Sn(y[B]):Ge(y[B]);V(null,nt,E,S,N,L,M,Q,H)}},w=(y,E,S,N,L,M,Q)=>{const H=E.el=y.el;let{patchFlag:j,dynamicChildren:B,dirs:nt}=E;j|=y.patchFlag&16;const W=y.props||xt,et=E.props||xt;let it;if(S&&Gn(S,!1),(it=et.onVnodeBeforeUpdate)&&Ke(it,S,E,y),nt&&zn(E,y,S,"beforeUpdate"),S&&Gn(S,!0),(W.innerHTML&&et.innerHTML==null||W.textContent&&et.textContent==null)&&d(H,""),B?A(y.dynamicChildren,B,H,S,N,Jo(E,L),M):Q||dt(y,E,H,null,S,N,Jo(E,L),M,!1),j>0){if(j&16)R(H,W,et,S,L);else if(j&2&&W.class!==et.class&&i(H,"class",null,et.class,L),j&4&&i(H,"style",W.style,et.style,L),j&8){const st=E.dynamicProps;for(let ht=0;ht<st.length;ht++){const yt=st[ht],re=W[yt],Wt=et[yt];(Wt!==re||yt==="value")&&i(H,yt,re,Wt,L,S)}}j&1&&y.children!==E.children&&d(H,E.children)}else!Q&&B==null&&R(H,W,et,S,L);((it=et.onVnodeUpdated)||nt)&&Ae(()=>{it&&Ke(it,S,E,y),nt&&zn(E,y,S,"updated")},N)},A=(y,E,S,N,L,M,Q)=>{for(let H=0;H<E.length;H++){const j=y[H],B=E[H],nt=j.el&&(j.type===Re||!as(j,B)||j.shapeFlag&198)?p(j.el):S;V(j,B,nt,null,N,L,M,Q,!0)}},R=(y,E,S,N,L)=>{if(E!==S){if(E!==xt)for(const M in E)!ms(M)&&!(M in S)&&i(y,M,E[M],null,L,N);for(const M in S){if(ms(M))continue;const Q=S[M],H=E[M];Q!==H&&M!=="value"&&i(y,M,H,Q,L,N)}"value"in S&&i(y,"value",E.value,S.value,L)}},P=(y,E,S,N,L,M,Q,H,j)=>{const B=E.el=y?y.el:l(""),nt=E.anchor=y?y.anchor:l("");let{patchFlag:W,dynamicChildren:et,slotScopeIds:it}=E;it&&(H=H?H.concat(it):it),y==null?(r(B,S,N),r(nt,S,N),v(E.children||[],S,nt,L,M,Q,H,j)):W>0&&W&64&&et&&y.dynamicChildren?(A(y.dynamicChildren,et,S,L,M,Q,H),(E.key!=null||L&&E===L.subTree)&&Gf(y,E,!0)):dt(y,E,S,nt,L,M,Q,H,j)},T=(y,E,S,N,L,M,Q,H,j)=>{E.slotScopeIds=H,y==null?E.shapeFlag&512?L.ctx.activate(E,S,N,Q,j):pe(E,S,N,L,M,Q,j):Ve(y,E,j)},pe=(y,E,S,N,L,M,Q)=>{const H=y.component=M_(y,N,L);if(Of(y)&&(H.ctx.renderer=Z),L_(H,!1,Q),H.asyncDep){if(L&&L.registerDep(H,jt,Q),!y.el){const j=H.subTree=te(Mn);q(null,j,E,S)}}else jt(H,y,E,S,L,M,Q)},Ve=(y,E,S)=>{const N=E.component=y.component;if(R_(y,E,S))if(N.asyncDep&&!N.asyncResolved){_t(N,E,S);return}else N.next=E,N.update();else E.el=y.el,N.vnode=E},jt=(y,E,S,N,L,M,Q)=>{const H=()=>{if(y.isMounted){let{next:W,bu:et,u:it,parent:st,vnode:ht}=y;{const se=Wf(y);if(se){W&&(W.el=ht.el,_t(y,W,Q)),se.asyncDep.then(()=>{y.isUnmounted||H()});return}}let yt=W,re;Gn(y,!1),W?(W.el=ht.el,_t(y,W,Q)):W=ht,et&&Ai(et),(re=W.props&&W.props.onVnodeBeforeUpdate)&&Ke(re,st,W,ht),Gn(y,!0);const Wt=lu(y),Oe=y.subTree;y.subTree=Wt,V(Oe,Wt,p(Oe.el),k(Oe),y,L,M),W.el=Wt.el,yt===null&&S_(y,Wt.el),it&&Ae(it,L),(re=W.props&&W.props.onVnodeUpdated)&&Ae(()=>Ke(re,st,W,ht),L)}else{let W;const{el:et,props:it}=E,{bm:st,m:ht,parent:yt,root:re,type:Wt}=y,Oe=ys(E);Gn(y,!1),st&&Ai(st),!Oe&&(W=it&&it.onVnodeBeforeMount)&&Ke(W,yt,E),Gn(y,!0);{re.ce&&re.ce._injectChildStyle(Wt);const se=y.subTree=lu(y);V(null,se,S,N,y,L,M),E.el=se.el}if(ht&&Ae(ht,L),!Oe&&(W=it&&it.onVnodeMounted)){const se=E;Ae(()=>Ke(W,yt,se),L)}(E.shapeFlag&256||yt&&ys(yt.vnode)&&yt.vnode.shapeFlag&256)&&y.a&&Ae(y.a,L),y.isMounted=!0,E=S=N=null}};y.scope.on();const j=y.effect=new af(H);y.scope.off();const B=y.update=j.run.bind(j),nt=y.job=j.runIfDirty.bind(j);nt.i=y,nt.id=y.uid,j.scheduler=()=>cl(nt),Gn(y,!0),B()},_t=(y,E,S)=>{E.component=y;const N=y.vnode.props;y.vnode=E,y.next=null,u_(y,E.props,N,S),p_(y,E.children,S),fn(),tu(y),dn()},dt=(y,E,S,N,L,M,Q,H,j=!1)=>{const B=y&&y.children,nt=y?y.shapeFlag:0,W=E.children,{patchFlag:et,shapeFlag:it}=E;if(et>0){if(et&128){Fe(B,W,S,N,L,M,Q,H,j);return}else if(et&256){we(B,W,S,N,L,M,Q,H,j);return}}it&8?(nt&16&&ve(B,L,M),W!==B&&d(S,W)):nt&16?it&16?Fe(B,W,S,N,L,M,Q,H,j):ve(B,L,M,!0):(nt&8&&d(S,""),it&16&&v(W,S,N,L,M,Q,H,j))},we=(y,E,S,N,L,M,Q,H,j)=>{y=y||Ir,E=E||Ir;const B=y.length,nt=E.length,W=Math.min(B,nt);let et;for(et=0;et<W;et++){const it=E[et]=j?Sn(E[et]):Ge(E[et]);V(y[et],it,S,null,L,M,Q,H,j)}B>nt?ve(y,L,M,!0,!1,W):v(E,S,N,L,M,Q,H,j,W)},Fe=(y,E,S,N,L,M,Q,H,j)=>{let B=0;const nt=E.length;let W=y.length-1,et=nt-1;for(;B<=W&&B<=et;){const it=y[B],st=E[B]=j?Sn(E[B]):Ge(E[B]);if(as(it,st))V(it,st,S,null,L,M,Q,H,j);else break;B++}for(;B<=W&&B<=et;){const it=y[W],st=E[et]=j?Sn(E[et]):Ge(E[et]);if(as(it,st))V(it,st,S,null,L,M,Q,H,j);else break;W--,et--}if(B>W){if(B<=et){const it=et+1,st=it<nt?E[it].el:N;for(;B<=et;)V(null,E[B]=j?Sn(E[B]):Ge(E[B]),S,st,L,M,Q,H,j),B++}}else if(B>et)for(;B<=W;)Lt(y[B],L,M,!0),B++;else{const it=B,st=B,ht=new Map;for(B=st;B<=et;B++){const Qt=E[B]=j?Sn(E[B]):Ge(E[B]);Qt.key!=null&&ht.set(Qt.key,B)}let yt,re=0;const Wt=et-st+1;let Oe=!1,se=0;const Tn=new Array(Wt);for(B=0;B<Wt;B++)Tn[B]=0;for(B=it;B<=W;B++){const Qt=y[B];if(re>=Wt){Lt(Qt,L,M,!0);continue}let ke;if(Qt.key!=null)ke=ht.get(Qt.key);else for(yt=st;yt<=et;yt++)if(Tn[yt-st]===0&&as(Qt,E[yt])){ke=yt;break}ke===void 0?Lt(Qt,L,M,!0):(Tn[ke-st]=B+1,ke>=se?se=ke:Oe=!0,V(Qt,E[ke],S,null,L,M,Q,H,j),re++)}const Gr=Oe?y_(Tn):Ir;for(yt=Gr.length-1,B=Wt-1;B>=0;B--){const Qt=st+B,ke=E[Qt],ei=Qt+1<nt?E[Qt+1].el:N;Tn[B]===0?V(null,ke,S,ei,L,M,Q,H,j):Oe&&(yt<0||B!==Gr[yt]?De(ke,S,ei,2):yt--)}}},De=(y,E,S,N,L=null)=>{const{el:M,type:Q,transition:H,children:j,shapeFlag:B}=y;if(B&6){De(y.component.subTree,E,S,N);return}if(B&128){y.suspense.move(E,S,N);return}if(B&64){Q.move(y,E,S,Z);return}if(Q===Re){r(M,E,S);for(let W=0;W<j.length;W++)De(j[W],E,S,N);r(y.anchor,E,S);return}if(Q===Zo){z(y,E,S);return}if(N!==2&&B&1&&H)if(N===0)H.beforeEnter(M),r(M,E,S),Ae(()=>H.enter(M),L);else{const{leave:W,delayLeave:et,afterLeave:it}=H,st=()=>{y.ctx.isUnmounted?s(M):r(M,E,S)},ht=()=>{W(M,()=>{st(),it&&it()})};et?et(M,st,ht):ht()}else r(M,E,S)},Lt=(y,E,S,N=!1,L=!1)=>{const{type:M,props:Q,ref:H,children:j,dynamicChildren:B,shapeFlag:nt,patchFlag:W,dirs:et,cacheIndex:it}=y;if(W===-2&&(L=!1),H!=null&&(fn(),Fi(H,null,S,y,!0),dn()),it!=null&&(E.renderCache[it]=void 0),nt&256){E.ctx.deactivate(y);return}const st=nt&1&&et,ht=!ys(y);let yt;if(ht&&(yt=Q&&Q.onVnodeBeforeUnmount)&&Ke(yt,E,y),nt&6)He(y.component,S,N);else{if(nt&128){y.suspense.unmount(S,N);return}st&&zn(y,null,E,"beforeUnmount"),nt&64?y.type.remove(y,E,S,Z,N):B&&!B.hasOnce&&(M!==Re||W>0&&W&64)?ve(B,E,S,!1,!0):(M===Re&&W&384||!L&&nt&16)&&ve(j,E,S),N&&Ft(y)}(ht&&(yt=Q&&Q.onVnodeUnmounted)||st)&&Ae(()=>{yt&&Ke(yt,E,y),st&&zn(y,null,E,"unmounted")},S)},Ft=y=>{const{type:E,el:S,anchor:N,transition:L}=y;if(E===Re){En(S,N);return}if(E===Zo){G(y);return}const M=()=>{s(S),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(y.shapeFlag&1&&L&&!L.persisted){const{leave:Q,delayLeave:H}=L,j=()=>Q(S,M);H?H(y.el,M,j):j()}else M()},En=(y,E)=>{let S;for(;y!==E;)S=m(y),s(y),y=S;s(E)},He=(y,E,S)=>{const{bum:N,scope:L,job:M,subTree:Q,um:H,m:j,a:B,parent:nt,slots:{__:W}}=y;au(j),au(B),N&&Ai(N),nt&&ot(W)&&W.forEach(et=>{nt.renderCache[et]=void 0}),L.stop(),M&&(M.flags|=8,Lt(Q,y,E,S)),H&&Ae(H,E),Ae(()=>{y.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},ve=(y,E,S,N=!1,L=!1,M=0)=>{for(let Q=M;Q<y.length;Q++)Lt(y[Q],E,S,N,L)},k=y=>{if(y.shapeFlag&6)return k(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const E=m(y.anchor||y.el),S=E&&E[Fg];return S?m(S):E};let X=!1;const Y=(y,E,S)=>{y==null?E._vnode&&Lt(E._vnode,null,null,!0):V(E._vnode||null,y,E,null,null,null,S),E._vnode=y,X||(X=!0,tu(),Pf(),X=!1)},Z={p:V,um:Lt,m:De,r:Ft,mt:pe,mc:v,pc:dt,pbc:A,n:k,o:e};return{render:Y,hydrate:void 0,createApp:l_(Y)}}function Jo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Gn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function __(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Gf(e,t,n=!1){const r=e.children,s=t.children;if(ot(r)&&ot(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=Sn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Gf(a,l)),l.type===ho&&(l.el=a.el),l.type===Mn&&!l.el&&(l.el=a.el)}}function y_(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const h=e[r];if(h!==0){if(s=n[n.length-1],e[s]<h){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<h?i=l+1:a=l;h<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Wf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Wf(t)}function au(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const v_=Symbol.for("v-scx"),E_=()=>Qe(v_);function Cr(e,t,n){return Qf(e,t,n)}function Qf(e,t,n=xt){const{immediate:r,deep:s,flush:i,once:a}=n,l=de({},n),c=t&&r||!t&&i!=="post";let h;if(Os){if(i==="sync"){const g=E_();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=We,g.resume=We,g.pause=We,g}}const d=he;l.call=(g,b,V)=>tn(g,d,b,V);let p=!1;i==="post"?l.scheduler=g=>{Ae(g,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(g,b)=>{b?g():cl(g)}),l.augmentJob=g=>{t&&(g.flags|=4),p&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const m=Og(e,t,l);return Os&&(h?h.push(m):c&&m()),m}function T_(e,t,n){const r=this.proxy,s=Kt(e)?e.includes(".")?Yf(r,e):()=>r[e]:e.bind(r,r);let i;ut(t)?i=t:(i=t.handler,n=t);const a=Gs(this),l=Qf(s,i.bind(r),n);return a(),l}function Yf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const w_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Le(t)}Modifiers`]||e[`${lr(t)}Modifiers`];function I_(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||xt;let s=n;const i=t.startsWith("update:"),a=i&&w_(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Kt(d)?d.trim():d)),a.number&&(s=n.map(ga)));let l,c=r[l=Ko(t)]||r[l=Ko(Le(t))];!c&&i&&(c=r[l=Ko(lr(t))]),c&&tn(c,e,6,s);const h=r[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,tn(h,e,6,s)}}function Xf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!ut(e)){const c=h=>{const d=Xf(h,t,!0);d&&(l=!0,de(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Ot(e)&&r.set(e,null),null):(ot(i)?i.forEach(c=>a[c]=null):de(a,i),Ot(e)&&r.set(e,a),a)}function uo(e,t){return!e||!no(t)?!1:(t=t.slice(2).replace(/Once$/,""),Rt(e,t[0].toLowerCase()+t.slice(1))||Rt(e,lr(t))||Rt(e,t))}function lu(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:p,data:m,setupState:g,ctx:b,inheritAttrs:V}=e,O=Li(e);let q,$;try{if(n.shapeFlag&4){const G=s||r,ft=G;q=Ge(h.call(ft,G,d,p,g,m,b)),$=l}else{const G=t;q=Ge(G.length>1?G(p,{attrs:l,slots:a,emit:c}):G(p,null)),$=t.props?l:A_(l)}}catch(G){Es.length=0,lo(G,e,1),q=te(Mn)}let z=q;if($&&V!==!1){const G=Object.keys($),{shapeFlag:ft}=z;G.length&&ft&7&&(i&&G.some(Ja)&&($=b_($,i)),z=Dr(z,$,!1,!0))}return n.dirs&&(z=Dr(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&ul(z,n.transition),q=z,Li(O),q}const A_=e=>{let t;for(const n in e)(n==="class"||n==="style"||no(n))&&((t||(t={}))[n]=e[n]);return t},b_=(e,t)=>{const n={};for(const r in e)(!Ja(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function R_(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?cu(r,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(a[m]!==r[m]&&!uo(h,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?cu(r,a,h):!0:!!a;return!1}function cu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!uo(n,i))return!0}return!1}function S_({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Jf=e=>e.__isSuspense;function P_(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):Mg(e)}const Re=Symbol.for("v-fgt"),ho=Symbol.for("v-txt"),Mn=Symbol.for("v-cmt"),Zo=Symbol.for("v-stc"),Es=[];let Pe=null;function Dt(e=!1){Es.push(Pe=e?null:[])}function C_(){Es.pop(),Pe=Es[Es.length-1]||null}let Ds=1;function uu(e,t=!1){Ds+=e,e<0&&Pe&&t&&(Pe.hasOnce=!0)}function Zf(e){return e.dynamicChildren=Ds>0?Pe||Ir:null,C_(),Ds>0&&Pe&&Pe.push(e),e}function Nt(e,t,n,r,s,i){return Zf(D(e,t,n,r,s,i,!0))}function x_(e,t,n,r,s){return Zf(te(e,t,n,r,s,!0))}function Bi(e){return e?e.__v_isVNode===!0:!1}function as(e,t){return e.type===t.type&&e.key===t.key}const td=({key:e})=>e??null,Ri=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Kt(e)||fe(e)||ut(e)?{i:Se,r:e,k:t,f:!!n}:e:null);function D(e,t=null,n=null,r=0,s=null,i=e===Re?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&td(t),ref:t&&Ri(t),scopeId:xf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Se};return l?(pl(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Kt(n)?8:16),Ds>0&&!a&&Pe&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Pe.push(c),c}const te=V_;function V_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Zg)&&(e=Mn),Bi(e)){const l=Dr(e,t,!0);return n&&pl(l,n),Ds>0&&!i&&Pe&&(l.shapeFlag&6?Pe[Pe.indexOf(e)]=l:Pe.push(l)),l.patchFlag=-2,l}if(j_(e)&&(e=e.__vccOpts),t){t=D_(t);let{class:l,style:c}=t;l&&!Kt(l)&&(t.class=be(l)),Ot(c)&&(ll(c)&&!ot(c)&&(c=de({},c)),t.style=el(c))}const a=Kt(e)?1:Jf(e)?128:Ug(e)?64:Ot(e)?4:ut(e)?2:0;return D(e,t,n,r,s,a,i,!0)}function D_(e){return e?ll(e)||$f(e)?de({},e):e:null}function Dr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,h=t?O_(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&td(h),ref:t&&t.ref?n&&i?ot(i)?i.concat(Ri(t)):[i,Ri(t)]:Ri(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Re?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dr(e.ssContent),ssFallback:e.ssFallback&&Dr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&ul(d,c.clone(d)),d}function ed(e=" ",t=0){return te(ho,null,e,t)}function Cn(e="",t=!1){return t?(Dt(),x_(Mn,null,e)):te(Mn,null,e)}function Ge(e){return e==null||typeof e=="boolean"?te(Mn):ot(e)?te(Re,null,e.slice()):Bi(e)?Sn(e):te(ho,null,String(e))}function Sn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dr(e)}function pl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ot(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),pl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!$f(t)?t._ctx=Se:s===3&&Se&&(Se.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ut(t)?(t={default:t,_ctx:Se},n=32):(t=String(t),r&64?(n=16,t=[ed(t)]):n=8);e.children=t,e.shapeFlag|=n}function O_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=be([t.class,r.class]));else if(s==="style")t.style=el([t.style,r.style]);else if(no(s)){const i=t[s],a=r[s];a&&i!==a&&!(ot(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Ke(e,t,n,r=null){tn(e,t,7,[n,r])}const k_=Ff();let N_=0;function M_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||k_,i={uid:N_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new og(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qf(r,s),emitsOptions:Xf(r,s),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:r.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=I_.bind(null,i),e.ce&&e.ce(i),i}let he=null,$i,ba;{const e=io(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};$i=t("__VUE_INSTANCE_SETTERS__",n=>he=n),ba=t("__VUE_SSR_SETTERS__",n=>Os=n)}const Gs=e=>{const t=he;return $i(e),e.scope.on(),()=>{e.scope.off(),$i(t)}},hu=()=>{he&&he.scope.off(),$i(null)};function nd(e){return e.vnode.shapeFlag&4}let Os=!1;function L_(e,t=!1,n=!1){t&&ba(t);const{props:r,children:s}=e.vnode,i=nd(e);c_(e,r,i,t),d_(e,s,n||t);const a=i?F_(e,t):void 0;return t&&ba(!1),a}function F_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,e_);const{setup:r}=n;if(r){fn();const s=e.setupContext=r.length>1?B_(e):null,i=Gs(e),a=zs(r,e,0,[e.props,s]),l=Zh(a);if(dn(),i(),(l||e.sp)&&!ys(e)&&Df(e),l){if(a.then(hu,hu),t)return a.then(c=>{fu(e,c)}).catch(c=>{lo(c,e,0)});e.asyncDep=a}else fu(e,a)}else rd(e)}function fu(e,t,n){ut(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ot(t)&&(e.setupState=Af(t)),rd(e)}function rd(e,t,n){const r=e.type;e.render||(e.render=r.render||We);{const s=Gs(e);fn();try{n_(e)}finally{dn(),s()}}}const U_={get(e,t){return ce(e,"get",""),e[t]}};function B_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,U_),slots:e.slots,emit:e.emit,expose:t}}function fo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Af(Rg(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vs)return vs[n](e)},has(t,n){return n in t||n in vs}})):e.proxy}function $_(e,t=!0){return ut(e)?e.displayName||e.name:e.name||t&&e.__name}function j_(e){return ut(e)&&"__vccOpts"in e}const Ct=(e,t)=>Vg(e,t,Os);function sd(e,t,n){const r=arguments.length;return r===2?Ot(t)&&!ot(t)?Bi(t)?te(e,null,[t]):te(e,t):te(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bi(n)&&(n=[n]),te(e,t,n))}const q_="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ra;const du=typeof window<"u"&&window.trustedTypes;if(du)try{Ra=du.createPolicy("vue",{createHTML:e=>e})}catch{}const id=Ra?e=>Ra.createHTML(e):e=>e,H_="http://www.w3.org/2000/svg",K_="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,pu=ln&&ln.createElement("template"),z_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?ln.createElementNS(H_,e):t==="mathml"?ln.createElementNS(K_,e):n?ln.createElement(e,{is:n}):ln.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>ln.createTextNode(e),createComment:e=>ln.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ln.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{pu.innerHTML=id(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=pu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},G_=Symbol("_vtc");function W_(e,t,n){const r=e[G_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const mu=Symbol("_vod"),Q_=Symbol("_vsh"),Y_=Symbol(""),X_=/(^|;)\s*display\s*:/;function J_(e,t,n){const r=e.style,s=Kt(n);let i=!1;if(n&&!s){if(t)if(Kt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Si(r,l,"")}else for(const a in t)n[a]==null&&Si(r,a,"");for(const a in n)a==="display"&&(i=!0),Si(r,a,n[a])}else if(s){if(t!==n){const a=r[Y_];a&&(n+=";"+a),r.cssText=n,i=X_.test(n)}}else t&&e.removeAttribute("style");mu in e&&(e[mu]=i?r.display:"",e[Q_]&&(r.display="none"))}const gu=/\s*!important$/;function Si(e,t,n){if(ot(n))n.forEach(r=>Si(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Z_(e,t);gu.test(n)?e.setProperty(lr(r),n.replace(gu,""),"important"):e[r]=n}}const _u=["Webkit","Moz","ms"],ta={};function Z_(e,t){const n=ta[t];if(n)return n;let r=Le(t);if(r!=="filter"&&r in e)return ta[t]=r;r=so(r);for(let s=0;s<_u.length;s++){const i=_u[s]+r;if(i in e)return ta[t]=i}return t}const yu="http://www.w3.org/1999/xlink";function vu(e,t,n,r,s,i=sg(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(yu,t.slice(6,t.length)):e.setAttributeNS(yu,t,n):n==null||i&&!rf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Ze(n)?String(n):n)}function Eu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?id(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=rf(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Yn(e,t,n,r){e.addEventListener(t,n,r)}function ty(e,t,n,r){e.removeEventListener(t,n,r)}const Tu=Symbol("_vei");function ey(e,t,n,r,s=null){const i=e[Tu]||(e[Tu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=ny(t);if(r){const h=i[t]=iy(r,s);Yn(e,l,h,c)}else a&&(ty(e,l,a,c),i[t]=void 0)}}const wu=/(?:Once|Passive|Capture)$/;function ny(e){let t;if(wu.test(e)){t={};let r;for(;r=e.match(wu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):lr(e.slice(2)),t]}let ea=0;const ry=Promise.resolve(),sy=()=>ea||(ry.then(()=>ea=0),ea=Date.now());function iy(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;tn(oy(r,n.value),t,5,[r])};return n.value=e,n.attached=sy(),n}function oy(e,t){if(ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Iu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ay=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?W_(e,r,a):t==="style"?J_(e,n,r):no(t)?Ja(t)||ey(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ly(e,t,r,a))?(Eu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&vu(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Kt(r))?Eu(e,Le(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),vu(e,t,r,a))};function ly(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Iu(t)&&ut(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Iu(t)&&Kt(n)?!1:t in e}const ji=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?n=>Ai(t,n):t};function cy(e){e.target.composing=!0}function Au(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xr=Symbol("_assign"),Xn={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[xr]=ji(s);const i=r||s.props&&s.props.type==="number";Yn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=ga(l)),e[xr](l)}),n&&Yn(e,"change",()=>{e.value=e.value.trim()}),t||(Yn(e,"compositionstart",cy),Yn(e,"compositionend",Au),Yn(e,"change",Au))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[xr]=ji(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?ga(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},bu={created(e,{value:t},n){e.checked=Oi(t,n.props.value),e[xr]=ji(n),Yn(e,"change",()=>{e[xr](uy(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[xr]=ji(r),t!==n&&(e.checked=Oi(t,r.props.value))}};function uy(e){return"_value"in e?e._value:e.value}const hy=["ctrl","shift","alt","meta"],fy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>hy.some(n=>e[`${n}Key`]&&!t.includes(n))},od=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let a=0;a<t.length;a++){const l=fy[t[a]];if(l&&l(s,t))return}return e(s,...i)})},dy=de({patchProp:ay},z_);let Ru;function py(){return Ru||(Ru=m_(dy))}const my=(...e)=>{const t=py().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=_y(r);if(!s)return;const i=t._component;!ut(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,gy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function gy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function _y(e){return Kt(e)?document.querySelector(e):e}const yy={id:"app",class:"min-h-screen bg-gray-50"},vy={__name:"App",setup(e){return(t,n)=>{const r=Jg("router-view");return Dt(),Nt("div",yy,[te(r)])}}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const vr=typeof document<"u";function ad(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ey(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ad(e.default)}const At=Object.assign;function na(e,t){const n={};for(const r in t){const s=t[r];n[r]=je(s)?s.map(e):e(s)}return n}const Ts=()=>{},je=Array.isArray,ld=/#/g,Ty=/&/g,wy=/\//g,Iy=/=/g,Ay=/\?/g,cd=/\+/g,by=/%5B/g,Ry=/%5D/g,ud=/%5E/g,Sy=/%60/g,hd=/%7B/g,Py=/%7C/g,fd=/%7D/g,Cy=/%20/g;function ml(e){return encodeURI(""+e).replace(Py,"|").replace(by,"[").replace(Ry,"]")}function xy(e){return ml(e).replace(hd,"{").replace(fd,"}").replace(ud,"^")}function Sa(e){return ml(e).replace(cd,"%2B").replace(Cy,"+").replace(ld,"%23").replace(Ty,"%26").replace(Sy,"`").replace(hd,"{").replace(fd,"}").replace(ud,"^")}function Vy(e){return Sa(e).replace(Iy,"%3D")}function Dy(e){return ml(e).replace(ld,"%23").replace(Ay,"%3F")}function Oy(e){return e==null?"":Dy(e).replace(wy,"%2F")}function ks(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ky=/\/$/,Ny=e=>e.replace(ky,"");function ra(e,t,n="/"){let r,s={},i="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),s=e(i)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=Uy(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:ks(a)}}function My(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Su(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ly(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Or(t.matched[r],n.matched[s])&&dd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Or(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function dd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Fy(e[n],t[n]))return!1;return!0}function Fy(e,t){return je(e)?Pu(e,t):je(t)?Pu(t,e):e===t}function Pu(e,t){return je(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Uy(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const bn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ns;(function(e){e.pop="pop",e.push="push"})(Ns||(Ns={}));var ws;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ws||(ws={}));function By(e){if(!e)if(vr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Ny(e)}const $y=/^[^#]+#/;function jy(e,t){return e.replace($y,"#")+t}function qy(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const po=()=>({left:window.scrollX,top:window.scrollY});function Hy(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=qy(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Cu(e,t){return(history.state?history.state.position-t:-1)+e}const Pa=new Map;function Ky(e,t){Pa.set(e,t)}function zy(e){const t=Pa.get(e);return Pa.delete(e),t}let Gy=()=>location.protocol+"//"+location.host;function pd(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let l=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),Su(c,"")}return Su(n,e)+r+s}function Wy(e,t,n,r){let s=[],i=[],a=null;const l=({state:m})=>{const g=pd(e,location),b=n.value,V=t.value;let O=0;if(m){if(n.value=g,t.value=m,a&&a===b){a=null;return}O=V?m.position-V.position:0}else r(g);s.forEach(q=>{q(n.value,b,{delta:O,type:Ns.pop,direction:O?O>0?ws.forward:ws.back:ws.unknown})})};function c(){a=n.value}function h(m){s.push(m);const g=()=>{const b=s.indexOf(m);b>-1&&s.splice(b,1)};return i.push(g),g}function d(){const{history:m}=window;m.state&&m.replaceState(At({},m.state,{scroll:po()}),"")}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:h,destroy:p}}function xu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?po():null}}function Qy(e){const{history:t,location:n}=window,r={value:pd(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=e.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+c:Gy()+e+c;try{t[d?"replaceState":"pushState"](h,"",m),s.value=h}catch(g){console.error(g),n[d?"replace":"assign"](m)}}function a(c,h){const d=At({},t.state,xu(s.value.back,c,s.value.forward,!0),h,{position:s.value.position});i(c,d,!0),r.value=c}function l(c,h){const d=At({},s.value,t.state,{forward:c,scroll:po()});i(d.current,d,!0);const p=At({},xu(r.value,c,null),{position:d.position+1},h);i(c,p,!1),r.value=c}return{location:r,state:s,push:l,replace:a}}function Yy(e){e=By(e);const t=Qy(e),n=Wy(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=At({location:"",base:e,go:r,createHref:jy.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Xy(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Yy(e)}function Jy(e){return typeof e=="string"||e&&typeof e=="object"}function md(e){return typeof e=="string"||typeof e=="symbol"}const gd=Symbol("");var Vu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Vu||(Vu={}));function kr(e,t){return At(new Error,{type:e,[gd]:!0},t)}function on(e,t){return e instanceof Error&&gd in e&&(t==null||!!(e.type&t))}const Du="[^/]+?",Zy={sensitive:!1,strict:!1,start:!0,end:!0},tv=/[.+*?^${}()[\]/\\]/g;function ev(e,t){const n=At({},Zy,t),r=[];let s=n.start?"^":"";const i=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const m=h[p];let g=40+(n.sensitive?.25:0);if(m.type===0)p||(s+="/"),s+=m.value.replace(tv,"\\$&"),g+=40;else if(m.type===1){const{value:b,repeatable:V,optional:O,regexp:q}=m;i.push({name:b,repeatable:V,optional:O});const $=q||Du;if($!==Du){g+=10;try{new RegExp(`(${$})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${b}" (${$}): `+G.message)}}let z=V?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;p||(z=O&&h.length<2?`(?:/${z})`:"/"+z),O&&(z+="?"),s+=z,g+=20,O&&(g+=-8),V&&(g+=-20),$===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(h){const d=h.match(a),p={};if(!d)return null;for(let m=1;m<d.length;m++){const g=d[m]||"",b=i[m-1];p[b.name]=g&&b.repeatable?g.split("/"):g}return p}function c(h){let d="",p=!1;for(const m of e){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const g of m)if(g.type===0)d+=g.value;else if(g.type===1){const{value:b,repeatable:V,optional:O}=g,q=b in h?h[b]:"";if(je(q)&&!V)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const $=je(q)?q.join("/"):q;if(!$)if(O)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${b}"`);d+=$}}return d||"/"}return{re:a,score:r,keys:i,parse:l,stringify:c}}function nv(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function _d(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=nv(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Ou(r))return 1;if(Ou(s))return-1}return s.length-r.length}function Ou(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const rv={type:0,value:""},sv=/[a-zA-Z0-9_]/;function iv(e){if(!e)return[[]];if(e==="/")return[[rv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${h}": ${g}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(h&&p(),a()):c===":"?(p(),n=1):m();break;case 4:m(),n=r;break;case 1:c==="("?n=2:sv.test(c)?m():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}function ov(e,t,n){const r=ev(iv(e.path),n),s=At(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function av(e,t){const n=[],r=new Map;t=Lu({strict:!1,end:!0,sensitive:!1},t);function s(p){return r.get(p)}function i(p,m,g){const b=!g,V=Nu(p);V.aliasOf=g&&g.record;const O=Lu(t,p),q=[V];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const ft of G)q.push(Nu(At({},V,{components:g?g.record.components:V.components,path:ft,aliasOf:g?g.record:V})))}let $,z;for(const G of q){const{path:ft}=G;if(m&&ft[0]!=="/"){const gt=m.record.path,I=gt[gt.length-1]==="/"?"":"/";G.path=m.record.path+(ft&&I+ft)}if($=ov(G,m,O),g?g.alias.push($):(z=z||$,z!==$&&z.alias.push($),b&&p.name&&!Mu($)&&a(p.name)),yd($)&&c($),V.children){const gt=V.children;for(let I=0;I<gt.length;I++)i(gt[I],$,g&&g.children[I])}g=g||$}return z?()=>{a(z)}:Ts}function a(p){if(md(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function c(p){const m=uv(p,n);n.splice(m,0,p),p.record.name&&!Mu(p)&&r.set(p.record.name,p)}function h(p,m){let g,b={},V,O;if("name"in p&&p.name){if(g=r.get(p.name),!g)throw kr(1,{location:p});O=g.record.name,b=At(ku(m.params,g.keys.filter(z=>!z.optional).concat(g.parent?g.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&ku(p.params,g.keys.map(z=>z.name))),V=g.stringify(b)}else if(p.path!=null)V=p.path,g=n.find(z=>z.re.test(V)),g&&(b=g.parse(V),O=g.record.name);else{if(g=m.name?r.get(m.name):n.find(z=>z.re.test(m.path)),!g)throw kr(1,{location:p,currentLocation:m});O=g.record.name,b=At({},m.params,p.params),V=g.stringify(b)}const q=[];let $=g;for(;$;)q.unshift($.record),$=$.parent;return{name:O,path:V,params:b,matched:q,meta:cv(q)}}e.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function ku(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Nu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:lv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function lv(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Mu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function cv(e){return e.reduce((t,n)=>At(t,n.meta),{})}function Lu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function uv(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;_d(e,t[i])<0?r=i:n=i+1}const s=hv(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function hv(e){let t=e;for(;t=t.parent;)if(yd(t)&&_d(e,t)===0)return t}function yd({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function fv(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(cd," "),a=i.indexOf("="),l=ks(a<0?i:i.slice(0,a)),c=a<0?null:ks(i.slice(a+1));if(l in t){let h=t[l];je(h)||(h=t[l]=[h]),h.push(c)}else t[l]=c}return t}function Fu(e){let t="";for(let n in e){const r=e[n];if(n=Vy(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(je(r)?r.map(i=>i&&Sa(i)):[r&&Sa(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function dv(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=je(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const pv=Symbol(""),Uu=Symbol(""),mo=Symbol(""),vd=Symbol(""),Ca=Symbol("");function ls(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Pn(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const h=m=>{m===!1?c(kr(4,{from:n,to:t})):m instanceof Error?c(m):Jy(m)?c(kr(2,{from:t,to:m})):(a&&r.enterCallbacks[s]===a&&typeof m=="function"&&a.push(m),l())},d=i(()=>e.call(r&&r.instances[s],t,n,h));let p=Promise.resolve(d);e.length<3&&(p=p.then(h)),p.catch(m=>c(m))})}function sa(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(ad(c)){const d=(c.__vccOpts||c)[t];d&&i.push(Pn(d,n,r,a,l,s))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=Ey(d)?d.default:d;a.mods[l]=d,a.components[l]=p;const g=(p.__vccOpts||p)[t];return g&&Pn(g,n,r,a,l,s)()}))}}return i}function Bu(e){const t=Qe(mo),n=Qe(vd),r=Ct(()=>{const c=Rr(e.to);return t.resolve(c)}),s=Ct(()=>{const{matched:c}=r.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const m=p.findIndex(Or.bind(null,d));if(m>-1)return m;const g=$u(c[h-2]);return h>1&&$u(d)===g&&p[p.length-1].path!==g?p.findIndex(Or.bind(null,c[h-2])):m}),i=Ct(()=>s.value>-1&&vv(n.params,r.value.params)),a=Ct(()=>s.value>-1&&s.value===n.matched.length-1&&dd(n.params,r.value.params));function l(c={}){if(yv(c)){const h=t[Rr(e.replace)?"replace":"push"](Rr(e.to)).catch(Ts);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Ct(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function mv(e){return e.length===1?e[0]:e}const gv=Vf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Bu,setup(e,{slots:t}){const n=ao(Bu(e)),{options:r}=Qe(mo),s=Ct(()=>({[ju(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ju(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&mv(t.default(n));return e.custom?i:sd("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),_v=gv;function yv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function vv(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!je(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function $u(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ju=(e,t,n)=>e??t??n,Ev=Vf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Qe(Ca),s=Ct(()=>e.route||r.value),i=Qe(Uu,0),a=Ct(()=>{let h=Rr(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=Ct(()=>s.value.matched[a.value]);bi(Uu,Ct(()=>a.value+1)),bi(pv,l),bi(Ca,s);const c=ye();return Cr(()=>[c.value,l.value,e.name],([h,d,p],[m,g,b])=>{d&&(d.instances[p]=h,g&&g!==d&&h&&h===m&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),h&&d&&(!g||!Or(d,g)||!m)&&(d.enterCallbacks[p]||[]).forEach(V=>V(h))},{flush:"post"}),()=>{const h=s.value,d=e.name,p=l.value,m=p&&p.components[d];if(!m)return qu(n.default,{Component:m,route:h});const g=p.props[d],b=g?g===!0?h.params:typeof g=="function"?g(h):g:null,O=sd(m,At({},b,t,{onVnodeUnmounted:q=>{q.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return qu(n.default,{Component:O,route:h})||O}}});function qu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Tv=Ev;function wv(e){const t=av(e.routes,e),n=e.parseQuery||fv,r=e.stringifyQuery||Fu,s=e.history,i=ls(),a=ls(),l=ls(),c=Sg(bn);let h=bn;vr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=na.bind(null,k=>""+k),p=na.bind(null,Oy),m=na.bind(null,ks);function g(k,X){let Y,Z;return md(k)?(Y=t.getRecordMatcher(k),Z=X):Z=k,t.addRoute(Z,Y)}function b(k){const X=t.getRecordMatcher(k);X&&t.removeRoute(X)}function V(){return t.getRoutes().map(k=>k.record)}function O(k){return!!t.getRecordMatcher(k)}function q(k,X){if(X=At({},X||c.value),typeof k=="string"){const S=ra(n,k,X.path),N=t.resolve({path:S.path},X),L=s.createHref(S.fullPath);return At(S,N,{params:m(N.params),hash:ks(S.hash),redirectedFrom:void 0,href:L})}let Y;if(k.path!=null)Y=At({},k,{path:ra(n,k.path,X.path).path});else{const S=At({},k.params);for(const N in S)S[N]==null&&delete S[N];Y=At({},k,{params:p(S)}),X.params=p(X.params)}const Z=t.resolve(Y,X),Tt=k.hash||"";Z.params=d(m(Z.params));const y=My(r,At({},k,{hash:xy(Tt),path:Z.path})),E=s.createHref(y);return At({fullPath:y,hash:Tt,query:r===Fu?dv(k.query):k.query||{}},Z,{redirectedFrom:void 0,href:E})}function $(k){return typeof k=="string"?ra(n,k,c.value.path):At({},k)}function z(k,X){if(h!==k)return kr(8,{from:X,to:k})}function G(k){return I(k)}function ft(k){return G(At($(k),{replace:!0}))}function gt(k){const X=k.matched[k.matched.length-1];if(X&&X.redirect){const{redirect:Y}=X;let Z=typeof Y=="function"?Y(k):Y;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=$(Z):{path:Z},Z.params={}),At({query:k.query,hash:k.hash,params:Z.path!=null?{}:k.params},Z)}}function I(k,X){const Y=h=q(k),Z=c.value,Tt=k.state,y=k.force,E=k.replace===!0,S=gt(Y);if(S)return I(At($(S),{state:typeof S=="object"?At({},Tt,S.state):Tt,force:y,replace:E}),X||Y);const N=Y;N.redirectedFrom=X;let L;return!y&&Ly(r,Z,Y)&&(L=kr(16,{to:N,from:Z}),De(Z,Z,!0,!1)),(L?Promise.resolve(L):A(N,Z)).catch(M=>on(M)?on(M,2)?M:Fe(M):dt(M,N,Z)).then(M=>{if(M){if(on(M,2))return I(At({replace:E},$(M.to),{state:typeof M.to=="object"?At({},Tt,M.to.state):Tt,force:y}),X||N)}else M=P(N,Z,!0,E,Tt);return R(N,Z,M),M})}function v(k,X){const Y=z(k,X);return Y?Promise.reject(Y):Promise.resolve()}function w(k){const X=En.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(k):k()}function A(k,X){let Y;const[Z,Tt,y]=Iv(k,X);Y=sa(Z.reverse(),"beforeRouteLeave",k,X);for(const S of Z)S.leaveGuards.forEach(N=>{Y.push(Pn(N,k,X))});const E=v.bind(null,k,X);return Y.push(E),ve(Y).then(()=>{Y=[];for(const S of i.list())Y.push(Pn(S,k,X));return Y.push(E),ve(Y)}).then(()=>{Y=sa(Tt,"beforeRouteUpdate",k,X);for(const S of Tt)S.updateGuards.forEach(N=>{Y.push(Pn(N,k,X))});return Y.push(E),ve(Y)}).then(()=>{Y=[];for(const S of y)if(S.beforeEnter)if(je(S.beforeEnter))for(const N of S.beforeEnter)Y.push(Pn(N,k,X));else Y.push(Pn(S.beforeEnter,k,X));return Y.push(E),ve(Y)}).then(()=>(k.matched.forEach(S=>S.enterCallbacks={}),Y=sa(y,"beforeRouteEnter",k,X,w),Y.push(E),ve(Y))).then(()=>{Y=[];for(const S of a.list())Y.push(Pn(S,k,X));return Y.push(E),ve(Y)}).catch(S=>on(S,8)?S:Promise.reject(S))}function R(k,X,Y){l.list().forEach(Z=>w(()=>Z(k,X,Y)))}function P(k,X,Y,Z,Tt){const y=z(k,X);if(y)return y;const E=X===bn,S=vr?history.state:{};Y&&(Z||E?s.replace(k.fullPath,At({scroll:E&&S&&S.scroll},Tt)):s.push(k.fullPath,Tt)),c.value=k,De(k,X,Y,E),Fe()}let T;function pe(){T||(T=s.listen((k,X,Y)=>{if(!He.listening)return;const Z=q(k),Tt=gt(Z);if(Tt){I(At(Tt,{replace:!0,force:!0}),Z).catch(Ts);return}h=Z;const y=c.value;vr&&Ky(Cu(y.fullPath,Y.delta),po()),A(Z,y).catch(E=>on(E,12)?E:on(E,2)?(I(At($(E.to),{force:!0}),Z).then(S=>{on(S,20)&&!Y.delta&&Y.type===Ns.pop&&s.go(-1,!1)}).catch(Ts),Promise.reject()):(Y.delta&&s.go(-Y.delta,!1),dt(E,Z,y))).then(E=>{E=E||P(Z,y,!1),E&&(Y.delta&&!on(E,8)?s.go(-Y.delta,!1):Y.type===Ns.pop&&on(E,20)&&s.go(-1,!1)),R(Z,y,E)}).catch(Ts)}))}let Ve=ls(),jt=ls(),_t;function dt(k,X,Y){Fe(k);const Z=jt.list();return Z.length?Z.forEach(Tt=>Tt(k,X,Y)):console.error(k),Promise.reject(k)}function we(){return _t&&c.value!==bn?Promise.resolve():new Promise((k,X)=>{Ve.add([k,X])})}function Fe(k){return _t||(_t=!k,pe(),Ve.list().forEach(([X,Y])=>k?Y(k):X()),Ve.reset()),k}function De(k,X,Y,Z){const{scrollBehavior:Tt}=e;if(!vr||!Tt)return Promise.resolve();const y=!Y&&zy(Cu(k.fullPath,0))||(Z||!Y)&&history.state&&history.state.scroll||null;return Rf().then(()=>Tt(k,X,y)).then(E=>E&&Hy(E)).catch(E=>dt(E,k,X))}const Lt=k=>s.go(k);let Ft;const En=new Set,He={currentRoute:c,listening:!0,addRoute:g,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:O,getRoutes:V,resolve:q,options:e,push:G,replace:ft,go:Lt,back:()=>Lt(-1),forward:()=>Lt(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:jt.add,isReady:we,install(k){const X=this;k.component("RouterLink",_v),k.component("RouterView",Tv),k.config.globalProperties.$router=X,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>Rr(c)}),vr&&!Ft&&c.value===bn&&(Ft=!0,G(s.location).catch(Tt=>{}));const Y={};for(const Tt in bn)Object.defineProperty(Y,Tt,{get:()=>c.value[Tt],enumerable:!0});k.provide(mo,X),k.provide(vd,Tf(Y)),k.provide(Ca,c);const Z=k.unmount;En.add(k),k.unmount=function(){En.delete(k),En.size<1&&(h=bn,T&&T(),T=null,c.value=bn,Ft=!1,_t=!1),Z()}}};function ve(k){return k.reduce((X,Y)=>X.then(()=>w(Y)),Promise.resolve())}return He}function Iv(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(h=>Or(h,l))?r.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(h=>Or(h,c))||s.push(c))}return[n,r,s]}function Ed(){return Qe(mo)}const Av={class:"min-h-screen flex items-center justify-center px-4"},bv={class:"card w-full max-w-md"},Rv={key:0,class:"mt-2 text-sm text-red-600"},Sv=["disabled"],Pv={__name:"Login",setup(e){const t=Ed(),n=ye(""),r=ye(""),s=ye(!1),i=async()=>{const c=n.value.toLowerCase().trim();if(!c){r.value="Please enter a username";return}if(c!=="b"&&c!=="m"){r.value='Username must be either "b" or "m"';return}s.value=!0;try{localStorage.setItem("currentUser",c),await t.push("/dashboard")}catch{r.value="Login failed. Please try again."}finally{s.value=!1}},a=()=>{r.value=""},l=localStorage.getItem("currentUser");return(l==="b"||l==="m")&&t.push("/dashboard"),(c,h)=>(Dt(),Nt("div",Av,[D("div",bv,[h[2]||(h[2]=D("div",{class:"text-center mb-8"},[D("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Couple's Expense Tracker"),D("p",{class:"text-gray-600"},"Enter your username to continue")],-1)),D("form",{onSubmit:od(i,["prevent"]),class:"space-y-6"},[D("div",null,[h[1]||(h[1]=D("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-2"}," Username ",-1)),an(D("input",{id:"username","onUpdate:modelValue":h[0]||(h[0]=d=>n.value=d),type:"text",placeholder:"Enter 'b' or 'm'",class:be(["input-field",{"border-red-500":r.value}]),onInput:a},null,34),[[Xn,n.value]]),r.value?(Dt(),Nt("p",Rv,pt(r.value),1)):Cn("",!0)]),D("button",{type:"submit",class:"btn-primary w-full",disabled:s.value},pt(s.value?"Logging in...":"Login"),9,Sv)],32)])]))}};var Hu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Cv=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},wd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,h=c?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,g=h&63;c||(g=64,a||(m=64)),r.push(n[d],n[p],n[m],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Td(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Cv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new xv;const m=i<<2|l>>4;if(r.push(m),h!==64){const g=l<<4&240|h>>2;if(r.push(g),p!==64){const b=h<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vv=function(e){const t=Td(e);return wd.encodeByteArray(t,!0)},qi=function(e){return Vv(e).replace(/\./g,"")},Dv=function(e){try{return wd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=()=>Ov().__FIREBASE_DEFAULTS__,Nv=()=>{if(typeof process>"u"||typeof Hu>"u")return;const e=Hu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Mv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Dv(e[1]);return t&&JSON.parse(t)},gl=()=>{try{return kv()||Nv()||Mv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Lv=e=>{var t,n;return(n=(t=gl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Fv=e=>{const t=Lv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Id=()=>{var e;return(e=gl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qi(JSON.stringify(n)),qi(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jv(){var e;const t=(e=gl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qv(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Hv(){return!jv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ad(){try{return typeof indexedDB=="object"}catch{return!1}}function bd(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}function Kv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="FirebaseError";class $n extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=zv,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Gv(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new $n(s,l,r)}}function Gv(e,t){return e.replace(Wv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Wv=/\{\$([^}]+)}/g;function Hi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Ku(i)&&Ku(a)){if(!Hi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ku(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=1e3,Yv=2,Xv=4*60*60*1e3,Jv=.5;function zu(e,t=Qv,n=Yv){const r=t*Math.pow(n,e),s=Math.round(Jv*r*(Math.random()-.5)*2);return Math.min(Xv,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(e){return e&&e._delegate?e._delegate:e}class mn{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Uv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(eE(t))try{this.getOrInitializeService({instanceIdentifier:Qn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Qn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qn){return this.instances.has(t)}getOptions(t=Qn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Qn){return this.component?this.component.multipleInstances?t:Qn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tE(e){return e===Qn?void 0:e}function eE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Zv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Et||(Et={}));const rE={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},sE=Et.INFO,iE={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},oE=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=iE[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _l{constructor(t){this.name=t,this._logLevel=sE,this._logHandler=oE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?rE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}}const aE=(e,t)=>t.some(n=>e instanceof n);let Gu,Wu;function lE(){return Gu||(Gu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cE(){return Wu||(Wu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rd=new WeakMap,xa=new WeakMap,Sd=new WeakMap,ia=new WeakMap,yl=new WeakMap;function uE(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Dn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Rd.set(n,e)}).catch(()=>{}),yl.set(t,e),t}function hE(e){if(xa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});xa.set(e,t)}let Va={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return xa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Sd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function fE(e){Va=e(Va)}function dE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(oa(this),t,...n);return Sd.set(r,t.sort?t.sort():[t]),Dn(r)}:cE().includes(e)?function(...t){return e.apply(oa(this),t),Dn(Rd.get(this))}:function(...t){return Dn(e.apply(oa(this),t))}}function pE(e){return typeof e=="function"?dE(e):(e instanceof IDBTransaction&&hE(e),aE(e,lE())?new Proxy(e,Va):e)}function Dn(e){if(e instanceof IDBRequest)return uE(e);if(ia.has(e))return ia.get(e);const t=pE(e);return t!==e&&(ia.set(e,t),yl.set(t,e)),t}const oa=e=>yl.get(e);function Pd(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Dn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Dn(a.result),c.oldVersion,c.newVersion,Dn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const mE=["get","getKey","getAll","getAllKeys","count"],gE=["put","add","delete","clear"],aa=new Map;function Qu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(aa.get(t))return aa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=gE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mE.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return aa.set(t,i),i}fE(e=>({...e,get:(t,n,r)=>Qu(t,n)||e.get(t,n,r),has:(t,n)=>!!Qu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yE(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Da="@firebase/app",Yu="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new _l("@firebase/app"),vE="@firebase/app-compat",EE="@firebase/analytics-compat",TE="@firebase/analytics",wE="@firebase/app-check-compat",IE="@firebase/app-check",AE="@firebase/auth",bE="@firebase/auth-compat",RE="@firebase/database",SE="@firebase/data-connect",PE="@firebase/database-compat",CE="@firebase/functions",xE="@firebase/functions-compat",VE="@firebase/installations",DE="@firebase/installations-compat",OE="@firebase/messaging",kE="@firebase/messaging-compat",NE="@firebase/performance",ME="@firebase/performance-compat",LE="@firebase/remote-config",FE="@firebase/remote-config-compat",UE="@firebase/storage",BE="@firebase/storage-compat",$E="@firebase/firestore",jE="@firebase/vertexai-preview",qE="@firebase/firestore-compat",HE="firebase",KE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]",zE={[Da]:"fire-core",[vE]:"fire-core-compat",[TE]:"fire-analytics",[EE]:"fire-analytics-compat",[IE]:"fire-app-check",[wE]:"fire-app-check-compat",[AE]:"fire-auth",[bE]:"fire-auth-compat",[RE]:"fire-rtdb",[SE]:"fire-data-connect",[PE]:"fire-rtdb-compat",[CE]:"fire-fn",[xE]:"fire-fn-compat",[VE]:"fire-iid",[DE]:"fire-iid-compat",[OE]:"fire-fcm",[kE]:"fire-fcm-compat",[NE]:"fire-perf",[ME]:"fire-perf-compat",[LE]:"fire-rc",[FE]:"fire-rc-compat",[UE]:"fire-gcs",[BE]:"fire-gcs-compat",[$E]:"fire-fst",[qE]:"fire-fst-compat",[jE]:"fire-vertex","fire-js":"fire-js",[HE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Map,GE=new Map,ka=new Map;function Xu(e,t){try{e.container.addComponent(t)}catch(n){gn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ln(e){const t=e.name;if(ka.has(t))return gn.debug(`There were multiple attempts to register component ${t}.`),!1;ka.set(t,e);for(const n of Ki.values())Xu(n,e);for(const n of GE.values())Xu(n,e);return!0}function Ws(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new go("app","Firebase",WE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=KE;function Cd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Oa,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw On.create("bad-app-name",{appName:String(s)});if(n||(n=Id()),!n)throw On.create("no-options");const i=Ki.get(s);if(i){if(Hi(n,i.options)&&Hi(r,i.config))return i;throw On.create("duplicate-app",{appName:s})}const a=new nE(s);for(const c of ka.values())a.addComponent(c);const l=new QE(n,r,a);return Ki.set(s,l),l}function xd(e=Oa){const t=Ki.get(e);if(!t&&e===Oa&&Id())return Cd();if(!t)throw On.create("no-app",{appName:e});return t}function Ye(e,t,n){var r;let s=(r=zE[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),gn.warn(l.join(" "));return}Ln(new mn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebase-heartbeat-database",JE=1,Ms="firebase-heartbeat-store";let la=null;function Vd(){return la||(la=Pd(XE,JE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ms)}catch(n){console.warn(n)}}}}).catch(e=>{throw On.create("idb-open",{originalErrorMessage:e.message})})),la}async function ZE(e){try{const n=(await Vd()).transaction(Ms),r=await n.objectStore(Ms).get(Dd(e));return await n.done,r}catch(t){if(t instanceof $n)gn.warn(t.message);else{const n=On.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});gn.warn(n.message)}}}async function Ju(e,t){try{const r=(await Vd()).transaction(Ms,"readwrite");await r.objectStore(Ms).put(t,Dd(e)),await r.done}catch(n){if(n instanceof $n)gn.warn(n.message);else{const r=On.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(r.message)}}}function Dd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=1024,eT=30*24*60*60*1e3;class nT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zu();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=eT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zu(),{heartbeatsToSend:r,unsentEntries:s}=rT(this._heartbeatsCache.heartbeats),i=qi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return gn.warn(n),""}}}function Zu(){return new Date().toISOString().substring(0,10)}function rT(e,t=tT){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),th(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),th(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ad()?bd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ju(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ju(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function th(e){return qi(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(e){Ln(new mn("platform-logger",t=>new _E(t),"PRIVATE")),Ln(new mn("heartbeat",t=>new nT(t),"PRIVATE")),Ye(Da,Yu,e),Ye(Da,Yu,"esm2017"),Ye("fire-js","")}iT("");var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var er,Od;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(A,R,P){for(var T=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)T[pe-2]=arguments[pe];return v.prototype[R].apply(A,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,w){w||(w=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(R=0;16>R;++R)A[R]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],R=I.g[2];var P=I.g[3],T=v+(P^w&(R^P))+A[0]+3614090360&4294967295;v=w+(T<<7&4294967295|T>>>25),T=P+(R^v&(w^R))+A[1]+3905402710&4294967295,P=v+(T<<12&4294967295|T>>>20),T=R+(w^P&(v^w))+A[2]+606105819&4294967295,R=P+(T<<17&4294967295|T>>>15),T=w+(v^R&(P^v))+A[3]+3250441966&4294967295,w=R+(T<<22&4294967295|T>>>10),T=v+(P^w&(R^P))+A[4]+4118548399&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(R^v&(w^R))+A[5]+1200080426&4294967295,P=v+(T<<12&4294967295|T>>>20),T=R+(w^P&(v^w))+A[6]+2821735955&4294967295,R=P+(T<<17&4294967295|T>>>15),T=w+(v^R&(P^v))+A[7]+4249261313&4294967295,w=R+(T<<22&4294967295|T>>>10),T=v+(P^w&(R^P))+A[8]+1770035416&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(R^v&(w^R))+A[9]+2336552879&4294967295,P=v+(T<<12&4294967295|T>>>20),T=R+(w^P&(v^w))+A[10]+4294925233&4294967295,R=P+(T<<17&4294967295|T>>>15),T=w+(v^R&(P^v))+A[11]+2304563134&4294967295,w=R+(T<<22&4294967295|T>>>10),T=v+(P^w&(R^P))+A[12]+1804603682&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(R^v&(w^R))+A[13]+4254626195&4294967295,P=v+(T<<12&4294967295|T>>>20),T=R+(w^P&(v^w))+A[14]+2792965006&4294967295,R=P+(T<<17&4294967295|T>>>15),T=w+(v^R&(P^v))+A[15]+1236535329&4294967295,w=R+(T<<22&4294967295|T>>>10),T=v+(R^P&(w^R))+A[1]+4129170786&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^R&(v^w))+A[6]+3225465664&4294967295,P=v+(T<<9&4294967295|T>>>23),T=R+(v^w&(P^v))+A[11]+643717713&4294967295,R=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(R^P))+A[0]+3921069994&4294967295,w=R+(T<<20&4294967295|T>>>12),T=v+(R^P&(w^R))+A[5]+3593408605&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^R&(v^w))+A[10]+38016083&4294967295,P=v+(T<<9&4294967295|T>>>23),T=R+(v^w&(P^v))+A[15]+3634488961&4294967295,R=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(R^P))+A[4]+3889429448&4294967295,w=R+(T<<20&4294967295|T>>>12),T=v+(R^P&(w^R))+A[9]+568446438&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^R&(v^w))+A[14]+3275163606&4294967295,P=v+(T<<9&4294967295|T>>>23),T=R+(v^w&(P^v))+A[3]+4107603335&4294967295,R=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(R^P))+A[8]+1163531501&4294967295,w=R+(T<<20&4294967295|T>>>12),T=v+(R^P&(w^R))+A[13]+2850285829&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^R&(v^w))+A[2]+4243563512&4294967295,P=v+(T<<9&4294967295|T>>>23),T=R+(v^w&(P^v))+A[7]+1735328473&4294967295,R=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(R^P))+A[12]+2368359562&4294967295,w=R+(T<<20&4294967295|T>>>12),T=v+(w^R^P)+A[5]+4294588738&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^R)+A[8]+2272392833&4294967295,P=v+(T<<11&4294967295|T>>>21),T=R+(P^v^w)+A[11]+1839030562&4294967295,R=P+(T<<16&4294967295|T>>>16),T=w+(R^P^v)+A[14]+4259657740&4294967295,w=R+(T<<23&4294967295|T>>>9),T=v+(w^R^P)+A[1]+2763975236&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^R)+A[4]+1272893353&4294967295,P=v+(T<<11&4294967295|T>>>21),T=R+(P^v^w)+A[7]+4139469664&4294967295,R=P+(T<<16&4294967295|T>>>16),T=w+(R^P^v)+A[10]+3200236656&4294967295,w=R+(T<<23&4294967295|T>>>9),T=v+(w^R^P)+A[13]+681279174&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^R)+A[0]+3936430074&4294967295,P=v+(T<<11&4294967295|T>>>21),T=R+(P^v^w)+A[3]+3572445317&4294967295,R=P+(T<<16&4294967295|T>>>16),T=w+(R^P^v)+A[6]+76029189&4294967295,w=R+(T<<23&4294967295|T>>>9),T=v+(w^R^P)+A[9]+3654602809&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^R)+A[12]+3873151461&4294967295,P=v+(T<<11&4294967295|T>>>21),T=R+(P^v^w)+A[15]+530742520&4294967295,R=P+(T<<16&4294967295|T>>>16),T=w+(R^P^v)+A[2]+3299628645&4294967295,w=R+(T<<23&4294967295|T>>>9),T=v+(R^(w|~P))+A[0]+4096336452&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~R))+A[7]+1126891415&4294967295,P=v+(T<<10&4294967295|T>>>22),T=R+(v^(P|~w))+A[14]+2878612391&4294967295,R=P+(T<<15&4294967295|T>>>17),T=w+(P^(R|~v))+A[5]+4237533241&4294967295,w=R+(T<<21&4294967295|T>>>11),T=v+(R^(w|~P))+A[12]+1700485571&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~R))+A[3]+2399980690&4294967295,P=v+(T<<10&4294967295|T>>>22),T=R+(v^(P|~w))+A[10]+4293915773&4294967295,R=P+(T<<15&4294967295|T>>>17),T=w+(P^(R|~v))+A[1]+2240044497&4294967295,w=R+(T<<21&4294967295|T>>>11),T=v+(R^(w|~P))+A[8]+1873313359&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~R))+A[15]+4264355552&4294967295,P=v+(T<<10&4294967295|T>>>22),T=R+(v^(P|~w))+A[6]+2734768916&4294967295,R=P+(T<<15&4294967295|T>>>17),T=w+(P^(R|~v))+A[13]+1309151649&4294967295,w=R+(T<<21&4294967295|T>>>11),T=v+(R^(w|~P))+A[4]+4149444226&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~R))+A[11]+3174756917&4294967295,P=v+(T<<10&4294967295|T>>>22),T=R+(v^(P|~w))+A[2]+718787259&4294967295,R=P+(T<<15&4294967295|T>>>17),T=w+(P^(R|~v))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,A=this.B,R=this.h,P=0;P<v;){if(R==0)for(;P<=w;)s(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<v;)if(A[R++]=I.charCodeAt(P++),R==this.blockSize){s(this,A),R=0;break}}else for(;P<v;)if(A[R++]=I[P++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var A=0;32>A;A+=8)I[w++]=this.g[v]>>>A&255;return I};function i(I,v){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function a(I,v){this.h=v;for(var w=[],A=!0,R=I.length-1;0<=R;R--){var P=I[R]|0;A&&P==v||(w[R]=P,A=!1)}this.g=w}var l={};function c(I){return-128<=I&&128>I?i(I,function(v){return new a([v|0],0>v?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return O(h(-I));for(var v=[],w=1,A=0;I>=w;A++)v[A]=I/w|0,w*=4294967296;return new a(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return O(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(v,8)),A=p,R=0;R<I.length;R+=8){var P=Math.min(8,I.length-R),T=parseInt(I.substring(R,R+P),v);8>P?(P=h(Math.pow(v,P)),A=A.j(P).add(h(T))):(A=A.j(w),A=A.add(h(T)))}return A}var p=c(0),m=c(1),g=c(16777216);e=a.prototype,e.m=function(){if(V(this))return-O(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var A=this.i(w);I+=(0<=A?A:4294967296+A)*v,v*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(V(this))return"-"+O(this).toString(I);for(var v=h(Math.pow(I,6)),w=this,A="";;){var R=G(w,v).g;w=q(w,R.j(v));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=R,b(w))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function V(I){return I.h==-1}e.l=function(I){return I=q(this,I),V(I)?-1:b(I)?0:1};function O(I){for(var v=I.g.length,w=[],A=0;A<v;A++)w[A]=~I.g[A];return new a(w,~I.h).add(m)}e.abs=function(){return V(this)?O(this):this},e.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],A=0,R=0;R<=v;R++){var P=A+(this.i(R)&65535)+(I.i(R)&65535),T=(P>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);A=T>>>16,P&=65535,T&=65535,w[R]=T<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function q(I,v){return I.add(O(v))}e.j=function(I){if(b(this)||b(I))return p;if(V(this))return V(I)?O(this).j(O(I)):O(O(this).j(I));if(V(I))return O(this.j(O(I)));if(0>this.l(g)&&0>I.l(g))return h(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],A=0;A<2*v;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<I.g.length;R++){var P=this.i(A)>>>16,T=this.i(A)&65535,pe=I.i(R)>>>16,Ve=I.i(R)&65535;w[2*A+2*R]+=T*Ve,$(w,2*A+2*R),w[2*A+2*R+1]+=P*Ve,$(w,2*A+2*R+1),w[2*A+2*R+1]+=T*pe,$(w,2*A+2*R+1),w[2*A+2*R+2]+=P*pe,$(w,2*A+2*R+2)}for(A=0;A<v;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=v;A<2*v;A++)w[A]=0;return new a(w,0)};function $(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function z(I,v){this.g=I,this.h=v}function G(I,v){if(b(v))throw Error("division by zero");if(b(I))return new z(p,p);if(V(I))return v=G(O(I),v),new z(O(v.g),O(v.h));if(V(v))return v=G(I,O(v)),new z(O(v.g),v.h);if(30<I.g.length){if(V(I)||V(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,A=v;0>=A.l(I);)w=ft(w),A=ft(A);var R=gt(w,1),P=gt(A,1);for(A=gt(A,2),w=gt(w,2);!b(A);){var T=P.add(A);0>=T.l(I)&&(R=R.add(w),P=T),A=gt(A,1),w=gt(w,1)}return v=q(I,R.j(v)),new z(R,v)}for(R=p;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=h(w),T=P.j(v);V(T)||0<T.l(I);)w-=A,P=h(w),T=P.j(v);b(P)&&(P=m),R=R.add(P),I=q(I,T)}return new z(R,I)}e.A=function(I){return G(this,I).h},e.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],A=0;A<v;A++)w[A]=this.i(A)&I.i(A);return new a(w,this.h&I.h)},e.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],A=0;A<v;A++)w[A]=this.i(A)|I.i(A);return new a(w,this.h|I.h)},e.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],A=0;A<v;A++)w[A]=this.i(A)^I.i(A);return new a(w,this.h^I.h)};function ft(I){for(var v=I.g.length+1,w=[],A=0;A<v;A++)w[A]=I.i(A)<<1|I.i(A-1)>>>31;return new a(w,I.h)}function gt(I,v){var w=v>>5;v%=32;for(var A=I.g.length-w,R=[],P=0;P<A;P++)R[P]=0<v?I.i(P+w)>>>v|I.i(P+w+1)<<32-v:I.i(P+w);return new a(R,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Od=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,er=a}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});var Ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kd,hs,Nd,Pi,Na,Md,Ld,Fd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ei=="object"&&Ei];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var f=r;o=o.split(".");for(var _=0;_<o.length-1;_++){var C=o[_];if(!(C in f))break t;f=f[C]}o=o[o.length-1],_=f[o],u=u(_),u!=_&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var f=0,_=!1,C={next:function(){if(!_&&f<o.length){var x=f++;return{value:u(x,o[x]),done:!1}}return _=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,f){return o.call.apply(o.bind,arguments)}function p(o,u,f){if(!o)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,_),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function m(o,u,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function g(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function b(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(_,C,x){for(var K=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)K[Pt-2]=arguments[Pt];return u.prototype[C].apply(_,K)}}function V(o){const u=o.length;if(0<u){const f=Array(u);for(let _=0;_<u;_++)f[_]=o[_];return f}return[]}function O(o,u){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(c(_)){const C=o.length||0,x=_.length||0;o.length=C+x;for(let K=0;K<x;K++)o[C+K]=_[K]}else o.push(_)}}class q{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function $(o){return/^[\s\xa0]*$/.test(o)}function z(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function G(o){return G[" "](o),o}G[" "]=function(){};var ft=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function gt(o,u,f){for(const _ in o)u.call(f,o[_],_,o)}function I(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function v(o){const u={};for(const f in o)u[f]=o[f];return u}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,u){let f,_;for(let C=1;C<arguments.length;C++){_=arguments[C];for(f in _)o[f]=_[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(_,f)&&(o[f]=_[f])}}function R(o){var u=1;o=o.split(":");const f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function P(o){l.setTimeout(()=>{throw o},0)}function T(){var o=we;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class pe{constructor(){this.h=this.g=null}add(u,f){const _=Ve.get();_.set(u,f),this.h?this.h.next=_:this.g=_,this.h=_}}var Ve=new q(()=>new jt,o=>o.reset());class jt{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,dt=!1,we=new pe,Fe=()=>{const o=l.Promise.resolve(void 0);_t=()=>{o.then(De)}};var De=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(f){P(f)}var u=Ve;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}dt=!1};function Lt(){this.s=this.s,this.C=this.C}Lt.prototype.s=!1,Lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ft(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ft.prototype.h=function(){this.defaultPrevented=!0};var En=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,u),l.removeEventListener("test",f,u)}catch{}return o}();function He(o,u){if(Ft.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(ft){t:{try{G(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ve[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&He.aa.h.call(this)}}b(He,Ft);var ve={2:"touch",3:"pen",4:"mouse"};He.prototype.h=function(){He.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var k="closure_listenable_"+(1e6*Math.random()|0),X=0;function Y(o,u,f,_,C){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!_,this.ha=C,this.key=++X,this.da=this.fa=!1}function Z(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Tt(o){this.src=o,this.g={},this.h=0}Tt.prototype.add=function(o,u,f,_,C){var x=o.toString();o=this.g[x],o||(o=this.g[x]=[],this.h++);var K=E(o,u,_,C);return-1<K?(u=o[K],f||(u.fa=!1)):(u=new Y(u,this.src,x,!!_,C),u.fa=f,o.push(u)),u};function y(o,u){var f=u.type;if(f in o.g){var _=o.g[f],C=Array.prototype.indexOf.call(_,u,void 0),x;(x=0<=C)&&Array.prototype.splice.call(_,C,1),x&&(Z(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function E(o,u,f,_){for(var C=0;C<o.length;++C){var x=o[C];if(!x.da&&x.listener==u&&x.capture==!!f&&x.ha==_)return C}return-1}var S="closure_lm_"+(1e6*Math.random()|0),N={};function L(o,u,f,_,C){if(Array.isArray(u)){for(var x=0;x<u.length;x++)L(o,u[x],f,_,C);return null}return f=it(f),o&&o[k]?o.K(u,f,h(_)?!!_.capture:!1,C):M(o,u,f,!1,_,C)}function M(o,u,f,_,C,x){if(!u)throw Error("Invalid event type");var K=h(C)?!!C.capture:!!C,Pt=W(o);if(Pt||(o[S]=Pt=new Tt(o)),f=Pt.add(u,f,_,K,x),f.proxy)return f;if(_=Q(),f.proxy=_,_.src=o,_.listener=f,o.addEventListener)En||(C=K),C===void 0&&(C=!1),o.addEventListener(u.toString(),_,C);else if(o.attachEvent)o.attachEvent(B(u.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Q(){function o(f){return u.call(o.src,o.listener,f)}const u=nt;return o}function H(o,u,f,_,C){if(Array.isArray(u))for(var x=0;x<u.length;x++)H(o,u[x],f,_,C);else _=h(_)?!!_.capture:!!_,f=it(f),o&&o[k]?(o=o.i,u=String(u).toString(),u in o.g&&(x=o.g[u],f=E(x,f,_,C),-1<f&&(Z(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete o.g[u],o.h--)))):o&&(o=W(o))&&(u=o.g[u.toString()],o=-1,u&&(o=E(u,f,_,C)),(f=-1<o?u[o]:null)&&j(f))}function j(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[k])y(u.i,o);else{var f=o.type,_=o.proxy;u.removeEventListener?u.removeEventListener(f,_,o.capture):u.detachEvent?u.detachEvent(B(f),_):u.addListener&&u.removeListener&&u.removeListener(_),(f=W(u))?(y(f,o),f.h==0&&(f.src=null,u[S]=null)):Z(o)}}}function B(o){return o in N?N[o]:N[o]="on"+o}function nt(o,u){if(o.da)o=!0;else{u=new He(u,this);var f=o.listener,_=o.ha||o.src;o.fa&&j(o),o=f.call(_,u)}return o}function W(o){return o=o[S],o instanceof Tt?o:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(o){return typeof o=="function"?o:(o[et]||(o[et]=function(u){return o.handleEvent(u)}),o[et])}function st(){Lt.call(this),this.i=new Tt(this),this.M=this,this.F=null}b(st,Lt),st.prototype[k]=!0,st.prototype.removeEventListener=function(o,u,f,_){H(this,o,u,f,_)};function ht(o,u){var f,_=o.F;if(_)for(f=[];_;_=_.F)f.push(_);if(o=o.M,_=u.type||u,typeof u=="string")u=new Ft(u,o);else if(u instanceof Ft)u.target=u.target||o;else{var C=u;u=new Ft(_,o),A(u,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var K=u.g=f[x];C=yt(K,_,!0,u)&&C}if(K=u.g=o,C=yt(K,_,!0,u)&&C,C=yt(K,_,!1,u)&&C,f)for(x=0;x<f.length;x++)K=u.g=f[x],C=yt(K,_,!1,u)&&C}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],_=0;_<f.length;_++)Z(f[_]);delete o.g[u],o.h--}}this.F=null},st.prototype.K=function(o,u,f,_){return this.i.add(String(o),u,!1,f,_)},st.prototype.L=function(o,u,f,_){return this.i.add(String(o),u,!0,f,_)};function yt(o,u,f,_){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,x=0;x<u.length;++x){var K=u[x];if(K&&!K.da&&K.capture==f){var Pt=K.listener,Yt=K.ha||K.src;K.fa&&y(o.i,K),C=Pt.call(Yt,_)!==!1&&C}}return C&&!_.defaultPrevented}function re(o,u,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Wt(o){o.g=re(()=>{o.g=null,o.i&&(o.i=!1,Wt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Oe extends Lt{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(o){Lt.call(this),this.h=o,this.g={}}b(se,Lt);var Tn=[];function Gr(o){gt(o.g,function(u,f){this.g.hasOwnProperty(f)&&j(u)},o),o.g={}}se.prototype.N=function(){se.aa.N.call(this),Gr(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=l.JSON.stringify,ke=l.JSON.parse,ei=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function xo(){}xo.prototype.h=null;function ic(o){return o.h||(o.h=o.i())}function oc(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vo(){Ft.call(this,"d")}b(Vo,Ft);function Do(){Ft.call(this,"c")}b(Do,Ft);var jn={},ac=null;function ni(){return ac=ac||new st}jn.La="serverreachability";function lc(o){Ft.call(this,jn.La,o)}b(lc,Ft);function Qr(o){const u=ni();ht(u,new lc(u))}jn.STAT_EVENT="statevent";function cc(o,u){Ft.call(this,jn.STAT_EVENT,o),this.stat=u}b(cc,Ft);function me(o){const u=ni();ht(u,new cc(u,o))}jn.Ma="timingevent";function uc(o,u){Ft.call(this,jn.Ma,o),this.size=u}b(uc,Ft);function Yr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Xr(){this.g=!0}Xr.prototype.xa=function(){this.g=!1};function bm(o,u,f,_,C,x){o.info(function(){if(o.g)if(x)for(var K="",Pt=x.split("&"),Yt=0;Yt<Pt.length;Yt++){var wt=Pt[Yt].split("=");if(1<wt.length){var ie=wt[0];wt=wt[1];var oe=ie.split("_");K=2<=oe.length&&oe[1]=="type"?K+(ie+"="+wt+"&"):K+(ie+"=redacted&")}}else K=null;else K=x;return"XMLHTTP REQ ("+_+") [attempt "+C+"]: "+u+`
`+f+`
`+K})}function Rm(o,u,f,_,C,x,K){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+C+"]: "+u+`
`+f+`
`+x+" "+K})}function fr(o,u,f,_){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Pm(o,f)+(_?" "+_:"")})}function Sm(o,u){o.info(function(){return"TIMEOUT: "+u})}Xr.prototype.info=function(){};function Pm(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var _=f[o];if(!(2>_.length)){var C=_[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var K=1;K<C.length;K++)C[K]=""}}}}return Qt(f)}catch{return u}}var ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oo;function si(){}b(si,xo),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},Oo=new si;function wn(o,u,f,_){this.j=o,this.i=u,this.l=f,this.R=_||1,this.U=new se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fc}function fc(){this.i=null,this.g="",this.h=!1}var dc={},ko={};function No(o,u,f){o.L=1,o.v=li(nn(u)),o.m=f,o.P=!0,pc(o,null)}function pc(o,u){o.F=Date.now(),ii(o),o.A=nn(o.v);var f=o.A,_=o.R;Array.isArray(_)||(_=[String(_)]),Pc(f.i,"t",_),o.C=0,f=o.j.J,o.h=new fc,o.g=zc(o.j,f?u:null,!o.m),0<o.O&&(o.M=new Oe(m(o.Y,o,o.g),o.O)),u=o.U,f=o.g,_=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Tn[0]=C.toString()),C=Tn);for(var x=0;x<C.length;x++){var K=L(f,C[x],_||u.handleEvent,!1,u.h||u);if(!K)break;u.g[K.key]=K}u=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Qr(),bm(o.i,o.u,o.A,o.l,o.R,o.m)}wn.prototype.ca=function(o){o=o.target;const u=this.M;u&&rn(o)==3?u.j():this.Y(o)},wn.prototype.Y=function(o){try{if(o==this.g)t:{const oe=rn(this.g);var u=this.g.Ba();const mr=this.g.Z();if(!(3>oe)&&(oe!=3||this.g&&(this.h.h||this.g.oa()||Nc(this.g)))){this.J||oe!=4||u==7||(u==8||0>=mr?Qr(3):Qr(2)),Mo(this);var f=this.g.Z();this.X=f;e:if(mc(this)){var _=Nc(this.g);o="";var C=_.length,x=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Jr(this);var K="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(_[u],{stream:!(x&&u==C-1)});_.length=0,this.h.g+=o,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=f==200,Rm(this.i,this.u,this.A,this.l,this.R,oe,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,Yt=this.g;if((Pt=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Pt)){var wt=Pt;break e}}wt=null}if(f=wt)fr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lo(this,f);else{this.o=!1,this.s=3,me(12),qn(this),Jr(this);break t}}if(this.P){f=!0;let Ue;for(;!this.J&&this.C<K.length;)if(Ue=Cm(this,K),Ue==ko){oe==4&&(this.s=4,me(14),f=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==dc){this.s=4,me(15),fr(this.i,this.l,K,"[Invalid Chunk]"),f=!1;break}else fr(this.i,this.l,Ue,null),Lo(this,Ue);if(mc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||K.length!=0||this.h.h||(this.s=1,me(16),f=!1),this.o=this.o&&f,!f)fr(this.i,this.l,K,"[Invalid Chunked Response]"),qn(this),Jr(this);else if(0<K.length&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.ba&&!ie.M&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),qo(ie),ie.M=!0,me(11))}}else fr(this.i,this.l,K,null),Lo(this,K);oe==4&&qn(this),this.o&&!this.J&&(oe==4?jc(this.j,this):(this.o=!1,ii(this)))}else zm(this.g),f==400&&0<K.indexOf("Unknown SID")?(this.s=3,me(12)):(this.s=0,me(13)),qn(this),Jr(this)}}}catch{}finally{}};function mc(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Cm(o,u){var f=o.C,_=u.indexOf(`
`,f);return _==-1?ko:(f=Number(u.substring(f,_)),isNaN(f)?dc:(_+=1,_+f>u.length?ko:(u=u.slice(_,_+f),o.C=_+f,u)))}wn.prototype.cancel=function(){this.J=!0,qn(this)};function ii(o){o.S=Date.now()+o.I,gc(o,o.I)}function gc(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Yr(m(o.ba,o),u)}function Mo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}wn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Sm(this.i,this.A),this.L!=2&&(Qr(),me(17)),qn(this),this.s=2,Jr(this)):gc(this,this.S-o)};function Jr(o){o.j.G==0||o.J||jc(o.j,o)}function qn(o){Mo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Gr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Lo(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||Fo(f.h,o))){if(!o.K&&Fo(f.h,o)&&f.G==3){try{var _=f.Da.g.parse(u)}catch{_=null}if(Array.isArray(_)&&_.length==3){var C=_;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)pi(f),fi(f);else break t;jo(f),me(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Yr(m(f.Za,f),6e3));if(1>=vc(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kn(f,11)}else if((o.K||f.g==o)&&pi(f),!$(u))for(C=f.Da.g.parse(u),u=0;u<C.length;u++){let wt=C[u];if(f.T=wt[0],wt=wt[1],f.G==2)if(wt[0]=="c"){f.K=wt[1],f.ia=wt[2];const ie=wt[3];ie!=null&&(f.la=ie,f.j.info("VER="+f.la));const oe=wt[4];oe!=null&&(f.Aa=oe,f.j.info("SVER="+f.Aa));const mr=wt[5];mr!=null&&typeof mr=="number"&&0<mr&&(_=1.5*mr,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Ue=o.g;if(Ue){const gi=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var x=_.h;x.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Uo(x,x.h),x.h=null))}if(_.D){const Ho=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(_.ya=Ho,kt(_.I,_.D,Ho))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var K=o;if(_.qa=Kc(_,_.J?_.ia:null,_.W),K.K){Ec(_.h,K);var Pt=K,Yt=_.L;Yt&&(Pt.I=Yt),Pt.B&&(Mo(Pt),ii(Pt)),_.g=K}else Bc(_);0<f.i.length&&di(f)}else wt[0]!="stop"&&wt[0]!="close"||Kn(f,7);else f.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Kn(f,7):$o(f):wt[0]!="noop"&&f.l&&f.l.ta(wt),f.v=0)}}Qr(4)}catch{}}var xm=class{constructor(o,u){this.g=o,this.map=u}};function _c(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yc(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function vc(o){return o.h?1:o.g?o.g.size:0}function Fo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Uo(o,u){o.g?o.g.add(u):o.h=u}function Ec(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}_c.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Tc(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.D);return u}return V(o.i)}function Vm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],f=o.length,_=0;_<f;_++)u.push(o[_]);return u}u=[],f=0;for(_ in o)u[f++]=o[_];return u}function Dm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(const _ in o)u[f++]=_;return u}}}function wc(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=Dm(o),_=Vm(o),C=_.length,x=0;x<C;x++)u.call(void 0,_[x],f&&f[x],o)}var Ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Om(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var _=o[f].indexOf("="),C=null;if(0<=_){var x=o[f].substring(0,_);C=o[f].substring(_+1)}else x=o[f];u(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Hn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Hn){this.h=o.h,oi(this,o.j),this.o=o.o,this.g=o.g,ai(this,o.s),this.l=o.l;var u=o.i,f=new es;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),Ac(this,f),this.m=o.m}else o&&(u=String(o).match(Ic))?(this.h=!1,oi(this,u[1]||"",!0),this.o=Zr(u[2]||""),this.g=Zr(u[3]||"",!0),ai(this,u[4]),this.l=Zr(u[5]||"",!0),Ac(this,u[6]||"",!0),this.m=Zr(u[7]||"")):(this.h=!1,this.i=new es(null,this.h))}Hn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(ts(u,bc,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(ts(u,bc,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ts(f,f.charAt(0)=="/"?Mm:Nm,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ts(f,Fm)),o.join("")};function nn(o){return new Hn(o)}function oi(o,u,f){o.j=f?Zr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ai(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Ac(o,u,f){u instanceof es?(o.i=u,Um(o.i,o.h)):(f||(u=ts(u,Lm)),o.i=new es(u,o.h))}function kt(o,u,f){o.i.set(u,f)}function li(o){return kt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Zr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ts(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,km),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function km(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var bc=/[#\/\?@]/g,Nm=/[#\?:]/g,Mm=/[#\?]/g,Lm=/[#\?@]/g,Fm=/#/g;function es(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function In(o){o.g||(o.g=new Map,o.h=0,o.i&&Om(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}e=es.prototype,e.add=function(o,u){In(this),this.i=null,o=dr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function Rc(o,u){In(o),u=dr(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Sc(o,u){return In(o),u=dr(o,u),o.g.has(u)}e.forEach=function(o,u){In(this),this.g.forEach(function(f,_){f.forEach(function(C){o.call(u,C,_,this)},this)},this)},e.na=function(){In(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let _=0;_<u.length;_++){const C=o[_];for(let x=0;x<C.length;x++)f.push(u[_])}return f},e.V=function(o){In(this);let u=[];if(typeof o=="string")Sc(this,o)&&(u=u.concat(this.g.get(dr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},e.set=function(o,u){return In(this),this.i=null,o=dr(this,o),Sc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Pc(o,u,f){Rc(o,u),0<f.length&&(o.i=null,o.g.set(dr(o,u),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var _=u[f];const x=encodeURIComponent(String(_)),K=this.V(_);for(_=0;_<K.length;_++){var C=x;K[_]!==""&&(C+="="+encodeURIComponent(String(K[_]))),o.push(C)}}return this.i=o.join("&")};function dr(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Um(o,u){u&&!o.j&&(In(o),o.i=null,o.g.forEach(function(f,_){var C=_.toLowerCase();_!=C&&(Rc(this,_),Pc(this,C,f))},o)),o.j=u}function Bm(o,u){const f=new Xr;if(l.Image){const _=new Image;_.onload=g(An,f,"TestLoadImage: loaded",!0,u,_),_.onerror=g(An,f,"TestLoadImage: error",!1,u,_),_.onabort=g(An,f,"TestLoadImage: abort",!1,u,_),_.ontimeout=g(An,f,"TestLoadImage: timeout",!1,u,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else u(!1)}function $m(o,u){const f=new Xr,_=new AbortController,C=setTimeout(()=>{_.abort(),An(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:_.signal}).then(x=>{clearTimeout(C),x.ok?An(f,"TestPingServer: ok",!0,u):An(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),An(f,"TestPingServer: error",!1,u)})}function An(o,u,f,_,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),_(f)}catch{}}function jm(){this.g=new ei}function qm(o,u,f){const _=f||"";try{wc(o,function(C,x){let K=C;h(C)&&(K=Qt(C)),u.push(_+x+"="+encodeURIComponent(K))})}catch(C){throw u.push(_+"type="+encodeURIComponent("_badmap")),C}}function ci(o){this.l=o.Ub||null,this.j=o.eb||!1}b(ci,xo),ci.prototype.g=function(){return new ui(this.l,this.j)},ci.prototype.i=function(o){return function(){return o}}({});function ui(o,u){st.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ui,st),e=ui.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,rs(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cc(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cc(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?ns(this):rs(this),this.readyState==3&&Cc(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ns(this))},e.Qa=function(o){this.g&&(this.response=o,ns(this))},e.ga=function(){this.g&&ns(this)};function ns(o){o.readyState=4,o.l=null,o.j=null,o.v=null,rs(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function rs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function xc(o){let u="";return gt(o,function(f,_){u+=_,u+=":",u+=f,u+=`\r
`}),u}function Bo(o,u,f){t:{for(_ in f){var _=!1;break t}_=!0}_||(f=xc(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):kt(o,u,f))}function Bt(o){st.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Bt,st);var Hm=/^https?$/i,Km=["POST","PUT"];e=Bt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oo.g(),this.v=this.o?ic(this.o):ic(Oo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(x){Vc(this,x);return}if(o=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var C in _)f.set(C,_[C]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const x of _.keys())f.set(x,_.get(x));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Km,u,void 0))||_||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,K]of f)this.g.setRequestHeader(x,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kc(this),this.u=!0,this.g.send(o),this.u=!1}catch(x){Vc(this,x)}};function Vc(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Dc(o),hi(o)}function Dc(o){o.A||(o.A=!0,ht(o,"complete"),ht(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ht(this,"complete"),ht(this,"abort"),hi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hi(this,!0)),Bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Oc(this):this.bb())},e.bb=function(){Oc(this)};function Oc(o){if(o.h&&typeof a<"u"&&(!o.v[1]||rn(o)!=4||o.Z()!=2)){if(o.u&&rn(o)==4)re(o.Ea,0,o);else if(ht(o,"readystatechange"),rn(o)==4){o.h=!1;try{const K=o.Z();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var _;if(_=K===0){var C=String(o.D).match(Ic)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),_=!Hm.test(C?C.toLowerCase():"")}f=_}if(f)ht(o,"complete"),ht(o,"success");else{o.m=6;try{var x=2<rn(o)?o.g.statusText:""}catch{x=""}o.l=x+" ["+o.Z()+"]",Dc(o)}}finally{hi(o)}}}}function hi(o,u){if(o.g){kc(o);const f=o.g,_=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ht(o,"ready");try{f.onreadystatechange=_}catch{}}}function kc(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function rn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),ke(u)}};function Nc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function zm(o){const u={};o=(o.g&&2<=rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if($(o[_]))continue;var f=R(o[_]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const x=u[C]||[];u[C]=x,x.push(f)}I(u,function(_){return _.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Mc(o){this.Aa=0,this.i=[],this.j=new Xr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ss("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ss("baseRetryDelayMs",5e3,o),this.cb=ss("retryDelaySeedMs",1e4,o),this.Wa=ss("forwardChannelMaxRetries",2,o),this.wa=ss("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new _c(o&&o.concurrentRequestLimit),this.Da=new jm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Mc.prototype,e.la=8,e.G=1,e.connect=function(o,u,f,_){me(0),this.W=o,this.H=u||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=Kc(this,null,this.W),di(this)};function $o(o){if(Lc(o),o.G==3){var u=o.U++,f=nn(o.I);if(kt(f,"SID",o.K),kt(f,"RID",u),kt(f,"TYPE","terminate"),is(o,f),u=new wn(o,o.j,u),u.L=2,u.v=li(nn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=u.v,f=!0),f||(u.g=zc(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ii(u)}Hc(o)}function fi(o){o.g&&(qo(o),o.g.cancel(),o.g=null)}function Lc(o){fi(o),o.u&&(l.clearTimeout(o.u),o.u=null),pi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function di(o){if(!yc(o.h)&&!o.s){o.s=!0;var u=o.Ga;_t||Fe(),dt||(_t(),dt=!0),we.add(u,o),o.B=0}}function Gm(o,u){return vc(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Yr(m(o.Ga,o,u),qc(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new wn(this,this.j,o);let x=this.o;if(this.S&&(x?(x=v(x),A(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break e}_=void 0}if(_===void 0)break;if(u+=_,4096<u){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=Uc(this,C,u),f=nn(this.I),kt(f,"RID",o),kt(f,"CVER",22),this.D&&kt(f,"X-HTTP-Session-Id",this.D),is(this,f),x&&(this.O?u="headers="+encodeURIComponent(String(xc(x)))+"&"+u:this.m&&Bo(f,this.m,x)),Uo(this.h,C),this.Ua&&kt(f,"TYPE","init"),this.P?(kt(f,"$req",u),kt(f,"SID","null"),C.T=!0,No(C,f,null)):No(C,f,u),this.G=2}}else this.G==3&&(o?Fc(this,o):this.i.length==0||yc(this.h)||Fc(this))};function Fc(o,u){var f;u?f=u.l:f=o.U++;const _=nn(o.I);kt(_,"SID",o.K),kt(_,"RID",f),kt(_,"AID",o.T),is(o,_),o.m&&o.o&&Bo(_,o.m,o.o),f=new wn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Uc(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Uo(o.h,f),No(f,_,u)}function is(o,u){o.H&&gt(o.H,function(f,_){kt(u,_,f)}),o.l&&wc({},function(f,_){kt(u,_,f)})}function Uc(o,u,f){f=Math.min(o.i.length,f);var _=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let x=-1;for(;;){const K=["count="+f];x==-1?0<f?(x=C[0].g,K.push("ofs="+x)):x=0:K.push("ofs="+x);let Pt=!0;for(let Yt=0;Yt<f;Yt++){let wt=C[Yt].g;const ie=C[Yt].map;if(wt-=x,0>wt)x=Math.max(0,C[Yt].g-100),Pt=!1;else try{qm(ie,K,"req"+wt+"_")}catch{_&&_(ie)}}if(Pt){_=K.join("&");break t}}}return o=o.i.splice(0,f),u.D=o,_}function Bc(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;_t||Fe(),dt||(_t(),dt=!0),we.add(u,o),o.v=0}}function jo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Yr(m(o.Fa,o),qc(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,$c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Yr(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,me(10),fi(this),$c(this))};function qo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function $c(o){o.g=new wn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=nn(o.qa);kt(u,"RID","rpc"),kt(u,"SID",o.K),kt(u,"AID",o.T),kt(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&kt(u,"TO",o.ja),kt(u,"TYPE","xmlhttp"),is(o,u),o.m&&o.o&&Bo(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=li(nn(u)),f.m=null,f.P=!0,pc(f,o)}e.Za=function(){this.C!=null&&(this.C=null,fi(this),jo(this),me(19))};function pi(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function jc(o,u){var f=null;if(o.g==u){pi(o),qo(o),o.g=null;var _=2}else if(Fo(o.h,u))f=u.D,Ec(o.h,u),_=1;else return;if(o.G!=0){if(u.o)if(_==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;_=ni(),ht(_,new uc(_,f)),di(o)}else Bc(o);else if(C=u.s,C==3||C==0&&0<u.X||!(_==1&&Gm(o,u)||_==2&&jo(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),C){case 1:Kn(o,5);break;case 4:Kn(o,10);break;case 3:Kn(o,6);break;default:Kn(o,2)}}}function qc(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function Kn(o,u){if(o.j.info("Error code "+u),u==2){var f=m(o.fb,o),_=o.Xa;const C=!_;_=new Hn(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||oi(_,"https"),li(_),C?Bm(_.toString(),f):$m(_.toString(),f)}else me(2);o.G=0,o.l&&o.l.sa(u),Hc(o),Lc(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function Hc(o){if(o.G=0,o.ka=[],o.l){const u=Tc(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Kc(o,u,f){var _=f instanceof Hn?nn(f):new Hn(f);if(_.g!="")u&&(_.g=u+"."+_.g),ai(_,_.s);else{var C=l.location;_=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var x=new Hn(null);_&&oi(x,_),u&&(x.g=u),C&&ai(x,C),f&&(x.l=f),_=x}return f=o.D,u=o.ya,f&&u&&kt(_,f,u),kt(_,"VER",o.la),is(o,_),_}function zc(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Bt(new ci({eb:f})):new Bt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}e=Gc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function mi(){}mi.prototype.g=function(o,u){return new Ie(o,u)};function Ie(o,u){st.call(this),this.g=new Mc(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!$(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!$(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new pr(this)}b(Ie,st),Ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){$o(this.g)},Ie.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Qt(o),o=f);u.i.push(new xm(u.Ya++,o)),u.G==3&&di(u)},Ie.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,Ie.aa.N.call(this)};function Wc(o){Vo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}b(Wc,Vo);function Qc(){Do.call(this),this.status=1}b(Qc,Do);function pr(o){this.g=o}b(pr,Gc),pr.prototype.ua=function(){ht(this.g,"a")},pr.prototype.ta=function(o){ht(this.g,new Wc(o))},pr.prototype.sa=function(o){ht(this.g,new Qc)},pr.prototype.ra=function(){ht(this.g,"b")},mi.prototype.createWebChannel=mi.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,Fd=function(){return new mi},Ld=function(){return ni()},Md=jn,Na={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,Pi=ri,hc.COMPLETE="complete",Nd=hc,oc.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",st.prototype.listen=st.prototype.K,hs=oc,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,kd=Bt}).apply(typeof Ei<"u"?Ei:typeof self<"u"?self:typeof window<"u"?window:{});const nh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}le.UNAUTHENTICATED=new le(null),le.GOOGLE_CREDENTIALS=new le("google-credentials-uid"),le.FIRST_PARTY=new le("first-party-uid"),le.MOCK_USER=new le("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new _l("@firebase/firestore");function cs(){return rr.logLevel}function tt(e,...t){if(rr.logLevel<=Et.DEBUG){const n=t.map(vl);rr.debug(`Firestore (${jr}): ${e}`,...n)}}function _n(e,...t){if(rr.logLevel<=Et.ERROR){const n=t.map(vl);rr.error(`Firestore (${jr}): ${e}`,...n)}}function Nr(e,...t){if(rr.logLevel<=Et.WARN){const n=t.map(vl);rr.warn(`Firestore (${jr}): ${e}`,...n)}}function vl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e="Unexpected state"){const t=`FIRESTORE (${jr}) INTERNAL ASSERTION FAILED: `+e;throw _n(t),new Error(t)}function St(e,t){e||at()}function ct(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends $n{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(le.UNAUTHENTICATED))}shutdown(){}}class aT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lT{constructor(t){this.t=t,this.currentUser=le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){St(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new nr,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new nr)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string"),new Ud(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string"),new le(t)}}class cT{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uT{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new cT(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(le.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fT{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){St(this.o===void 0);const r=i=>{i.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,tt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(St(typeof n.token=="string"),this.R=n.token,new hT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=dT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function It(e,t){return e<t?-1:e>t?1:0}function Mr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new J(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new J(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return zt.fromMillis(Date.now())}static fromDate(t){return zt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new zt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?It(this.nanoseconds,t.nanoseconds):It(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new lt(t)}static min(){return new lt(new zt(0,0))}static max(){return new lt(new zt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n,r){n===void 0?n=0:n>t.length&&at(),r===void 0?r=t.length-n:r>t.length-n&&at(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ls.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ls?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Mt extends Ls{construct(t,n,r){return new Mt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new J(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Mt(n)}static emptyPath(){return new Mt([])}}const pT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Ls{construct(t,n,r){return new Zt(t,n,r)}static isValidIdentifier(t){return pT.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new J(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new J(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Mt.fromString(t))}static fromName(t){return new rt(Mt.fromString(t).popFirst(5))}static empty(){return new rt(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Mt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Mt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Mt(t.slice()))}}function mT(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=lt.fromTimestamp(r===1e9?new zt(n+1,0):new zt(n,r));return new Fn(s,rt.empty(),t)}function gT(e){return new Fn(e.readTime,e.key,-1)}class Fn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Fn(lt.min(),rt.empty(),-1)}static max(){return new Fn(lt.max(),rt.empty(),-1)}}function _T(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=rt.comparator(e.documentKey,t.documentKey),n!==0?n:It(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==yT)throw e;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,r)=>{n(t)})}static reject(t){return new U((n,r)=>{r(t)})}static waitFor(t){return new U((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=U.resolve(!1);for(const r of t)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new U((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(t[h]).next(d=>{a[h]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new U((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function ET(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ys(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}El.oe=-1;function _o(e){return e==null}function zi(e){return e===0&&1/e==-1/0}function TT(e){return typeof e=="number"&&Number.isInteger(e)&&!zi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $d(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t,n){this.comparator=t,this.root=n||Xt.EMPTY}insert(t,n){return new Ut(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(t){return new Ut(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ti(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ti(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ti(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ti(this.root,t,this.comparator,!0)}}class Ti{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Xt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const t=this.left.check();if(t!==this.right.check())throw at();return t+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Xt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.comparator=t,this.data=new Ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new sh(this.data.getIterator())}getIteratorFrom(t){return new sh(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof ee)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ee(this.comparator);return n.data=t,n}}class sh{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.fields=t,t.sort(Zt.comparator)}static empty(){return new Be([])}unionWith(t){let n=new ee(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Be(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Mr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jd("Invalid base64 string: "+i):i}}(t);return new ne(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new ne(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return It(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ne.EMPTY_BYTE_STRING=new ne("");const wT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Un(e){if(St(!!e),typeof e=="string"){let t=0;const n=wT.exec(e);if(St(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$t(e.seconds),nanos:$t(e.nanos)}}function $t(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function sr(e){return typeof e=="string"?ne.fromBase64String(e):ne.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wl(e){const t=e.mapValue.fields.__previous_value__;return Tl(t)?wl(t):t}function Fs(e){const t=Un(e.mapValue.fields.__local_write_time__.timestampValue);return new zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t,n,r,s,i,a,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Us{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Us("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Us&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={mapValue:{}};function ir(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tl(e)?4:bT(e)?9007199254740991:AT(e)?10:11:at()}function en(e,t){if(e===t)return!0;const n=ir(e);if(n!==ir(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fs(e).isEqual(Fs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Un(s.timestampValue),l=Un(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return sr(s.bytesValue).isEqual(sr(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return $t(s.geoPointValue.latitude)===$t(i.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $t(s.integerValue)===$t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=$t(s.doubleValue),l=$t(i.doubleValue);return a===l?zi(a)===zi(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Mr(e.arrayValue.values||[],t.arrayValue.values||[],en);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(rh(a)!==rh(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!en(a[c],l[c])))return!1;return!0}(e,t);default:return at()}}function Bs(e,t){return(e.values||[]).find(n=>en(n,t))!==void 0}function Lr(e,t){if(e===t)return 0;const n=ir(e),r=ir(t);if(n!==r)return It(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return It(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=$t(i.integerValue||i.doubleValue),c=$t(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return ih(e.timestampValue,t.timestampValue);case 4:return ih(Fs(e),Fs(t));case 5:return It(e.stringValue,t.stringValue);case 6:return function(i,a){const l=sr(i),c=sr(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=It(l[h],c[h]);if(d!==0)return d}return It(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=It($t(i.latitude),$t(a.latitude));return l!==0?l:It($t(i.longitude),$t(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return oh(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,h,d;const p=i.fields||{},m=a.fields||{},g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,V=It(((h=g==null?void 0:g.values)===null||h===void 0?void 0:h.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:oh(g,b)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===wi.mapValue&&a===wi.mapValue)return 0;if(i===wi.mapValue)return 1;if(a===wi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const m=It(c[p],d[p]);if(m!==0)return m;const g=Lr(l[c[p]],h[d[p]]);if(g!==0)return g}return It(c.length,d.length)}(e.mapValue,t.mapValue);default:throw at()}}function ih(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return It(e,t);const n=Un(e),r=Un(t),s=It(n.seconds,r.seconds);return s!==0?s:It(n.nanos,r.nanos)}function oh(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Lr(n[s],r[s]);if(i)return i}return It(n.length,r.length)}function Fr(e){return Ma(e)}function Ma(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Un(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return sr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ma(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ma(n.fields[a])}`;return s+"}"}(e.mapValue):at()}function ah(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function La(e){return!!e&&"integerValue"in e}function Il(e){return!!e&&"arrayValue"in e}function lh(e){return!!e&&"nullValue"in e}function ch(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ci(e){return!!e&&"mapValue"in e}function AT(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Is(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return qr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Is(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Is(e.arrayValue.values[n]);return t}return Object.assign({},e)}function bT(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.value=t}static empty(){return new Ne({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ci(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Is(n)}setAll(t){let n=Zt.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Is(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ci(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return en(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ci(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){qr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Ne(Is(this.value))}}function qd(e){const t=[];return qr(e.fields,(n,r)=>{const s=new Zt([n]);if(Ci(r)){const i=qd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)}),new Be(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ue(t,0,lt.min(),lt.min(),lt.min(),Ne.empty(),0)}static newFoundDocument(t,n,r,s){return new ue(t,1,n,lt.min(),r,s,0)}static newNoDocument(t,n){return new ue(t,2,n,lt.min(),lt.min(),Ne.empty(),0)}static newUnknownDocument(t,n){return new ue(t,3,n,lt.min(),lt.min(),Ne.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ne.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ne.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ue&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ue(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,n){this.position=t,this.inclusive=n}}function uh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=rt.comparator(rt.fromName(a.referenceValue),n.key):r=Lr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!en(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n="asc"){this.field=t,this.dir=n}}function RT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{}class Ht extends Hd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new PT(t,n,r):n==="array-contains"?new VT(t,r):n==="in"?new DT(t,r):n==="not-in"?new OT(t,r):n==="array-contains-any"?new kT(t,r):new Ht(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new CT(t,r):new xT(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lr(n,this.value)):n!==null&&ir(this.value)===ir(n)&&this.matchesComparison(Lr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends Hd{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new qe(t,n)}matches(t){return Kd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kd(e){return e.op==="and"}function zd(e){return ST(e)&&Kd(e)}function ST(e){for(const t of e.filters)if(t instanceof qe)return!1;return!0}function Fa(e){if(e instanceof Ht)return e.field.canonicalString()+e.op.toString()+Fr(e.value);if(zd(e))return e.filters.map(t=>Fa(t)).join(",");{const t=e.filters.map(n=>Fa(n)).join(",");return`${e.op}(${t})`}}function Gd(e,t){return e instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&en(r.value,s.value)}(e,t):e instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Gd(a,s.filters[l]),!0):!1}(e,t):void at()}function Wd(e){return e instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Fr(n.value)}`}(e):e instanceof qe?function(n){return n.op.toString()+" {"+n.getFilters().map(Wd).join(" ,")+"}"}(e):"Filter"}class PT extends Ht{constructor(t,n,r){super(t,n,r),this.key=rt.fromName(r.referenceValue)}matches(t){const n=rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class CT extends Ht{constructor(t,n){super(t,"in",n),this.keys=Qd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class xT extends Ht{constructor(t,n){super(t,"not-in",n),this.keys=Qd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Qd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>rt.fromName(r.referenceValue))}class VT extends Ht{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Il(n)&&Bs(n.arrayValue,this.value)}}class DT extends Ht{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Bs(this.value.arrayValue,n)}}class OT extends Ht{constructor(t,n){super(t,"not-in",n)}matches(t){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Bs(this.value.arrayValue,n)}}class kT extends Ht{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Il(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function fh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new NT(e,t,n,r,s,i,a)}function Al(e){const t=ct(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Fa(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_o(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Fr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Fr(r)).join(",")),t.ue=n}return t.ue}function bl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!RT(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Gd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hh(e.startAt,t.startAt)&&hh(e.endAt,t.endAt)}function Ua(e){return rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MT(e,t,n,r,s,i,a,l){return new Hr(e,t,n,r,s,i,a,l)}function Rl(e){return new Hr(e)}function dh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Yd(e){return e.collectionGroup!==null}function As(e){const t=ct(e);if(t.ce===null){t.ce=[];const n=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ee(Zt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.ce.push(new $s(i,r))}),n.has(Zt.keyField().canonicalString())||t.ce.push(new $s(Zt.keyField(),r))}return t.ce}function Xe(e){const t=ct(e);return t.le||(t.le=LT(t,As(e))),t.le}function LT(e,t){if(e.limitType==="F")return fh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $s(s.field,i)});const n=e.endAt?new Gi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gi(e.startAt.position,e.startAt.inclusive):null;return fh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ba(e,t){const n=e.filters.concat([t]);return new Hr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $a(e,t,n){return new Hr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yo(e,t){return bl(Xe(e),Xe(t))&&e.limitType===t.limitType}function Xd(e){return`${Al(Xe(e))}|lt:${e.limitType}`}function Er(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Wd(s)).join(", ")}]`),_o(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fr(s)).join(",")),`Target(${r})`}(Xe(e))}; limitType=${e.limitType})`}function vo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):rt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of As(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const h=uh(a,l,c);return a.inclusive?h<=0:h<0}(r.startAt,As(r),s)||r.endAt&&!function(a,l,c){const h=uh(a,l,c);return a.inclusive?h>=0:h>0}(r.endAt,As(r),s))}(e,t)}function FT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jd(e){return(t,n)=>{let r=!1;for(const s of As(e)){const i=UT(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function UT(e,t,n){const r=e.field.isKeyField()?rt.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Lr(c,h):at()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){qr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return $d(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Ut(rt.comparator);function yn(){return BT}const Zd=new Ut(rt.comparator);function fs(...e){let t=Zd;for(const n of e)t=t.insert(n.key,n);return t}function tp(e){let t=Zd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Jn(){return bs()}function ep(){return bs()}function bs(){return new Kr(e=>e.toString(),(e,t)=>e.isEqual(t))}const $T=new Ut(rt.comparator),jT=new ee(rt.comparator);function mt(...e){let t=jT;for(const n of e)t=t.add(n);return t}const qT=new ee(It);function HT(){return qT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zi(t)?"-0":t}}function np(e){return{integerValue:""+e}}function KT(e,t){return TT(t)?np(t):Sl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this._=void 0}}function zT(e,t,n){return e instanceof js?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tl(i)&&(i=wl(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,t):e instanceof qs?sp(e,t):e instanceof Hs?ip(e,t):function(s,i){const a=rp(s,i),l=ph(a)+ph(s.Pe);return La(a)&&La(s.Pe)?np(l):Sl(s.serializer,l)}(e,t)}function GT(e,t,n){return e instanceof qs?sp(e,t):e instanceof Hs?ip(e,t):n}function rp(e,t){return e instanceof Wi?function(r){return La(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class js extends Eo{}class qs extends Eo{constructor(t){super(),this.elements=t}}function sp(e,t){const n=op(t);for(const r of e.elements)n.some(s=>en(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hs extends Eo{constructor(t){super(),this.elements=t}}function ip(e,t){let n=op(t);for(const r of e.elements)n=n.filter(s=>!en(s,r));return{arrayValue:{values:n}}}class Wi extends Eo{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function ph(e){return $t(e.integerValue||e.doubleValue)}function op(e){return Il(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t,n){this.field=t,this.transform=n}}function QT(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof qs&&s instanceof qs||r instanceof Hs&&s instanceof Hs?Mr(r.elements,s.elements,en):r instanceof Wi&&s instanceof Wi?en(r.Pe,s.Pe):r instanceof js&&s instanceof js}(e.transform,t.transform)}class YT{constructor(t,n){this.version=t,this.transformResults=n}}class hn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new hn}static exists(t){return new hn(void 0,t)}static updateTime(t){return new hn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class To{}function ap(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new cp(e.key,hn.none()):new Xs(e.key,e.data,hn.none());{const n=e.data,r=Ne.empty();let s=new ee(Zt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new cr(e.key,r,new Be(s.toArray()),hn.none())}}function XT(e,t,n){e instanceof Xs?function(s,i,a){const l=s.value.clone(),c=gh(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof cr?function(s,i,a){if(!xi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=gh(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(lp(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Rs(e,t,n,r){return e instanceof Xs?function(i,a,l,c){if(!xi(i.precondition,a))return l;const h=i.value.clone(),d=_h(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,r):e instanceof cr?function(i,a,l,c){if(!xi(i.precondition,a))return l;const h=_h(i.fieldTransforms,c,a),d=a.data;return d.setAll(lp(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(i,a,l){return xi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function JT(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=rp(r.transform,s||null);i!=null&&(n===null&&(n=Ne.empty()),n.set(r.field,i))}return n||null}function mh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mr(r,s,(i,a)=>QT(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xs extends To{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cr extends To{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function gh(e,t,n){const r=new Map;St(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,GT(a,l,n[s]))}return r}function _h(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,zT(i,a,t))}return r}class cp extends To{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZT extends To{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&XT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Rs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Rs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=ep();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=ap(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),mt())}isEqual(t){return this.batchId===t.batchId&&Mr(this.mutations,t.mutations,(n,r)=>mh(n,r))&&Mr(this.baseMutations,t.baseMutations,(n,r)=>mh(n,r))}}class Pl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){St(t.mutations.length===r.length);let s=function(){return $T}();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Pl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,vt;function rw(e){switch(e){default:return at();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function up(e){if(e===void 0)return _n("GRPC error has no .code"),F.UNKNOWN;switch(e){case qt.OK:return F.OK;case qt.CANCELLED:return F.CANCELLED;case qt.UNKNOWN:return F.UNKNOWN;case qt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case qt.INTERNAL:return F.INTERNAL;case qt.UNAVAILABLE:return F.UNAVAILABLE;case qt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case qt.NOT_FOUND:return F.NOT_FOUND;case qt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case qt.ABORTED:return F.ABORTED;case qt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case qt.DATA_LOSS:return F.DATA_LOSS;default:return at()}}(vt=qt||(qt={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new er([4294967295,4294967295],0);function yh(e){const t=sw().encode(e),n=new Od;return n.update(t),new Uint8Array(n.digest())}function vh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new er([n,r],0),new er([s,i],0)]}class Cl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ds(`Invalid padding: ${n}`);if(r<0)throw new ds(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ds(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ds(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=er.fromNumber(this.Ie)}Ee(t,n,r){let s=t.add(n.multiply(er.fromNumber(r)));return s.compare(iw)===1&&(s=new er([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=yh(t),[r,s]=vh(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Cl(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.Ie===0)return;const n=yh(t),[r,s]=vh(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ds extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Js.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new wo(lt.min(),s,new Ut(It),yn(),mt())}}class Js{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Js(r,n,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n,r,s){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=s}}class hp{constructor(t,n){this.targetId=t,this.me=n}}class fp{constructor(t,n,r=ne.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Eh{constructor(){this.fe=0,this.ge=wh(),this.pe=ne.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=mt(),n=mt(),r=mt();return this.ge.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:at()}}),new Js(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=wh()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ow{constructor(t){this.Le=t,this.Be=new Map,this.ke=yn(),this.qe=Th(),this.Qe=new Ut(It)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:at()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(t){const n=t.targetId,r=t.me.count,s=this.Je(n);if(s){const i=s.target;if(Ua(i))if(r===0){const a=new rt(i.path);this.Ue(n,a,ue.newNoDocument(a,lt.min()))}else St(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(t),c=l?this.Xe(l,t,a):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=sr(r).toUint8Array()}catch(c){if(c instanceof jd)return Nr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Cl(a,s,i)}catch(c){return Nr(c instanceof ds?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(t){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Ua(l.target)){const c=new rt(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,ue.newNoDocument(c,t))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=mt();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(t));const s=new wo(t,n,this.Qe,this.ke,r);return this.ke=yn(),this.qe=Th(),this.Qe=new Ut(It),s}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Eh,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new ee(It),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||tt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Eh),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Th(){return new Ut(rt.comparator)}function wh(){return new Ut(rt.comparator)}const aw={asc:"ASCENDING",desc:"DESCENDING"},lw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cw={and:"AND",or:"OR"};class uw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ja(e,t){return e.useProto3Json||_o(t)?t:{value:t}}function Qi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hw(e,t){return Qi(e,t.toTimestamp())}function Je(e){return St(!!e),lt.fromTimestamp(function(n){const r=Un(n);return new zt(r.seconds,r.nanos)}(e))}function xl(e,t){return qa(e,t).canonicalString()}function qa(e,t){const n=function(s){return new Mt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function pp(e){const t=Mt.fromString(e);return St(vp(t)),t}function Ha(e,t){return xl(e.databaseId,t.path)}function ca(e,t){const n=pp(t);if(n.get(1)!==e.databaseId.projectId)throw new J(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new J(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rt(gp(n))}function mp(e,t){return xl(e.databaseId,t)}function fw(e){const t=pp(e);return t.length===4?Mt.emptyPath():gp(t)}function Ka(e){return new Mt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gp(e){return St(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Ih(e,t,n){return{name:Ha(e,t),fields:n.value.mapValue.fields}}function dw(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:at()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(St(d===void 0||typeof d=="string"),ne.fromBase64String(d||"")):(St(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ne.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?F.UNKNOWN:up(h.code);return new J(d,h.message||"")}(a);n=new fp(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ca(e,r.document.name),i=Je(r.document.updateTime),a=r.document.createTime?Je(r.document.createTime):lt.min(),l=new Ne({mapValue:{fields:r.document.fields}}),c=ue.newFoundDocument(s,i,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Vi(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ca(e,r.document),i=r.readTime?Je(r.readTime):lt.min(),a=ue.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Vi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ca(e,r.document),i=r.removedTargetIds||[];n=new Vi([],i,s,null)}else{if(!("filter"in t))return at();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new nw(s,i),l=r.targetId;n=new hp(l,a)}}return n}function pw(e,t){let n;if(t instanceof Xs)n={update:Ih(e,t.key,t.value)};else if(t instanceof cp)n={delete:Ha(e,t.key)};else if(t instanceof cr)n={update:Ih(e,t.key,t.data),updateMask:Iw(t.fieldMask)};else{if(!(t instanceof ZT))return at();n={verify:Ha(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof js)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw at()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:at()}(e,t.precondition)),n}function mw(e,t){return e&&e.length>0?(St(t!==void 0),e.map(n=>function(s,i){let a=s.updateTime?Je(s.updateTime):Je(i);return a.isEqual(lt.min())&&(a=Je(i)),new YT(a,s.transformResults||[])}(n,t))):[]}function gw(e,t){return{documents:[mp(e,t.path)]}}function _w(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mp(e,s);const i=function(h){if(h.length!==0)return yp(qe.create(h,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Tr(m.field),direction:Ew(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ja(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{_t:n,parent:s}}function yw(e){let t=fw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){St(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=_p(p);return m instanceof qe&&zd(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(b){return new $s(wr(b.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,_o(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,g=p.values||[];return new Gi(g,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,g=p.values||[];return new Gi(g,m)}(n.endAt)),MT(t,s,a,i,l,"F",c,h)}function vw(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function _p(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wr(n.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wr(n.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wr(n.unaryFilter.field);return Ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=wr(n.unaryFilter.field);return Ht.create(a,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(e):e.fieldFilter!==void 0?function(n){return Ht.create(wr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return qe.create(n.compositeFilter.filters.map(r=>_p(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return at()}}(n.compositeFilter.op))}(e):at()}function Ew(e){return aw[e]}function Tw(e){return lw[e]}function ww(e){return cw[e]}function Tr(e){return{fieldPath:e.canonicalString()}}function wr(e){return Zt.fromServerFormat(e.fieldPath)}function yp(e){return e instanceof Ht?function(n){if(n.op==="=="){if(ch(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NAN"}};if(lh(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ch(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NOT_NAN"}};if(lh(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tr(n.field),op:Tw(n.op),value:n.value}}}(e):e instanceof qe?function(n){const r=n.getFilters().map(s=>yp(s));return r.length===1?r[0]:{compositeFilter:{op:ww(n.op),filters:r}}}(e):at()}function Iw(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function vp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,n,r,s,i=lt.min(),a=lt.min(),l=ne.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new xn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t){this.ct=t}}function bw(e){const t=yw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?$a(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.un=new Sw}addToCollectionParentIndex(t,n){return this.un.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(Fn.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(Fn.min())}updateCollectionGroup(t,n,r){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class Sw{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new ee(Mt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new ee(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ur(0)}static kn(){return new Ur(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.changes=new Kr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ue.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&Rs(r.mutation,s,Be.empty(),zt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,mt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=mt()){const s=Jn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=fs();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=Jn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,mt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=yn();const a=bs(),l=function(){return bs()}();return n.forEach((c,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof cr)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Rs(d.mutation,h,d.mutation.getFieldMask(),zt.now())):a.set(h.key,Be.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var p;return l.set(h,new Cw(d,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,n){const r=bs();let s=new Ut((a,l)=>a-l),i=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let d=r.get(c)||Be.empty();d=l.applyToLocalView(h,d),r.set(c,d);const p=(s.get(l.batchId)||mt()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=ep();d.forEach(m=>{if(!i.has(m)){const g=ap(n.get(m),r.get(m));g!==null&&p.set(m,g),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return rt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Yd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):U.resolve(Jn());let l=-1,c=i;return a.next(h=>U.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(t,h,i)).next(()=>this.computeViews(t,c,h,mt())).next(d=>({batchId:l,changes:tp(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new rt(n)).next(r=>{let s=fs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=fs();return this.indexManager.getCollectionParents(t,i).next(l=>U.forEach(l,c=>{const h=function(p,m){return new Hr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ue.newInvalidDocument(d)))});let l=fs();return a.forEach((c,h)=>{const d=i.get(c);d!==void 0&&Rs(d.mutation,h,Be.empty(),zt.now()),vo(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Je(s.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:bw(s.bundledQuery),readTime:Je(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.overlays=new Ut(rt.comparator),this.Ir=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Jn();return U.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),U.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(t,n,r){const s=Jn(),i=n.length+1,a=new rt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ut((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Jn(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Jn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return U.resolve(l)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ew(n,r));let i=this.Ir.get(n);i===void 0&&(i=mt(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.sessionToken=ne.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.Tr=new ee(Gt.Er),this.dr=new ee(Gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){const r=new Gt(t,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Vr(new Gt(t,n))}mr(t,n){t.forEach(r=>this.removeReference(r,n))}gr(t){const n=new rt(new Mt([])),r=new Gt(n,t),s=new Gt(n,t+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const n=new rt(new Mt([])),r=new Gt(n,t),s=new Gt(n,t+1);let i=mt();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Gt(t,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Gt{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return rt.comparator(t.key,n.key)||It(t.wr,n.wr)}static Ar(t,n){return It(t.wr,n.wr)||rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ee(Gt.Er)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new tw(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Gt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(t,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Gt(n,0),s=new Gt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ee(It);return n.forEach(s=>{const i=new Gt(s,0),a=new Gt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;rt.isDocumentKey(i)||(i=i.child(""));const a=new Gt(new rt(i),0);let l=new ee(It);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},a),U.resolve(this.Cr(l))}Cr(t){const n=[];return t.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){St(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Gt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,n){const r=new Gt(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t){this.Mr=t,this.docs=function(){return new Ut(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ue.newInvalidDocument(n))}getEntries(t,n){let r=yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ue.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=yn();const a=n.path,l=new rt(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||_T(gT(d),r)<=0||(s.has(d.key)||vo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(t,n,r,s){at()}Or(t,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Mw(this)}getSize(t){return U.resolve(this.size)}}class Mw extends Pw{constructor(t){super(),this.cr=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(t,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t){this.persistence=t,this.Nr=new Kr(n=>Al(n),bl),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vl,this.targetCount=0,this.kr=Ur.Bn()}forEachTarget(t,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(t){this.Nr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.kr=new Ur(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.Kn(n),U.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(t,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(t,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(t,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n){this.qr={},this.overlays={},this.Qr=new El(0),this.Kr=!1,this.Kr=!0,this.$r=new Ow,this.referenceDelegate=t(this),this.Ur=new Lw(this),this.indexManager=new Rw,this.remoteDocumentCache=function(s){return new Nw(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Aw(n),this.Gr=new Vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Dw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.qr[t.toKey()];return r||(r=new kw(n,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,r){tt("MemoryPersistence","Starting transaction:",t);const s=new Uw(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(t,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,n)))}}class Uw extends vT{constructor(t){super(),this.currentSequenceNumber=t}}class Dl{constructor(t){this.persistence=t,this.Jr=new Vl,this.Yr=null}static Zr(t){return new Dl(t)}get Xr(){if(this.Yr)return this.Yr;throw at()}addReference(t,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(t,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=rt.fromPath(r);return this.ei(t,s).next(i=>{i||n.removeEntry(s,lt.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(t,n){let r=mt(),s=mt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ol(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Hv()?8:ET($v())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.Yi(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Bw;return this.Xi(t,n,a).next(l=>{if(i.result=l,this.zi)return this.es(t,n,a,l.size)})}).next(()=>i.result)}es(t,n,r,s){return r.documentReadCount<this.ji?(cs()<=Et.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Er(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(cs()<=Et.DEBUG&&tt("QueryEngine","Query:",Er(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(cs()<=Et.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Er(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Xe(n))):U.resolve())}Yi(t,n){if(dh(n))return U.resolve(null);let r=Xe(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=$a(n,null,"F"),r=Xe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=mt(...i);return this.Ji.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,a,c.readTime)?this.Yi(t,$a(n,null,"F")):this.rs(t,h,n,c)}))})))}Zi(t,n,r,s){return dh(n)||s.isEqual(lt.min())?U.resolve(null):this.Ji.getDocuments(t,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?U.resolve(null):(cs()<=Et.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Er(n)),this.rs(t,a,n,mT(s,-1)).next(l=>l))})}ts(t,n){let r=new ee(Jd(t));return n.forEach((s,i)=>{vo(t,i)&&(r=r.add(i))}),r}ns(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(t,n,r){return cs()<=Et.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Er(n)),this.Ji.getDocumentsMatchingQuery(t,n,Fn.min(),r)}rs(t,n,r,s){return this.Ji.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t,n,r,s){this.persistence=t,this.ss=n,this.serializer=s,this.os=new Ut(It),this._s=new Kr(i=>Al(i),bl),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}}function qw(e,t,n,r){return new jw(e,t,n,r)}async function Ep(e,t){const n=ct(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=mt();for(const h of s){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function Hw(e,t){const n=ct(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,d){const p=h.batch,m=p.keys();let g=U.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(c,b)).next(V=>{const O=h.docVersions.get(b);St(O!==null),V.version.compareTo(O)<0&&(p.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=mt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function Tp(e){const t=ct(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function Kw(e,t){const n=ct(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];t.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let g=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?g=g.withResumeToken(ne.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(p,g),function(V,O,q){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(m,g,d)&&l.push(n.Ur.updateTargetData(i,g))});let c=yn(),h=mt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(zw(i,a,t.documentUpdates).next(d=>{c=d.Ps,h=d.Is})),!r.isEqual(lt.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return U.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function zw(e,t,n){let r=mt(),s=mt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=yn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(lt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):tt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:a,Is:s}})}function Gw(e,t){const n=ct(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Ww(e,t){const n=ct(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,t).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new xn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(t,r.targetId)),r})}async function za(e,t,n){const r=ct(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ys(a))throw a;tt("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function Ah(e,t,n){const r=ct(e);let s=lt.min(),i=mt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,d){const p=ct(c),m=p._s.get(d);return m!==void 0?U.resolve(p.os.get(m)):p.Ur.getTargetData(h,d)}(r,a,Xe(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,t,n?s:lt.min(),n?i:mt())).next(l=>(Qw(r,FT(t),l),{documents:l,Ts:i})))}function Qw(e,t,n){let r=e.us.get(t)||lt.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.us.set(t,r)}class bh{constructor(){this.activeTargetIds=HT()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Yw{constructor(){this.so=new bh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,r){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new bh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii=null;function ua(){return Ii===null?Ii=function(){return 268435456+Math.round(2147483648*Math.random())}():Ii++,"0x"+Ii.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="WebChannelConnection";class tI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=ua(),c=this.xo(n,r.toUriEncodedString());tt("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,c,h,s).then(d=>(tt("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw Nr("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=Jw[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,r,s){const i=ua();return new Promise((a,l)=>{const c=new kd;c.setWithCredentials(!0),c.listenOnce(Nd.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Pi.NO_ERROR:const d=c.getResponseJson();tt(ae,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(d)),a(d);break;case Pi.TIMEOUT:tt(ae,`RPC '${t}' ${i} timed out`),l(new J(F.DEADLINE_EXCEEDED,"Request time out"));break;case Pi.HTTP_ERROR:const p=c.getStatus();if(tt(ae,`RPC '${t}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const b=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(q)>=0?q:F.UNKNOWN}(g.status);l(new J(b,g.message))}else l(new J(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new J(F.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{tt(ae,`RPC '${t}' ${i} completed.`)}});const h=JSON.stringify(s);tt(ae,`RPC '${t}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(t,n,r){const s=ua(),i=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Fd(),l=Ld(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");tt(ae,`Creating RPC '${t}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);let m=!1,g=!1;const b=new Zw({Io:O=>{g?tt(ae,`Not sending because RPC '${t}' stream ${s} is closed:`,O):(m||(tt(ae,`Opening RPC '${t}' stream ${s} transport.`),p.open(),m=!0),tt(ae,`RPC '${t}' stream ${s} sending:`,O),p.send(O))},To:()=>p.close()}),V=(O,q,$)=>{O.listen(q,z=>{try{$(z)}catch(G){setTimeout(()=>{throw G},0)}})};return V(p,hs.EventType.OPEN,()=>{g||(tt(ae,`RPC '${t}' stream ${s} transport opened.`),b.yo())}),V(p,hs.EventType.CLOSE,()=>{g||(g=!0,tt(ae,`RPC '${t}' stream ${s} transport closed`),b.So())}),V(p,hs.EventType.ERROR,O=>{g||(g=!0,Nr(ae,`RPC '${t}' stream ${s} transport errored:`,O),b.So(new J(F.UNAVAILABLE,"The operation could not be completed")))}),V(p,hs.EventType.MESSAGE,O=>{var q;if(!g){const $=O.data[0];St(!!$);const z=$,G=z.error||((q=z[0])===null||q===void 0?void 0:q.error);if(G){tt(ae,`RPC '${t}' stream ${s} received error:`,G);const ft=G.status;let gt=function(w){const A=qt[w];if(A!==void 0)return up(A)}(ft),I=G.message;gt===void 0&&(gt=F.INTERNAL,I="Unknown error status: "+ft+" with message "+G.message),g=!0,b.So(new J(gt,I)),p.close()}else tt(ae,`RPC '${t}' stream ${s} received:`,$),b.bo($)}}),V(l,Md.STAT_EVENT,O=>{O.stat===Na.PROXY?tt(ae,`RPC '${t}' stream ${s} detected buffering proxy`):O.stat===Na.NOPROXY&&tt(ae,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function ha(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(e){return new uw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,n,r=1e3,s=1.5,i=6e4){this.ui=t,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&tt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t,n,r,s,i,a,l,c){this.ui=t,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wp(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(_n(n.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(n)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{t(()=>{const s=new J(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(t,n){const r=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return tt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eI extends Ip{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const n=dw(this.serializer,t),r=function(i){if(!("targetChange"in i))return lt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?lt.min():a.readTime?Je(a.readTime):lt.min()}(t);return this.listener.d_(n,r)}A_(t){const n={};n.database=Ka(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Ua(c)?{documents:gw(i,c)}:{query:_w(i,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=dp(i,a.resumeToken);const h=ja(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(lt.min())>0){l.readTime=Qi(i,a.snapshotVersion.toTimestamp());const h=ja(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const r=vw(this.serializer,t);r&&(n.labels=r),this.a_(n)}R_(t){const n={};n.database=Ka(this.serializer),n.removeTarget=t,this.a_(n)}}class nI extends Ip{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return St(!!t.streamToken),this.lastStreamToken=t.streamToken,St(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){St(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const n=mw(t.writeResults,t.commitTime),r=Je(t.commitTime);return this.listener.g_(r,n)}p_(){const t={};t.database=Ka(this.serializer),this.a_(t)}m_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>pw(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(t,qa(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(F.UNKNOWN,i.toString())})}Lo(t,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(t,qa(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_n(n),this.D_=!1):tt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{ur(this)&&(tt("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ct(c);h.L_.add(4),await Zs(h),h.q_.set("Unknown"),h.L_.delete(4),await Ao(h)}(this))})}),this.q_=new sI(r,s)}}async function Ao(e){if(ur(e))for(const t of e.B_)await t(!0)}async function Zs(e){for(const t of e.B_)await t(!1)}function Ap(e,t){const n=ct(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Ll(n)?Ml(n):zr(n).r_()&&Nl(n,t))}function kl(e,t){const n=ct(e),r=zr(n);n.N_.delete(t),r.r_()&&bp(n,t),n.N_.size===0&&(r.r_()?r.o_():ur(n)&&n.q_.set("Unknown"))}function Nl(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(lt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zr(e).A_(t)}function bp(e,t){e.Q_.xe(t),zr(e).R_(t)}function Ml(e){e.Q_=new ow({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),zr(e).start(),e.q_.v_()}function Ll(e){return ur(e)&&!zr(e).n_()&&e.N_.size>0}function ur(e){return ct(e).L_.size===0}function Rp(e){e.Q_=void 0}async function oI(e){e.q_.set("Online")}async function aI(e){e.N_.forEach((t,n)=>{Nl(e,t)})}async function lI(e,t){Rp(e),Ll(e)?(e.q_.M_(t),Ml(e)):e.q_.set("Unknown")}async function cI(e,t,n){if(e.q_.set("Online"),t instanceof fp&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(e,t)}catch(r){tt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Yi(e,r)}else if(t instanceof Vi?e.Q_.Ke(t):t instanceof hp?e.Q_.He(t):e.Q_.We(t),!n.isEqual(lt.min()))try{const r=await Tp(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.N_.get(h);d&&i.N_.set(h,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const d=i.N_.get(c);if(!d)return;i.N_.set(c,d.withResumeToken(ne.EMPTY_BYTE_STRING,d.snapshotVersion)),bp(i,c);const p=new xn(d.target,c,h,d.sequenceNumber);Nl(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){tt("RemoteStore","Failed to raise snapshot:",r),await Yi(e,r)}}async function Yi(e,t,n){if(!Ys(t))throw t;e.L_.add(1),await Zs(e),e.q_.set("Offline"),n||(n=()=>Tp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tt("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ao(e)})}function Sp(e,t){return t().catch(n=>Yi(e,n,t))}async function bo(e){const t=ct(e),n=Bn(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;uI(t);)try{const s=await Gw(t.localStore,r);if(s===null){t.O_.length===0&&n.o_();break}r=s.batchId,hI(t,s)}catch(s){await Yi(t,s)}Pp(t)&&Cp(t)}function uI(e){return ur(e)&&e.O_.length<10}function hI(e,t){e.O_.push(t);const n=Bn(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Pp(e){return ur(e)&&!Bn(e).n_()&&e.O_.length>0}function Cp(e){Bn(e).start()}async function fI(e){Bn(e).p_()}async function dI(e){const t=Bn(e);for(const n of e.O_)t.m_(n.mutations)}async function pI(e,t,n){const r=e.O_.shift(),s=Pl.from(r,t,n);await Sp(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await bo(e)}async function mI(e,t){t&&Bn(e).V_&&await async function(r,s){if(function(a){return rw(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();Bn(r).s_(),await Sp(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bo(r)}}(e,t),Pp(e)&&Cp(e)}async function Sh(e,t){const n=ct(e);n.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const r=ur(n);n.L_.add(3),await Zs(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ao(n)}async function gI(e,t){const n=ct(e);t?(n.L_.delete(2),await Ao(n)):t||(n.L_.add(2),await Zs(n),n.q_.set("Unknown"))}function zr(e){return e.K_||(e.K_=function(n,r,s){const i=ct(n);return i.w_(),new eI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Eo:oI.bind(null,e),Ro:aI.bind(null,e),mo:lI.bind(null,e),d_:cI.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Ll(e)?Ml(e):e.q_.set("Unknown")):(await e.K_.stop(),Rp(e))})),e.K_}function Bn(e){return e.U_||(e.U_=function(n,r,s){const i=ct(n);return i.w_(),new nI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fI.bind(null,e),mo:mI.bind(null,e),f_:dI.bind(null,e),g_:pI.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await bo(e)):(await e.U_.stop(),e.O_.length>0&&(tt("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Fl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ul(e,t){if(_n("AsyncQueue",`${t}: ${e}`),Ys(e))return new J(F.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||rt.comparator(n.key,r.key):(n,r)=>rt.comparator(n.key,r.key),this.keyedMap=fs(),this.sortedSet=new Ut(this.comparator)}static emptySet(t){return new Vr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Vr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Vr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.W_=new Ut(rt.comparator)}track(t){const n=t.doc.key,r=this.W_.get(n);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(n,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(n):t.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):at():this.W_=this.W_.insert(n,t)}G_(){const t=[];return this.W_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Br{constructor(t,n,r,s,i,a,l,c,h){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Br(t,n,Vr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class yI{constructor(){this.queries=Ch(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ct(n),i=s.queries;s.queries=Ch(),i.forEach((a,l)=>{for(const c of l.j_)c.onError(r)})})(this,new J(F.ABORTED,"Firestore shutting down"))}}function Ch(){return new Kr(e=>Xd(e),yo)}async function vI(e,t){const n=ct(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new _I,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ul(a,`Initialization of query '${Er(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Bl(n)}async function EI(e,t){const n=ct(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(t);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TI(e,t){const n=ct(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Bl(n)}function wI(e,t,n){const r=ct(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Bl(e){e.Y_.forEach(t=>{t.next()})}var Ga,xh;(xh=Ga||(Ga={})).ea="default",xh.Cache="cache";class II{constructor(t,n,r){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Br(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=Br.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Ga.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t){this.key=t}}class Vp{constructor(t){this.key=t}}class AI{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=mt(),this.mutatedKeys=mt(),this.Aa=Jd(t),this.Ra=new Vr(this.Aa)}get Va(){return this.Ta}ma(t,n){const r=n?n.fa:new Ph,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,p)=>{const m=s.get(d),g=vo(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),V=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let O=!1;m&&g?m.data.isEqual(g.data)?b!==V&&(r.track({type:3,doc:g}),O=!0):this.ga(m,g)||(r.track({type:2,doc:g}),O=!0,(c&&this.Aa(g,c)>0||h&&this.Aa(g,h)<0)&&(l=!0)):!m&&g?(r.track({type:0,doc:g}),O=!0):m&&!g&&(r.track({type:1,doc:m}),O=!0,(c||h)&&(l=!0)),O&&(g?(a=a.add(g),i=V?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const a=t.fa.G_();a.sort((d,p)=>function(g,b){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return V(g)-V(b)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,a.length!==0||h?{snapshot:new Br(this.query,t.Ra,i,a,t.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ph,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=mt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return t.forEach(r=>{this.da.has(r)||n.push(new Vp(r))}),this.da.forEach(r=>{t.has(r)||n.push(new xp(r))}),n}ba(t){this.Ta=t.Ts,this.da=mt();const n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return Br.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class RI{constructor(t){this.key=t,this.va=!1}}class SI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Kr(l=>Xd(l),yo),this.Ma=new Map,this.xa=new Set,this.Oa=new Ut(rt.comparator),this.Na=new Map,this.La=new Vl,this.Ba={},this.ka=new Map,this.qa=Ur.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function PI(e,t,n=!0){const r=Lp(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Dp(r,t,n,!0),s}async function CI(e,t){const n=Lp(e);await Dp(n,t,!0,!1)}async function Dp(e,t,n,r){const s=await Ww(e.localStore,Xe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await xI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Ap(e.remoteStore,s),l}async function xI(e,t,n,r,s){e.Ka=(p,m,g)=>async function(V,O,q,$){let z=O.view.ma(q);z.ns&&(z=await Ah(V.localStore,O.query,!1).then(({documents:I})=>O.view.ma(I,z)));const G=$&&$.targetChanges.get(O.targetId),ft=$&&$.targetMismatches.get(O.targetId)!=null,gt=O.view.applyChanges(z,V.isPrimaryClient,G,ft);return Dh(V,O.targetId,gt.wa),gt.snapshot}(e,p,m,g);const i=await Ah(e.localStore,t,!0),a=new AI(t,i.Ts),l=a.ma(i.documents),c=Js.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,c);Dh(e,n,h.wa);const d=new bI(t,n,a);return e.Fa.set(t,d),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),h.snapshot}async function VI(e,t,n){const r=ct(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!yo(a,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await za(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&kl(r.remoteStore,s.targetId),Wa(r,s.targetId)}).catch(Qs)):(Wa(r,s.targetId),await za(r.localStore,s.targetId,!0))}async function DI(e,t){const n=ct(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kl(n.remoteStore,r.targetId))}async function OI(e,t,n){const r=BI(e);try{const s=await function(a,l){const c=ct(a),h=zt.now(),d=l.reduce((g,b)=>g.add(b.key),mt());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=yn(),V=mt();return c.cs.getEntries(g,d).next(O=>{b=O,b.forEach((q,$)=>{$.isValidDocument()||(V=V.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(O=>{p=O;const q=[];for(const $ of l){const z=JT($,p.get($.key).overlayedDocument);z!=null&&q.push(new cr($.key,z,qd(z.value.mapValue),hn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,h,q,l)}).next(O=>{m=O;const q=O.applyToLocalDocumentSet(p,V);return c.documentOverlayCache.saveOverlays(g,O.batchId,q)})}).then(()=>({batchId:m.batchId,changes:tp(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ut(It)),h=h.insert(l,c),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await ti(r,s.changes),await bo(r.remoteStore)}catch(s){const i=Ul(s,"Failed to persist write");n.reject(i)}}async function Op(e,t){const n=ct(e);try{const r=await Kw(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(St(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?St(a.va):s.removedDocuments.size>0&&(St(a.va),a.va=!1))}),await ti(n,r,t)}catch(r){await Qs(r)}}function Vh(e,t,n){const r=ct(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=ct(a);c.onlineState=l;let h=!1;c.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(l)&&(h=!0)}),h&&Bl(c)}(r.eventManager,t),s.length&&r.Ca.d_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function kI(e,t,n){const r=ct(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let a=new Ut(rt.comparator);a=a.insert(i,ue.newNoDocument(i,lt.min()));const l=mt().add(i),c=new wo(lt.min(),new Map,new Ut(It),a,l);await Op(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(t),$l(r)}else await za(r.localStore,t,!1).then(()=>Wa(r,t,n)).catch(Qs)}async function NI(e,t){const n=ct(e),r=t.batch.batchId;try{const s=await Hw(n.localStore,t);Np(n,r,null),kp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ti(n,s)}catch(s){await Qs(s)}}async function MI(e,t,n){const r=ct(e);try{const s=await function(a,l){const c=ct(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(St(p!==null),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(r.localStore,t);Np(r,t,n),kp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ti(r,s)}catch(s){await Qs(s)}}function kp(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function Np(e,t,n){const r=ct(e);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function Wa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(r=>{e.La.containsKey(r)||Mp(e,r)})}function Mp(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);n!==null&&(kl(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),$l(e))}function Dh(e,t,n){for(const r of n)r instanceof xp?(e.La.addReference(r.key,t),LI(e,r)):r instanceof Vp?(tt("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Mp(e,r.key)):at()}function LI(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(tt("SyncEngine","New document in limbo: "+n),e.xa.add(r),$l(e))}function $l(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new rt(Mt.fromString(t)),r=e.qa.next();e.Na.set(r,new RI(n)),e.Oa=e.Oa.insert(n,r),Ap(e.remoteStore,new xn(Xe(Rl(n.path)),r,"TargetPurposeLimboResolution",El.oe))}}async function ti(e,t,n){const r=ct(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{a.push(r.Ka(c,t,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Ol.Wi(c.targetId,h);i.push(p)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(c,h){const d=ct(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(h,m=>U.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>U.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Ys(p))throw p;tt("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const g=d.os.get(m),b=g.snapshotVersion,V=g.withLastLimboFreeSnapshotVersion(b);d.os=d.os.insert(m,V)}}}(r.localStore,i))}async function FI(e,t){const n=ct(e);if(!n.currentUser.isEqual(t)){tt("SyncEngine","User change. New user:",t.toKey());const r=await Ep(n.localStore,t);n.currentUser=t,function(i,a){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new J(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ti(n,r.hs)}}function UI(e,t){const n=ct(e),r=n.Na.get(t);if(r&&r.va)return mt().add(r.key);{let s=mt();const i=n.Ma.get(t);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function Lp(e){const t=ct(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Op.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=UI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kI.bind(null,t),t.Ca.d_=TI.bind(null,t.eventManager),t.Ca.$a=wI.bind(null,t.eventManager),t}function BI(e){const t=ct(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=NI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=MI.bind(null,t),t}class Xi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Io(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,n){return null}Ha(t,n){return null}za(t){return qw(this.persistence,new $w,t.initialUser,this.serializer)}Ga(t){return new Fw(Dl.Zr,this.serializer)}Wa(t){return new Yw}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xi.provider={build:()=>new Xi};class Qa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FI.bind(null,this.syncEngine),await gI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new yI}()}createDatastore(t){const n=Io(t.databaseInfo.databaseId),r=function(i){return new tI(i)}(t.databaseInfo);return function(i,a,l,c){return new rI(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new iI(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Vh(this.syncEngine,n,0),function(){return Rh.D()?new Rh:new Xw}())}createSyncEngine(t,n){return function(s,i,a,l,c,h,d){const p=new SI(s,i,a,l,c,h);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=ct(s);tt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Zs(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qa.provider={build:()=>new Qa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):_n("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=le.UNAUTHENTICATED,this.clientId=Bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{tt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(tt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ul(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function fa(e,t){e.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ep(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Oh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qI(e);tt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Sh(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Sh(t.remoteStore,s)),e._onlineComponents=t}async function qI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tt("FirestoreClient","Using user provided OfflineComponentProvider");try{await fa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Nr("Error using user provided cache. Falling back to memory cache: "+n),await fa(e,new Xi)}}else tt("FirestoreClient","Using default OfflineComponentProvider"),await fa(e,new Xi);return e._offlineComponents}async function Fp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tt("FirestoreClient","Using user provided OnlineComponentProvider"),await Oh(e,e._uninitializedComponentsProvider._online)):(tt("FirestoreClient","Using default OnlineComponentProvider"),await Oh(e,new Qa))),e._onlineComponents}function HI(e){return Fp(e).then(t=>t.syncEngine)}async function kh(e){const t=await Fp(e),n=t.eventManager;return n.onListen=PI.bind(null,t.syncEngine),n.onUnlisten=VI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=CI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=DI.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e,t,n){if(!n)throw new J(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KI(e,t,n,r){if(t===!0&&r===!0)throw new J(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Mh(e){if(!rt.isDocumentKey(e))throw new J(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Lh(e){if(rt.isDocumentKey(e))throw new J(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ro(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":at()}function Ss(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new J(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ro(e);throw new J(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new J(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new J(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Up((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class So{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new J(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fh(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oT;switch(r.type){case"firstParty":return new uT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nh.get(n);r&&(tt("ComponentProvider","Removing Datastore"),Nh.delete(n),r.terminate())}(this),Promise.resolve()}}function zI(e,t,n,r={}){var s;const i=(e=Ss(e,So))._getSettings(),a=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=le.MOCK_USER;else{l=Bv(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new J(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new le(h)}e._authCredentials=new aT(new Ud(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new hr(this.firestore,t,this._query)}}class Ce{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}}class kn extends hr{constructor(t,n,r){super(t,n,Rl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new rt(t))}withConverter(t){return new kn(this.firestore,t,this._path)}}function $p(e,t,...n){if(e=pn(e),Bp("collection","path",t),e instanceof So){const r=Mt.fromString(t,...n);return Lh(r),new kn(e,null,r)}{if(!(e instanceof Ce||e instanceof kn))throw new J(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Mt.fromString(t,...n));return Lh(r),new kn(e.firestore,null,r)}}function GI(e,t,...n){if(e=pn(e),arguments.length===1&&(t=Bd.newId()),Bp("doc","path",t),e instanceof So){const r=Mt.fromString(t,...n);return Mh(r),new Ce(e,null,new rt(r))}{if(!(e instanceof Ce||e instanceof kn))throw new J(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Mt.fromString(t,...n));return Mh(r),new Ce(e.firestore,e instanceof kn?e.converter:null,new rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wp(this,"async_queue_retry"),this.Vu=()=>{const r=ha();r&&tt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=t;const n=ha();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const n=ha();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ys(t))throw t;tt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const n=this.mu.then(()=>(this.du=!0,t().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw _n("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(t,n,r){this.fu(),this.Ru.indexOf(t)>-1&&(n=0);const s=Fl.createAndSchedule(this,t,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&at()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const n of this.Tu)if(n.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const n=this.Tu.indexOf(t);this.Tu.splice(n,1)}}function Bh(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(e,["next","error","complete"])}class Ji extends So{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Uh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Uh(t),this._firestoreClient=void 0,await t}}}function WI(e,t){const n=typeof e=="object"?e:xd(),r=typeof e=="string"?e:"(default)",s=Ws(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Fv("firestore");i&&zI(s,...i)}return s}function jp(e){if(e._terminated)throw new J(F.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||QI(e),e._firestoreClient}function QI(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,h,d){return new IT(l,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Up(d.experimentalLongPollingOptions),d.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new jI(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $r(ne.fromBase64String(t))}catch(n){throw new J(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $r(ne.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new J(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new J(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new J(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return It(this._lat,t._lat)||It(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=/^__.*__$/;class XI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new cr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xs(t,this.data,n,this.fieldTransforms)}}function qp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class zl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new zl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Fu({path:r,xu:!1});return s.Ou(t),s}Nu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Zi(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(qp(this.Cu)&&YI.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class JI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Io(t)}Qu(t,n,r,s=!1){return new zl({Cu:t,methodName:n,qu:r,path:Zt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hp(e){const t=e._freezeSettings(),n=Io(e._databaseId);return new JI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ZI(e,t,n,r,s,i={}){const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);Gp("Data must be an object, but it was:",a,r);const l=Kp(r,a);let c,h;if(i.merge)c=new Be(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=e0(t,p,n);if(!a.contains(m))throw new J(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);r0(d,m)||d.push(m)}c=new Be(d),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new XI(new Ne(l),c,h)}class Gl extends ql{_toFieldTransform(t){return new WT(t.path,new js)}isEqual(t){return t instanceof Gl}}function t0(e,t,n,r=!1){return Wl(n,e.Qu(r?4:3,t))}function Wl(e,t){if(zp(e=pn(e)))return Gp("Unsupported field value:",t,e),Kp(e,t);if(e instanceof ql)return function(r,s){if(!qp(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Wl(l,s.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=zt.fromDate(r);return{timestampValue:Qi(s.serializer,i)}}if(r instanceof zt){const i=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qi(s.serializer,i)}}if(r instanceof Hl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:dp(s.serializer,r._byteString)};if(r instanceof Ce){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kl)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Sl(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ro(r)}`)}(e,t)}function Kp(e,t){const n={};return $d(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qr(e,(r,s)=>{const i=Wl(s,t.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function zp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zt||e instanceof Hl||e instanceof $r||e instanceof Ce||e instanceof ql||e instanceof Kl)}function Gp(e,t,n){if(!zp(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ro(n);throw r==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function e0(e,t,n){if((t=pn(t))instanceof jl)return t._internalPath;if(typeof t=="string")return Wp(e,t);throw Zi("Field path arguments must be of type string or ",e,!1,void 0,n)}const n0=new RegExp("[~\\*/\\[\\]]");function Wp(e,t,n){if(t.search(n0)>=0)throw Zi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new jl(...t.split("."))._internalPath}catch{throw Zi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zi(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new J(F.INVALID_ARGUMENT,l+e+c)}function r0(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new s0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ql("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s0 extends Qp{data(){return super.data()}}function Ql(e,t){return typeof t=="string"?Wp(e,t):t instanceof jl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new J(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yl{}class Yp extends Yl{}function o0(e,t,...n){let r=[];t instanceof Yl&&r.push(t),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof Jl).length,l=i.filter(c=>c instanceof Xl).length;if(a>1||a>0&&l>0)throw new J(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class Xl extends Yp{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Xl(t,n,r)}_apply(t){const n=this._parse(t);return Xp(t._query,n),new hr(t.firestore,t.converter,Ba(t._query,n))}_parse(t){const n=Hp(t.firestore);return function(i,a,l,c,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){jh(p,d);const g=[];for(const b of p)g.push($h(c,i,b));m={arrayValue:{values:g}}}else m=$h(c,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||jh(p,d),m=t0(l,a,p,d==="in"||d==="not-in");return Ht.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Jl extends Yl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Jl(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qe.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)Xp(a,c),a=Ba(a,c)}(t._query,n),new hr(t.firestore,t.converter,Ba(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zl extends Yp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Zl(t,n)}_apply(t){const n=function(s,i,a){if(s.startAt!==null)throw new J(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $s(i,a)}(t._query,this._field,this._direction);return new hr(t.firestore,t.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Hr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function a0(e,t="asc"){const n=t,r=Ql("orderBy",e);return Zl._create(r,n)}function $h(e,t,n){if(typeof(n=pn(n))=="string"){if(n==="")throw new J(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yd(t)&&n.indexOf("/")!==-1)throw new J(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Mt.fromString(n));if(!rt.isDocumentKey(r))throw new J(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ah(e,new rt(r))}if(n instanceof Ce)return ah(e,n._key);throw new J(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ro(n)}.`)}function jh(e,t){if(!Array.isArray(e)||e.length===0)throw new J(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Xp(e,t){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new J(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new J(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class l0{convertValue(t,n="none"){switch(ir(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $t(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(sr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw at()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return qr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>$t(a.doubleValue));return new Kl(i)}convertGeoPoint(t){return new Hl($t(t.latitude),$t(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=wl(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fs(t));default:return null}}convertTimestamp(t){const n=Un(t);return new zt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Mt.fromString(t);St(vp(r));const s=new Us(r.get(1),r.get(3)),i=new rt(r.popFirst(5));return s.isEqual(n)||_n(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(e,t,n){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jp extends Qp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Di(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ql("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Di extends Jp{data(t={}){return super.data(t)}}class u0{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new ps(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Di(this._firestore,this._userDataWriter,r.key,r,new ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Di(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ps(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Di(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ps(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:h0(l.type),doc:c,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function h0(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}class Zp extends l0{constructor(t){super(),this.firestore=t}convertBytes(t){return new $r(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}function f0(e,t){const n=Ss(e.firestore,Ji),r=GI(e),s=c0(e.converter,t);return p0(n,[ZI(Hp(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function d0(e,...t){var n,r,s;e=pn(e);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||Bh(t[a])||(i=t[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Bh(t[a])){const p=t[a];t[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),t[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),t[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,h,d;if(e instanceof Ce)h=Ss(e.firestore,Ji),d=Rl(e._key.path),c={next:p=>{t[a]&&t[a](m0(h,e,p))},error:t[a+1],complete:t[a+2]};else{const p=Ss(e,hr);h=Ss(p.firestore,Ji),d=p._query;const m=new Zp(h);c={next:g=>{t[a]&&t[a](new u0(h,m,p,g))},error:t[a+1],complete:t[a+2]},i0(e._query)}return function(m,g,b,V){const O=new $I(V),q=new II(g,O,b);return m.asyncQueue.enqueueAndForget(async()=>vI(await kh(m),q)),()=>{O.Za(),m.asyncQueue.enqueueAndForget(async()=>EI(await kh(m),q))}}(jp(h),d,l,c)}function p0(e,t){return function(r,s){const i=new nr;return r.asyncQueue.enqueueAndForget(async()=>OI(await HI(r),s,i)),i.promise}(jp(e),t)}function m0(e,t,n){const r=n.docs.get(t._key),s=new Zp(e);return new Jp(e,s,t._key,r,new ps(n.hasPendingWrites,n.fromCache),t.converter)}function qh(){return new Gl("serverTimestamp")}(function(t,n=!0){(function(s){jr=s})(YE),Ln(new mn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ji(new lT(r.getProvider("auth-internal")),new fT(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new J(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(h.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ye(nh,"4.7.3",t),Ye(nh,"4.7.3","esm2017")})();var g0="firebase",_0="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ye(g0,_0,"app");const tm="@firebase/installations",tc="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=1e4,nm=`w:${tc}`,rm="FIS_v2",y0="https://firebaseinstallations.googleapis.com/v1",v0=60*60*1e3,E0="installations",T0="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},or=new go(E0,T0,w0);function sm(e){return e instanceof $n&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im({projectId:e}){return`${y0}/projects/${e}/installations`}function om(e){return{token:e.token,requestStatus:2,expiresIn:A0(e.expiresIn),creationTime:Date.now()}}async function am(e,t){const r=(await t.json()).error;return or.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lm({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function I0(e,{refreshToken:t}){const n=lm(e);return n.append("Authorization",b0(t)),n}async function cm(e){const t=await e();return t.status>=500&&t.status<600?e():t}function A0(e){return Number(e.replace("s","000"))}function b0(e){return`${rm} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=im(e),s=lm(e),i=t.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:n,authVersion:rm,appId:e.appId,sdkVersion:nm},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await cm(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:om(h.authToken)}}else throw await am("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=/^[cdef][\w-]{21}$/,Ya="";function C0(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=x0(e);return P0.test(n)?n:Ya}catch{return Ya}}function x0(e){return S0(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Map;function fm(e,t){const n=Po(e);dm(n,t),V0(n,t)}function dm(e,t){const n=hm.get(e);if(n)for(const r of n)r(t)}function V0(e,t){const n=D0();n&&n.postMessage({key:e,fid:t}),O0()}let Zn=null;function D0(){return!Zn&&"BroadcastChannel"in self&&(Zn=new BroadcastChannel("[Firebase] FID Change"),Zn.onmessage=e=>{dm(e.data.key,e.data.fid)}),Zn}function O0(){hm.size===0&&Zn&&(Zn.close(),Zn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebase-installations-database",N0=1,ar="firebase-installations-store";let da=null;function ec(){return da||(da=Pd(k0,N0,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ar)}}})),da}async function to(e,t){const n=Po(e),s=(await ec()).transaction(ar,"readwrite"),i=s.objectStore(ar),a=await i.get(n);return await i.put(t,n),await s.done,(!a||a.fid!==t.fid)&&fm(e,t.fid),t}async function pm(e){const t=Po(e),r=(await ec()).transaction(ar,"readwrite");await r.objectStore(ar).delete(t),await r.done}async function Co(e,t){const n=Po(e),s=(await ec()).transaction(ar,"readwrite"),i=s.objectStore(ar),a=await i.get(n),l=t(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&fm(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(e){let t;const n=await Co(e.appConfig,r=>{const s=M0(r),i=L0(e,s);return t=i.registrationPromise,i.installationEntry});return n.fid===Ya?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function M0(e){const t=e||{fid:C0(),registrationStatus:0};return mm(t)}function L0(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(or.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=F0(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:U0(e)}:{installationEntry:t}}async function F0(e,t){try{const n=await R0(e,t);return to(e.appConfig,n)}catch(n){throw sm(n)&&n.customData.serverCode===409?await pm(e.appConfig):await to(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function U0(e){let t=await Hh(e.appConfig);for(;t.registrationStatus===1;)await um(100),t=await Hh(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await nc(e);return r||n}return t}function Hh(e){return Co(e,t=>{if(!t)throw or.create("installation-not-found");return mm(t)})}function mm(e){return B0(e)?{fid:e.fid,registrationStatus:0}:e}function B0(e){return e.registrationStatus===1&&e.registrationTime+em<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0({appConfig:e,heartbeatServiceProvider:t},n){const r=j0(e,n),s=I0(e,n),i=t.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:nm,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await cm(()=>fetch(r,l));if(c.ok){const h=await c.json();return om(h)}else throw await am("Generate Auth Token",c)}function j0(e,{fid:t}){return`${im(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(e,t=!1){let n;const r=await Co(e.appConfig,i=>{if(!gm(i))throw or.create("not-registered");const a=i.authToken;if(!t&&K0(a))return i;if(a.requestStatus===1)return n=q0(e,t),i;{if(!navigator.onLine)throw or.create("app-offline");const l=G0(i);return n=H0(e,l),l}});return n?await n:r.authToken}async function q0(e,t){let n=await Kh(e.appConfig);for(;n.authToken.requestStatus===1;)await um(100),n=await Kh(e.appConfig);const r=n.authToken;return r.requestStatus===0?rc(e,t):r}function Kh(e){return Co(e,t=>{if(!gm(t))throw or.create("not-registered");const n=t.authToken;return W0(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function H0(e,t){try{const n=await $0(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await to(e.appConfig,r),n}catch(n){if(sm(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await pm(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await to(e.appConfig,r)}throw n}}function gm(e){return e!==void 0&&e.registrationStatus===2}function K0(e){return e.requestStatus===2&&!z0(e)}function z0(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+v0}function G0(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function W0(e){return e.requestStatus===1&&e.requestTime+em<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(e){const t=e,{installationEntry:n,registrationPromise:r}=await nc(t);return r?r.catch(console.error):rc(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(e,t=!1){const n=e;return await X0(n),(await rc(n,t)).token}async function X0(e){const{registrationPromise:t}=await nc(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(e){if(!e||!e.options)throw pa("App Configuration");if(!e.name)throw pa("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw pa(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function pa(e){return or.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="installations",Z0="installations-internal",tA=e=>{const t=e.getProvider("app").getImmediate(),n=J0(t),r=Ws(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},eA=e=>{const t=e.getProvider("app").getImmediate(),n=Ws(t,_m).getImmediate();return{getId:()=>Q0(n),getToken:s=>Y0(n,s)}};function nA(){Ln(new mn(_m,tA,"PUBLIC")),Ln(new mn(Z0,eA,"PRIVATE"))}nA();Ye(tm,tc);Ye(tm,tc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="analytics",rA="firebase_id",sA="origin",iA=60*1e3,oA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te=new _l("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xe=new go("analytics","Analytics",aA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(e){if(!e.startsWith(sc)){const t=xe.create("invalid-gtag-resource",{gtagURL:e});return Te.warn(t.message),""}return e}function ym(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function cA(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function uA(e,t){const n=cA("firebase-js-sdk-policy",{createScriptURL:lA}),r=document.createElement("script"),s=`${sc}?l=${e}&id=${t}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function hA(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function fA(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const c=(await ym(n)).find(h=>h.measurementId===s);c&&await t[c.appId]}}catch(l){Te.error(l)}e("config",s,i)}async function dA(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await ym(n);for(const c of a){const h=l.find(p=>p.measurementId===c),d=h&&t[h.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(i){Te.error(i)}}function pA(e,t,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await dA(e,t,n,l,c)}else if(i==="config"){const[l,c]=a;await fA(e,t,n,r,l,c)}else if(i==="consent"){const[l,c]=a;e("consent",l,c)}else if(i==="get"){const[l,c,h]=a;e("get",l,c,h)}else if(i==="set"){const[l]=a;e("set",l)}else e(i,...a)}catch(l){Te.error(l)}}return s}function mA(e,t,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=pA(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}function gA(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(sc)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=30,yA=1e3;class vA{constructor(t={},n=yA){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const vm=new vA;function EA(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function TA(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:EA(r)},i=oA.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch{}throw xe.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function wA(e,t=vm,n){const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw xe.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw xe.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new bA;return setTimeout(async()=>{l.abort()},iA),Em({appId:r,apiKey:s,measurementId:i},a,l,t)}async function Em(e,{throttleEndTimeMillis:t,backoffCount:n},r,s=vm){var i;const{appId:a,measurementId:l}=e;try{await IA(r,t)}catch(c){if(l)return Te.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const c=await TA(e);return s.deleteThrottleMetadata(a),c}catch(c){const h=c;if(!AA(h)){if(s.deleteThrottleMetadata(a),l)return Te.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw c}const d=Number((i=h==null?void 0:h.customData)===null||i===void 0?void 0:i.httpStatus)===503?zu(n,s.intervalMillis,_A):zu(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(a,p),Te.debug(`Calling attemptFetch again in ${d} millis`),Em(e,p,r,s)}}function IA(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(xe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function AA(e){if(!(e instanceof $n)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class bA{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function RA(e,t,n,r,s){if(s&&s.global){e("event",n,r);return}else{const i=await t,a=Object.assign(Object.assign({},r),{send_to:i});e("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(){if(Ad())try{await bd()}catch(e){return Te.warn(xe.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Te.warn(xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function PA(e,t,n,r,s,i,a){var l;const c=wA(e);c.then(g=>{n[g.measurementId]=g.appId,e.options.measurementId&&g.measurementId!==e.options.measurementId&&Te.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Te.error(g)),t.push(c);const h=SA().then(g=>{if(g)return r.getId()}),[d,p]=await Promise.all([c,h]);gA(i)||uA(i,d.measurementId),s("js",new Date);const m=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return m[sA]="firebase",m.update=!0,p!=null&&(m[rA]=p),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(t){this.app=t}_delete(){return delete Ps[this.app.options.appId],Promise.resolve()}}let Ps={},zh=[];const Gh={};let ma="dataLayer",xA="gtag",Wh,Tm,Qh=!1;function VA(){const e=[];if(qv()&&e.push("This is a browser extension environment."),Kv()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=xe.create("invalid-analytics-context",{errorInfo:t});Te.warn(n.message)}}function DA(e,t,n){VA();const r=e.options.appId;if(!r)throw xe.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Te.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xe.create("no-api-key");if(Ps[r]!=null)throw xe.create("already-exists",{id:r});if(!Qh){hA(ma);const{wrappedGtag:i,gtagCore:a}=mA(Ps,zh,Gh,ma,xA);Tm=i,Wh=a,Qh=!0}return Ps[r]=PA(e,zh,Gh,t,Wh,ma,n),new CA(e)}function OA(e=xd()){e=pn(e);const t=Ws(e,eo);return t.isInitialized()?t.getImmediate():kA(e)}function kA(e,t={}){const n=Ws(e,eo);if(n.isInitialized()){const s=n.getImmediate();if(Hi(t,n.getOptions()))return s;throw xe.create("already-initialized")}return n.initialize({options:t})}function NA(e,t,n,r){e=pn(e),RA(Tm,Ps[e.app.options.appId],t,n,r).catch(s=>Te.error(s))}const Yh="@firebase/analytics",Xh="0.10.8";function MA(){Ln(new mn(eo,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return DA(r,s,n)},"PUBLIC")),Ln(new mn("analytics-internal",e,"PRIVATE")),Ye(Yh,Xh),Ye(Yh,Xh,"esm2017");function e(t){try{const n=t.getProvider(eo).getImmediate();return{logEvent:(r,s,i)=>NA(n,r,s,i)}}catch(n){throw xe.create("interop-component-reg-failed",{reason:n})}}}MA();const LA={apiKey:"AIzaSyBCUwoqFgcERGRIltVqv61rJin2SIaqh5c",authDomain:"expense-tracker-29077.firebaseapp.com",projectId:"expense-tracker-29077",storageBucket:"expense-tracker-29077.firebasestorage.app",messagingSenderId:"332868270887",appId:"1:332868270887:web:962a5db8e09493d91b8702",measurementId:"G-MZQ5TKZBHQ"},wm=Cd(LA);OA(wm);const Im=WI(wm),Am="expenses",FA=async e=>{try{return(await f0($p(Im,Am),{...e,createdAt:qh(),updatedAt:qh()})).id}catch(t){throw console.error("Error adding expense:",t),t}},UA=e=>{const t=o0($p(Im,Am),a0("date","desc"));return d0(t,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));e(r)},n=>{console.error("Error listening to expenses:",n)})},BA={class:"card"},$A={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jA={class:"space-y-2"},qA={class:"flex items-center"},HA={class:"flex items-center"},KA={key:0,class:"transition-all duration-200"},zA=["max"],GA={class:"text-sm text-gray-500 mt-1"},WA={class:"flex flex-col sm:flex-row gap-3 pt-4"},QA=["disabled"],YA={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},XA={class:"text-red-700 text-sm"},JA={key:1,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},ZA={__name:"ExpenseForm",emits:["expense-added"],setup(e,{emit:t}){const n=t,r=ye({amount:null,description:"",category:"",date:new Date().toISOString().split("T")[0],splitType:"shared",customOwedAmount:null}),s=ye(!1),i=ye(""),a=ye(!1),l=localStorage.getItem("currentUser"),c=Ct(()=>r.value.amount&&r.value.amount>0&&r.value.description.trim()&&r.value.date);Cr(()=>r.value.splitType,p=>{p==="individual"&&(r.value.customOwedAmount=null)});const h=async()=>{if(!c.value){i.value="Please fill in all required fields";return}s.value=!0,i.value="",a.value=!1;try{const p={amount:r.value.amount,description:r.value.description.trim(),category:r.value.category.trim(),date:r.value.date,splitType:r.value.splitType,user:l,customOwedAmount:r.value.splitType==="shared"?r.value.customOwedAmount:null};await FA(p),a.value=!0,n("expense-added"),setTimeout(()=>{d(),a.value=!1},2e3)}catch(p){console.error("Error adding expense:",p),i.value="Failed to add expense. Please try again."}finally{s.value=!1}},d=()=>{r.value={amount:null,description:"",category:"",date:new Date().toISOString().split("T")[0],splitType:"shared",customOwedAmount:null},i.value="",a.value=!1};return(p,m)=>(Dt(),Nt("div",BA,[m[16]||(m[16]=D("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Add New Expense",-1)),D("form",{onSubmit:od(h,["prevent"]),class:"space-y-4"},[D("div",$A,[D("div",null,[m[7]||(m[7]=D("label",{for:"amount",class:"block text-sm font-medium text-gray-700 mb-2"}," Amount * ",-1)),an(D("input",{id:"amount","onUpdate:modelValue":m[0]||(m[0]=g=>r.value.amount=g),type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"input-field",required:""},null,512),[[Xn,r.value.amount,void 0,{number:!0}]])]),D("div",null,[m[8]||(m[8]=D("label",{for:"date",class:"block text-sm font-medium text-gray-700 mb-2"}," Date * ",-1)),an(D("input",{id:"date","onUpdate:modelValue":m[1]||(m[1]=g=>r.value.date=g),type:"date",class:"input-field",required:""},null,512),[[Xn,r.value.date]])])]),D("div",null,[m[9]||(m[9]=D("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description * ",-1)),an(D("input",{id:"description","onUpdate:modelValue":m[2]||(m[2]=g=>r.value.description=g),type:"text",placeholder:"What was this expense for?",class:"input-field",required:""},null,512),[[Xn,r.value.description]])]),D("div",null,[m[10]||(m[10]=D("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"}," Category ",-1)),an(D("input",{id:"category","onUpdate:modelValue":m[3]||(m[3]=g=>r.value.category=g),type:"text",placeholder:"e.g., Food, Transport, Entertainment",class:"input-field"},null,512),[[Xn,r.value.category]])]),D("div",null,[m[13]||(m[13]=D("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Split Type * ",-1)),D("div",jA,[D("label",qA,[an(D("input",{"onUpdate:modelValue":m[4]||(m[4]=g=>r.value.splitType=g),type:"radio",value:"shared",class:"mr-2"},null,512),[[bu,r.value.splitType]]),m[11]||(m[11]=D("span",null,"Shared (split between both)",-1))]),D("label",HA,[an(D("input",{"onUpdate:modelValue":m[5]||(m[5]=g=>r.value.splitType=g),type:"radio",value:"individual",class:"mr-2"},null,512),[[bu,r.value.splitType]]),m[12]||(m[12]=D("span",null,"Individual (only me)",-1))])])]),r.value.splitType==="shared"?(Dt(),Nt("div",KA,[m[14]||(m[14]=D("label",{for:"customOwedAmount",class:"block text-sm font-medium text-gray-700 mb-2"}," Custom amount the other person owes (optional) ",-1)),an(D("input",{id:"customOwedAmount","onUpdate:modelValue":m[6]||(m[6]=g=>r.value.customOwedAmount=g),type:"number",step:"0.01",min:"0",max:r.value.amount,placeholder:"Leave empty for 50/50 split",class:"input-field"},null,8,zA),[[Xn,r.value.customOwedAmount,void 0,{number:!0}]]),D("p",GA," If left empty, the expense will be split 50/50. You'll pay "+pt(r.value.amount?(r.value.amount/2).toFixed(2):"0.00")+", they'll owe "+pt(r.value.amount?(r.value.amount/2).toFixed(2):"0.00")+". ",1)])):Cn("",!0),D("div",WA,[D("button",{type:"submit",class:"btn-primary flex-1",disabled:s.value||!c.value},pt(s.value?"Adding...":"Add Expense"),9,QA),D("button",{type:"button",onClick:d,class:"btn-secondary flex-1"}," Reset ")])],32),i.value?(Dt(),Nt("div",YA,[D("p",XA,pt(i.value),1)])):Cn("",!0),a.value?(Dt(),Nt("div",JA,m[15]||(m[15]=[D("p",{class:"text-green-700 text-sm"},"Expense added successfully!",-1)]))):Cn("",!0)]))}},tb={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},eb={class:"card"},nb={class:"flex items-center"},rb={class:"ml-4"},sb={class:"text-2xl font-bold text-gray-900"},ib={class:"card"},ob={class:"flex items-center"},ab={class:"ml-4"},lb={class:"text-2xl font-bold text-gray-900"},cb={class:"card"},ub={class:"flex items-center"},hb={class:"ml-4"},fb={class:"text-2xl font-bold text-gray-900"},db={class:"card"},pb={class:"flex items-center"},mb={class:"ml-4"},gb={key:0,class:"card mb-8"},_b={class:"p-4 bg-gray-50 rounded-lg"},yb={key:1,class:"card text-center py-8"},vb={__name:"ExpenseSummary",props:{expenses:{type:Array,default:()=>[]}},setup(e){const t=e,n=Ct(()=>t.expenses.reduce((m,g)=>m+(g.amount||0),0)),r=Ct(()=>t.expenses.filter(m=>m.user==="b").reduce((m,g)=>m+(g.amount||0),0)),s=Ct(()=>t.expenses.filter(m=>m.user==="m").reduce((m,g)=>m+(g.amount||0),0)),i=Ct(()=>t.expenses.filter(m=>m.splitType==="shared")),a=Ct(()=>i.value.reduce((m,g)=>g.customOwedAmount!==null&&g.customOwedAmount!==void 0?g.user==="b"?m+(g.amount-g.customOwedAmount):m+g.customOwedAmount:m+g.amount/2,0));Ct(()=>i.value.reduce((m,g)=>g.customOwedAmount!==null&&g.customOwedAmount!==void 0?g.user==="m"?m+(g.amount-g.customOwedAmount):m+g.customOwedAmount:m+g.amount/2,0));const l=Ct(()=>i.value.filter(m=>m.user==="b").reduce((m,g)=>m+(g.amount||0),0));Ct(()=>i.value.filter(m=>m.user==="m").reduce((m,g)=>m+(g.amount||0),0));const c=Ct(()=>l.value-a.value),h=Ct(()=>{const m=Math.abs(c.value);return m<.01?"Even":c.value>0?`M owes B $${m.toFixed(2)}`:`B owes M $${m.toFixed(2)}`}),d=Ct(()=>{const m=Math.abs(c.value);return m<.01?"You're all settled up! 🎉":c.value>0?`M should pay B $${m.toFixed(2)}`:`B should pay M $${m.toFixed(2)}`}),p=Ct(()=>Math.abs(c.value)<.01?"text-green-600":"text-orange-600");return(m,g)=>(Dt(),Nt(Re,null,[D("div",tb,[D("div",eb,[D("div",nb,[g[1]||(g[1]=D("div",{class:"p-2 bg-blue-100 rounded-lg"}," 💰 ",-1)),D("div",rb,[g[0]||(g[0]=D("p",{class:"text-sm font-medium text-gray-600"},"Total Expenses",-1)),D("p",sb,"$"+pt(n.value.toFixed(2)),1)])])]),D("div",ib,[D("div",ob,[g[3]||(g[3]=D("div",{class:"p-2 bg-green-100 rounded-lg"}," 👤 ",-1)),D("div",ab,[g[2]||(g[2]=D("p",{class:"text-sm font-medium text-gray-600"},"B's Total Spent",-1)),D("p",lb,"$"+pt(r.value.toFixed(2)),1)])])]),D("div",cb,[D("div",ub,[g[5]||(g[5]=D("div",{class:"p-2 bg-purple-100 rounded-lg"}," 👤 ",-1)),D("div",hb,[g[4]||(g[4]=D("p",{class:"text-sm font-medium text-gray-600"},"M's Total Spent",-1)),D("p",fb,"$"+pt(s.value.toFixed(2)),1)])])]),D("div",db,[D("div",pb,[g[7]||(g[7]=D("div",{class:"p-2 bg-yellow-100 rounded-lg"}," ⚖️ ",-1)),D("div",mb,[g[6]||(g[6]=D("p",{class:"text-sm font-medium text-gray-600"},"Balance",-1)),D("p",{class:be(["text-2xl font-bold",p.value])},pt(h.value),3)])])])]),e.expenses.length>0?(Dt(),Nt("div",gb,[g[8]||(g[8]=D("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Settlement Details",-1)),D("div",_b,[D("p",{class:be(["text-lg font-medium",p.value])},pt(d.value),3)])])):(Dt(),Nt("div",yb,g[9]||(g[9]=[D("div",{class:"text-gray-400 text-4xl mb-4"},"📊",-1),D("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No expenses yet",-1),D("p",{class:"text-gray-600"},"Start by adding your first expense above!",-1)])))],64))}},Eb={class:"card"},Tb={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},wb={class:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto"},Ib={class:"relative"},Ab=["disabled"],bb={key:0,class:"text-center py-8"},Rb={key:1,class:"hidden md:block overflow-x-auto"},Sb={class:"min-w-full divide-y divide-gray-200"},Pb={class:"bg-gray-50"},Cb=["onClick"],xb={class:"flex items-center space-x-1"},Vb={key:0,class:"text-blue-600"},Db={class:"bg-white divide-y divide-gray-200"},Ob={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},kb={class:"px-6 py-4 whitespace-nowrap"},Nb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},Mb={class:"px-6 py-4 text-sm text-gray-900"},Lb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},Fb={class:"px-6 py-4 whitespace-nowrap"},Ub={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Bb={key:2,class:"md:hidden space-y-4"},$b={class:"flex justify-between items-start mb-3"},jb={class:"font-medium text-gray-900"},qb={class:"text-sm text-gray-600"},Hb={class:"text-right"},Kb={class:"text-lg font-bold text-gray-900"},zb={class:"flex flex-wrap gap-2 text-sm"},Gb={key:0,class:"bg-gray-100 text-gray-700 px-2 py-1 rounded"},Wb={key:1,class:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded"},Qb={key:3,class:"text-center py-12"},Yb={class:"text-lg font-medium text-gray-900 mb-2"},Xb={class:"text-gray-600"},Jb={key:4,class:"mt-6 flex items-center justify-between"},Zb={class:"text-sm text-gray-700"},tR={class:"flex items-center space-x-2"},eR=["disabled"],nR={class:"text-sm text-gray-700"},rR=["disabled"],_r=10,sR={__name:"ExpenseTable",props:{expenses:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["export-csv"],setup(e){const t=e,n=ye(""),r=ye("date"),s=ye("desc"),i=ye(1),a=[{key:"date",label:"Date",sortable:!0},{key:"user",label:"User",sortable:!0},{key:"amount",label:"Amount",sortable:!0},{key:"description",label:"Description",sortable:!1},{key:"category",label:"Category",sortable:!0},{key:"splitType",label:"Split Type",sortable:!0},{key:"customOwedAmount",label:"Custom Owed",sortable:!1}],l=Ct(()=>{let m=[...t.expenses];if(n.value){const g=n.value.toLowerCase();m=m.filter(b=>b.description.toLowerCase().includes(g)||b.category&&b.category.toLowerCase().includes(g))}return m.sort((g,b)=>{let V=g[r.value],O=b[r.value];return r.value==="date"?(V=new Date(V),O=new Date(O)):r.value==="amount"?(V=Number(V),O=Number(O)):typeof V=="string"&&(V=V.toLowerCase(),O=O.toLowerCase()),V<O?s.value==="asc"?-1:1:V>O?s.value==="asc"?1:-1:0}),m}),c=Ct(()=>Math.ceil(l.value.length/_r)),h=Ct(()=>{const m=(i.value-1)*_r,g=m+_r;return l.value.slice(m,g)}),d=m=>{r.value===m?s.value=s.value==="asc"?"desc":"asc":(r.value=m,s.value="asc")},p=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return Cr(n,()=>{i.value=1}),(m,g)=>(Dt(),Nt("div",Eb,[D("div",Tb,[g[5]||(g[5]=D("h2",{class:"text-xl font-semibold text-gray-900"},"All Expenses",-1)),D("div",wb,[D("div",Ib,[an(D("input",{"onUpdate:modelValue":g[0]||(g[0]=b=>n.value=b),type:"text",placeholder:"Search description or category...",class:"input-field w-full sm:w-64 pl-8"},null,512),[[Xn,n.value]]),g[4]||(g[4]=D("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[D("span",{class:"text-gray-400"},"🔍")],-1))]),D("button",{onClick:g[1]||(g[1]=b=>m.$emit("export-csv")),class:"btn-secondary whitespace-nowrap",disabled:l.value.length===0}," 📥 Export CSV ",8,Ab)])]),e.loading?(Dt(),Nt("div",bb,g[6]||(g[6]=[D("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),D("p",{class:"mt-2 text-gray-600"},"Loading expenses...",-1)]))):l.value.length>0?(Dt(),Nt("div",Rb,[D("table",Sb,[D("thead",Pb,[D("tr",null,[(Dt(),Nt(Re,null,Yo(a,b=>D("th",{key:b.key,onClick:V=>b.sortable&&d(b.key),class:be(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",{"cursor-pointer hover:bg-gray-100":b.sortable}])},[D("div",xb,[D("span",null,pt(b.label),1),b.sortable&&r.value===b.key?(Dt(),Nt("span",Vb,pt(s.value==="asc"?"↑":"↓"),1)):Cn("",!0)])],10,Cb)),64))])]),D("tbody",Db,[(Dt(!0),Nt(Re,null,Yo(h.value,b=>(Dt(),Nt("tr",{key:b.id,class:"hover:bg-gray-50"},[D("td",Ob,pt(p(b.date)),1),D("td",kb,[D("span",{class:be(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",b.user==="b"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"])},pt(b.user.toUpperCase()),3)]),D("td",Nb," $"+pt(b.amount.toFixed(2)),1),D("td",Mb,pt(b.description),1),D("td",Lb,pt(b.category||"-"),1),D("td",Fb,[D("span",{class:be(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",b.splitType==="shared"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},pt(b.splitType==="shared"?"Shared":"Individual"),3)]),D("td",Ub,pt(b.customOwedAmount?`$${b.customOwedAmount.toFixed(2)}`:"-"),1)]))),128))])])])):l.value.length>0?(Dt(),Nt("div",Bb,[(Dt(!0),Nt(Re,null,Yo(h.value,b=>(Dt(),Nt("div",{key:b.id,class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm"},[D("div",$b,[D("div",null,[D("p",jb,pt(b.description),1),D("p",qb,pt(p(b.date)),1)]),D("div",Hb,[D("p",Kb,"$"+pt(b.amount.toFixed(2)),1),D("span",{class:be(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",b.user==="b"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"])},pt(b.user.toUpperCase()),3)])]),D("div",zb,[b.category?(Dt(),Nt("span",Gb,pt(b.category),1)):Cn("",!0),D("span",{class:be(["px-2 py-1 rounded",b.splitType==="shared"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},pt(b.splitType==="shared"?"Shared":"Individual"),3),b.customOwedAmount?(Dt(),Nt("span",Wb," Owed: $"+pt(b.customOwedAmount.toFixed(2)),1)):Cn("",!0)])]))),128))])):(Dt(),Nt("div",Qb,[g[7]||(g[7]=D("div",{class:"text-gray-400 text-4xl mb-4"},"📋",-1)),D("h3",Yb,pt(n.value?"No matching expenses":"No expenses found"),1),D("p",Xb,pt(n.value?"Try adjusting your search terms":"Start by adding your first expense"),1)])),l.value.length>_r?(Dt(),Nt("div",Jb,[D("div",Zb," Showing "+pt((i.value-1)*_r+1)+" to "+pt(Math.min(i.value*_r,l.value.length))+" of "+pt(l.value.length)+" results ",1),D("div",tR,[D("button",{onClick:g[2]||(g[2]=b=>i.value=Math.max(1,i.value-1)),disabled:i.value===1,class:be(["btn-secondary text-sm",{"opacity-50 cursor-not-allowed":i.value===1}])}," Previous ",10,eR),D("span",nR," Page "+pt(i.value)+" of "+pt(c.value),1),D("button",{onClick:g[3]||(g[3]=b=>i.value=Math.min(c.value,i.value+1)),disabled:i.value===c.value,class:be(["btn-secondary text-sm",{"opacity-50 cursor-not-allowed":i.value===c.value}])}," Next ",10,rR)])])):Cn("",!0)]))}},iR={class:"min-h-screen bg-gray-50"},oR={class:"bg-white shadow-sm border-b border-gray-200"},aR={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},lR={class:"flex justify-between items-center py-4"},cR={class:"flex items-center space-x-4"},uR={class:"text-sm text-gray-600"},hR={class:"text-gray-900"},fR={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dR={class:"mb-8"},pR={__name:"Dashboard",setup(e){const t=Ed(),n=ye([]),r=ye(!0),s=ye(localStorage.getItem("currentUser")||"");let i=null;const a=()=>{localStorage.removeItem("currentUser"),t.push("/login")},l=()=>{console.log("Expense added successfully")},c=()=>{if(n.value.length===0){alert("No expenses to export");return}const d=[["Date","User","Amount","Description","Category","Split Type","Custom Owed Amount"].join(","),...n.value.map(b=>[b.date,b.user,b.amount,`"${b.description}"`,b.category||"",b.splitType,b.customOwedAmount||""].join(","))].join(`
`),p=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),g=URL.createObjectURL(p);m.setAttribute("href",g),m.setAttribute("download",`expenses_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)};return Nf(()=>{i=UA(h=>{n.value=h,r.value=!1})}),hl(()=>{i&&i()}),(h,d)=>(Dt(),Nt("div",iR,[D("header",oR,[D("div",aR,[D("div",lR,[d[1]||(d[1]=D("h1",{class:"text-2xl font-bold text-gray-900"}," Couple's Expense Tracker ",-1)),D("div",cR,[D("span",uR,[d[0]||(d[0]=ed(" Logged in as: ")),D("strong",hR,pt(s.value.toUpperCase()),1)]),D("button",{onClick:a,class:"btn-secondary text-sm"}," Logout ")])])])]),D("div",fR,[te(vb,{expenses:n.value},null,8,["expenses"]),D("div",dR,[te(ZA,{onExpenseAdded:l})]),te(sR,{expenses:n.value,loading:r.value,onExportCsv:c},null,8,["expenses","loading"])])]))}},mR=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:Pv},{path:"/dashboard",name:"Dashboard",component:pR,beforeEnter:(e,t,n)=>{const r=localStorage.getItem("currentUser");!r||r!=="b"&&r!=="m"?n("/login"):n()}}],gR=wv({history:Xy(),routes:mR});my(vy).use(gR).mount("#app");
